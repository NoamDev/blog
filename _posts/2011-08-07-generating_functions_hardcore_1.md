---
id: 1265
title: "פונקציות יוצרות - והפעם ברצינות"
date: 2011-08-07 23:10:44
layout: post
categories: 
  - קומבינטוריקה
tags: 
  - גם טכני זה כיף!
  - פונקציות יוצרות
  - קומבינטוריקה
---
כבר כתבתי בעבר <a href="http://www.gadial.net/?p=206">פוסט</a> על פונקציות יוצרות, אבל אני מעוניין לשכוח זמנית מקיומו ולהציג את הנושא מחדש, בצורה מעמיקה יותר ומנקודת המבט ה"פורמלית" שאליה לא ממש נכנסתי בפוסט ההוא. המטרה שלי היא לשכנע אתכם - בעיקר את מי שלמד פונקציות יוצרות לחמש דקות, לא הבין מה זה טוב ומה הולך שם ושכח מזה - שזה ממש, ממש מגניב. אני גם רוצה הפעם לתת סקירה מקיפה יותר ולהיכנס הרבה יותר לפינות האפלות כדי להבהיר שכל מה שהולך כאן הוא תקין לחלוטין (שכן בדרך ההצגה השטחית המקובלת חלק ממה שהולך שם גורם להרמת גבה). אני מקווה שנהנה.

נתחיל עם המה ולמה. פונקציות יוצרות הן מושג בקומבינטוריקה אנומרטיבית - הענף שבו מתעסקים בשאלת "כמה?". בעיה קומבינטורית ממוצעת היא זו: כמה דרכים יש להחזיר ל-{::nomarkdown}\( n\){:/nomarkdown} אנשים את המעיל שהם מסרו בתחילת המסיבה כך שאף אחד לא יקבל בחזרה את המעיל שלו? כמה דרכים יש לפרק את המספר {::nomarkdown}\( n\){:/nomarkdown} לסכום של מספרים טבעיים קטנים או שווים לו? כמה ססמאות מאורך {::nomarkdown}\( n\){:/nomarkdown} אפשר לבחור? וכו' וכו'.

שימו לב שלא שאלתי שאלה בסגנון "כמה תוצאות אפשריות יש בלוטו?". זה מחדד את מה שאנחנו מדברים עליו כאן - בעיית ספירה שתלויה ב<strong>פרמטר</strong>. בכל הבעיות שתיארתי למעלה כיכב {::nomarkdown}\( n\){:/nomarkdown} בתור פרמטר שמאפיין את ה"גודל" של האובייקטים שאנחנו סופרים כרגע. אני שם את המילה "גודל" במרכאות כי הפירוש שלה יכול להשתנות מבעיה לבעיה; מה שחשוב כאן הוא שאנחנו סופרים את כמות האיברים במחלקה אינסופית של אובייקטים, נקרא לה {::nomarkdown}\( A\){:/nomarkdown}, שבה לכל {::nomarkdown}\( n\){:/nomarkdown} יש רק מספר סופי של אובייקטים מגודל {::nomarkdown}\( n\){:/nomarkdown}, והאתגר שלנו הוא למצוא את {::nomarkdown}\( a_{n}\){:/nomarkdown} - מספר האובייקטים ב-{::nomarkdown}\( A\){:/nomarkdown} שהם מגודל {::nomarkdown}\( n\){:/nomarkdown}, לכל {::nomarkdown}\( n\){:/nomarkdown}.

האופן שבו אנחנו חושבים בדרך כלל על פתרון לבעיה כמו זו הוא <strong>נוסחה סגורה</strong> עבור {::nomarkdown}\( a_{n}\){:/nomarkdown}. נוסחה סגורה היא ביטוי אלגברי פשוט שנותן לנו את {::nomarkdown}\( a_{n}\){:/nomarkdown} כפונקציה כלשהי של {::nomarkdown}\( n\){:/nomarkdown}, למשל {::nomarkdown}\( a_{n}=\frac{n\left(n+1\right)}{2}\){:/nomarkdown} או {::nomarkdown}\( a_{n}=\frac{n!}{\left(n-3\right)!}\){:/nomarkdown} הן נוסחאות סגורות. לרוע המזל, בקומבינטוריקה נוסחאות סגורות הן עניין נדיר למדי ולרוב פשוט לא ניתן למצוא כאלו. זו הבעיה הבסיסית. בעיית החלוקה שלעיל של {::nomarkdown}\( n\){:/nomarkdown} למספרים טבעיים היא דוגמה לבעיה שלא ידועה לה נוסחה סגורה; לא מזמן כתבתי <a href="http://www.gadial.net/?p=1212">פוסט בעניין</a>. לפעמים הנוסחה הסגורה היא "מוזרה" קצת באופיה - למשל, לבעיה עם המעילים יש נוסחה סגורה פשוטה: {::nomarkdown}\( a_{n}=\left[\frac{n!}{e}\right]\){:/nomarkdown}, כאשר הסוגריים המרובעים פירושם לעגל את {::nomarkdown}\( \frac{n!}{e}\){:/nomarkdown} למספר הטבעי הקרוב ביותר, ו-{::nomarkdown}\( e\){:/nomarkdown} הוא פשוט הקבוע המפורסם (איך מגיעים לנוסחה הזו? זה עוד תרגיל חביב בקומבינטוריקה שאדבר עליו בפעם אחרת), אבל בדרך כלל פשוט אין נוסחה כזו. לפעמים יש נוסחה אבל היא מסובכת להחריד וקשה להבין ממנה משהו, בעיקר כשרוצים פריט מידע שלא דורש לדעת את {::nomarkdown}\( a_{n}\){:/nomarkdown} בדיוק מוחלט - למשל, רק את סדר הגודל של {::nomarkdown}\( a_{n}\){:/nomarkdown}.

אם כן, לפעמים צריך גישה שונה לגמרי לבעיות קומבינטוריות ופונקציות יוצרות מציעות גישה שונה לגמרי שכזו. בעוד שנוסחה סגורה עבור {::nomarkdown}\( a_{n}\){:/nomarkdown} מתארת איבר בודד בסדרה, פונקציה יוצרת היא דרך לתאר את כל הסדרה (האינסופית!) "בבת אחת".

הרעיון בפונקציות יוצרות - ובעיני הוא אחד מהרעיונות הנפלאים במתמטיקה - הוא "לשתול" את אברי הסדרה בתור מקדמים בטור חזקות אינסופי; טור שכזה מגדיר פונקציה שלאחר מכן ניתן לבצע עליה מניפולציות סטנדרטיות שמתבצעות על פונקציות - חיבור עם פונקציות אחרות, כפל בסקלרים ובפונקציות אחרות, העלאה בחזקה ואפילו גזירה ואינטגרציה, כשלכל המניפולציות הללו משמעויות קומבינטוריות של התמרה כלשהי שמתבצעת על כל הסדרה. בפרט, אם אנחנו יודעים את הפונקציות היוצרות של אובייקטים פשוטים, אנחנו מסוגלים לבנות מהם פונקציות יוצרות של אובייקטים מורכבים יותר בדרך שיטתית למדי, בעזרת מניפולציות אלגבריות. לאחר מכן, אם מתקבל ביטוי פשוט מספיק עבור הפונקציה היוצרת, אפשר להפיק ממנה מידע על הסדרה המקורית - לפעמים אפשר לקבל נוסחה מפורשת, לפעמים נוסחת נסיגה, אבל גם אם אי אפשר (כאמור, במקרים רבים אין ממש תקווה לנוסחה מפורשת) עדיין אפשר לקבל לעתים קרובות קירוב לסדרה, את קצב הגידול שלה וכן הלאה; כאן נכנסים לתמונה כלים מאנליזה מתמטית.

בקיצור, פונקציות יוצרות הן נקודת מפגש מרתקת בין קומבינטוריקה, אלגברה ואנליזה. בואו נפסיק לקשקש עכשיו ונעבור לאקשן.

בהינתן הסדרה {::nomarkdown}\( a_{n}\){:/nomarkdown} (כש-{::nomarkdown}\( n\ge0\){:/nomarkdown}), הפונקציה היוצרת שמתאימה לסדרה היא הביטוי {::nomarkdown}\( \sum_{n=0}^{\infty}a_{n}x^{n}\){:/nomarkdown}. אני בכוונה כותב "ביטוי" ולא "פונקציה", כי על הדבר הזה לא חושבים בהכרח בתור פונקציה. פונקציה פירושה שמציבים ערכים בתוך {::nomarkdown}\( x\){:/nomarkdown}, אבל אף אחד לא מבטיח לנו שאם נציב ערך בתוך {::nomarkdown}\( x\){:/nomarkdown} התוצאה שנקבל תתכנס (במובן של חשבון אינפיניטסימלי). מבחינתנו, לפחות כרגע, היצור הזה הוא ביטוי פורמלי בלבד.

טוב, זה נשמע די מטופש, חייבים להודות, אבל כדאי לזכור שבמתמטיקה גם פולינומים הם כאלו. למשל, היצור {::nomarkdown}\( x^{2}+7x\){:/nomarkdown} - אנחנו יכולים לחשוב עליו בתור פונקציה, אבל אז נאבד חלק מהמידע - מה בדיוק המקדמים של כל חזקה של {::nomarkdown}\( x\){:/nomarkdown} (ולפעמים זה אובדן של ממש; כך למשל <a href="http://www.gadial.net/?p=1231">בשדה סופי</a> עם {::nomarkdown}\( q\){:/nomarkdown} איברים הפולינום {::nomarkdown}\( x^{q}-x\){:/nomarkdown} והפולינום {::nomarkdown}\( 0\){:/nomarkdown} מגדירים בדיוק את אותה פונקציה, אבל כפולינומים הם שונים). החשיבות של פולינומים באלגברה היא אדירה - למשל, בניית שדות הרחבה מתוארת, פורמלית, כבניה של חוגי מנה של חוגי פולינומים. למעשה, יצורים מהצורה {::nomarkdown}\( \sum_{n=0}^{\infty}a_{n}x^{n}\){:/nomarkdown} הם הכללות טבעיות של פולינומים; גם על כל פולינום אפשר לחשוב כיצור מהצורה הזו, עבור סדרה שכולה אפסים החל ממקום מסויים. לביטוי {::nomarkdown}\( \sum_{n=0}^{\infty}a_{n}x^{n}\){:/nomarkdown} קוראים "טור חזקות פורמלי".

אחת הסיבות שבגללן פולינומים הם יצורים מעניינים היא שיש להם מבנה אלגברי מעניין - פעולות חיבור וכפל שהופכות אותם למה שנקרא <strong>חוג</strong> (שהוא, אה, קבוצה שעל אבריה מוגדרות פעולות חיבור וכפל; כמובן שיש כמה דרישות ספציפיות מהחיבור והכפל הללו). בפרט, כפל פולינומים הוא פעולה מעניינת מאוד, וכפל של טורי חזקות הוא הכללה טבעית שלו. אם יש לנו שני טורי חזקות, {::nomarkdown}\( a\left(x\right)=\sum_{n=0}^{\infty}a_{n}x^{n}\){:/nomarkdown} ו-{::nomarkdown}\( b\left(x\right)=\sum_{n=0}^{\infty}b_{n}x^{n}\){:/nomarkdown}, אז אפשר להגדיר חיבור וכפל שלהם כך (אני אשתמש ב-{::nomarkdown}\( c\left(x\right)=\sum_{n=0}^{\infty}c_{n}x^{n}\){:/nomarkdown} בתור תוצר הפעולה):

{::nomarkdown}\( c\left(x\right)=a\left(x\right)+b\left(x\right)\){:/nomarkdown} אם {::nomarkdown}\( c_{n}=a_{n}+b_{n}\){:/nomarkdown}; זהו חיבור טבעי "איבר איבר".

{::nomarkdown}\( c\left(x\right)=a\left(x\right)\cdot b\left(x\right)\){:/nomarkdown} אם {::nomarkdown}\( c_{n}=\sum_{i=0}^{n}a_{i}b_{n-i}\){:/nomarkdown}. זה אותו הדבר עם כמו עם כפל פולינומים; נסו להסביר לעצמכם למה זו הגדרה נכונה והגיונית. אפשר לחשוב על הכפל הזה כך - אנחנו לוקחים את שתי הסדרות וכותבים אותן זו מעל זו, "הופכים" את הסדרה של ה-{::nomarkdown}\( b_{n}\){:/nomarkdown}-ים, מזיזים אותה קצת ({::nomarkdown}\( n\){:/nomarkdown} צעדים) ואז אנחנו מקבלים שיש רק איזור חפיפה מוגבל בין שתי הסדרות. אנחנו כופלים כל איבר בזה שמתחתיו, וסוכמים את הכל. לפעולה הזו קוראים <strong>קונבולוציה</strong>, והיא מופיעה באינספור תחומים מתמטיים. כפל פולינומים וטורי חזקות תופס אותה באופן טבעי.

מה שצריך לשים לב אליו כאן הוא שלמרות ששני טורי החזקות הם אינסופיים, כל מקדם {::nomarkdown}\( c_{n}\){:/nomarkdown} נקבע באמצעות כמות סופית של איברים, כלומר {::nomarkdown}\( c\left(x\right)\){:/nomarkdown} מוגדר היטב בלי להיכנס בכלל לשאלות של התכנסות של טורים אינסופיים. זה בדיוק מה שמאפשר לנו להישאר פורמליים מבלי לגלוש לאנליזה.

בואו נעבור לדוגמה - הסדרה {::nomarkdown}\( 1,1,1,\dots\){:/nomarkdown}. האם יש משהו (אינסופי) פשוט מזה? הפונקציה היוצרת המתאימה היא {::nomarkdown}\( 1+x+x^{2}+x^{3}+\dots=\frac{1}{1-x}\){:/nomarkdown}. איך הגעתי לכך שאגף שמאל שווה ל-{::nomarkdown}\( \frac{1}{1-x}\){:/nomarkdown} אתם שואלים? אה, בקלות - סכום של טור הנדסי! אבל, אתם צועקים עכשיו, טור הנדסי אינסופי מתכנס רק כש-{::nomarkdown}\( \left\|x\right\|&lt;1\){:/nomarkdown}, ובכלל מה הולך כאן, אמרת שלא מדברים על התכנסות!

כאן אני שולף שפן מהכובע, ואני מקווה שאני מפיל אסימון כלשהו למי שמכיר פונקציות יוצרות רק בערך - את השוויון {::nomarkdown}\( \sum_{n=0}^{\infty}x^{n}=\frac{1}{1-x}\){:/nomarkdown} אפשר להוכיח באופן הכי פורמלי שאפשר באמצעות ההגדרות שכבר נתתי, <strong>ובלי להשתמש כלל באנליזה</strong>! מה שאנחנו רוצים להראות הוא ש-{::nomarkdown}\( 1=\left(1-x\right)\cdot\sum_{n=0}^{\infty}x^{n}\){:/nomarkdown}. אם נחשוב על זה קצת, על {::nomarkdown}\( 1\){:/nomarkdown} אפשר לחשוב כטור חזקות פורמלי (שמתאים לסדרה {::nomarkdown}\( 1,0,0,\dots\){:/nomarkdown}) וגם על {::nomarkdown}\( \left(1-x\right)\){:/nomarkdown} אפשר לחשוב כטור חזקות פורמלי (שמתאים לסדרה {::nomarkdown}\( 1,-1,0,0,\dots\){:/nomarkdown}) ולכן הטענה שבשוויון למעלה היא בעצם טענה פשוטה על כפל של טורי חזקות.

אם כן, הבה ונסמן {::nomarkdown}\( \sum_{n=0}^{\infty}c_{n}=\left(1-x\right)\cdot\sum_{n=0}^{\infty}x^{n}\){:/nomarkdown}. מהו {::nomarkdown}\( c_{0}\){:/nomarkdown}? על פי הגדרה, {::nomarkdown}\( c_{0}=a_{0}b_{0}=1\cdot1=1\){:/nomarkdown}. יופי, ומהו {::nomarkdown}\( c_{1}\){:/nomarkdown}? על פי הגדרה, {::nomarkdown}\( c_{1}=a_{0}b_{1}+a_{1}b_{0}=1\cdot1-1\cdot1=0\){:/nomarkdown}. ומה יהיה {::nomarkdown}\( c_{2}\){:/nomarkdown}...?

קל לראות ש-{::nomarkdown}\( c_{n}\){:/nomarkdown}, לכל {::nomarkdown}\( n\ge1\){:/nomarkdown}, יהיה אפס, כי תמיד נקבל {::nomarkdown}\( c_{n}=a_{0}b_{n}+a_{1}b_{n-1}\){:/nomarkdown} (כל שאר ה-{::nomarkdown}\( a_{i}\){:/nomarkdown}-ים מתאפסים) ומכיוון שכל ה-{::nomarkdown}\( b_{i}\){:/nomarkdown}-ים הם תמיד 1 ו-{::nomarkdown}\( a_{0}=1,a_{1}=-1\){:/nomarkdown} נקבל תמיד אפס. מכאן שקיבלנו את השוויון {::nomarkdown}\( \sum_{n=0}^{\infty}x^{n}=\frac{1}{1-x}\){:/nomarkdown} בצורה הכי פורמלית שרק אפשר (כל עוד זוכרים לחשוב על ביטוי מהצורה {::nomarkdown}\( \frac{1}{f\left(x\right)}\){:/nomarkdown} בתור "הפונקציה ההופכית של {::nomarkdown}\( f\left(x\right)\){:/nomarkdown}; זו שכשכופלים אותה ב-{::nomarkdown}\( f\left(x\right)\){:/nomarkdown} מקבלים 1"; זה תרגיל נחמד להראות שלטור חזקות כלשהו קיימת פונקציה הופכית אם ורק אם המקדם הראשון בו שונה מאפס).

מה שאנחנו לומדים מכאן הוא שלפונקציות יוצרות אפשר למצוא לעתים קרובות ביטויים שהם פשוטים בהרבה מאשר טור אינסופי; ולביטויים הללו אפשר לבצע מניפולציות אלגבריות מכאן ועד להודעה חדשה. השאלה עכשיו היא - הבטחתי שיש למניפולציות האלגבריות משמעות קומבינטורית. מה היא?

נניח ש-{::nomarkdown}\( A,B\){:/nomarkdown} הם קבוצות של אובייקטים. {::nomarkdown}\( a_{n}\){:/nomarkdown} הוא מספר האובייקטים מגודל {::nomarkdown}\( n\){:/nomarkdown} ב-{::nomarkdown}\( A\){:/nomarkdown} ו-{::nomarkdown}\( b_{n}\){:/nomarkdown} הוא מספר האובייקטים מגודל {::nomarkdown}\( n\){:/nomarkdown} ב-{::nomarkdown}\( B\){:/nomarkdown}, ו-{::nomarkdown}\( a\left(x\right),b\left(x\right)\){:/nomarkdown} הפונקציות היוצרות המתאימות. מה מתאר {::nomarkdown}\( a\left(x\right)+b\left(x\right)\){:/nomarkdown}? ובכן, את הפונקציה היוצרת של {::nomarkdown}\( A\cup B\){:/nomarkdown} (הקבוצה שמכילה את כל האיברים של {::nomarkdown}\( A\){:/nomarkdown} וגם את כל האיברים של {::nomarkdown}\( B\){:/nomarkdown}), בתנאי ש-{::nomarkdown}\( A,B\){:/nomarkdown} זרות, כלומר ללא איברים משותפים (כי אחרת איבר משותף היה מופיע רק פעם אחת ב-{::nomarkdown}\( A\cup B\){:/nomarkdown} אבל נספר פעמיים). בשביל שהסימונים יישארו פשוטים אני אסמן ב-{::nomarkdown}\( A+B\){:/nomarkdown} תמיד את האיחוד {::nomarkdown}\( A\cup B\){:/nomarkdown} תחת ההסכמה שאם יש ב-{::nomarkdown}\( A,B\){:/nomarkdown} איברים זהים, כל אחד מהם זוכה לאיזה סימון ייחודי שמבדיל אותו כך שהאיחוד הוא תמיד זר (תרגיל - איך עושים כזה תעלול פורמלית?)

ומה מתאר {::nomarkdown}\( a\left(x\right)\cdot b\left(x\right)\){:/nomarkdown}? או, עכשיו זה נהיה כיפי. הוא מתאר את {::nomarkdown}\( A\times B\){:/nomarkdown} - אוסף הזוגות של איבר מ-{::nomarkdown}\( A\){:/nomarkdown} ואיבר מ-{::nomarkdown}\( B\){:/nomarkdown}, אבל יש טוויסט כלשהו - בעצם בנינו כאן סוג חדש של אובייקטים - אובייקטים שהם זוגות, ולכן צריך להגדיר עבורם מושג חדש של "גודל". ההגדרה מתבקשת: הגודל של האיבר {::nomarkdown}\( \left(a,b\right)\){:/nomarkdown}, כש-{::nomarkdown}\( a\in A\){:/nomarkdown} ו-{::nomarkdown}\( b\in B\){:/nomarkdown} הם איברים כלשהם (ממש לא בהכרח מאותו הגודל) הוא פשוט הגודל של {::nomarkdown}\( a\){:/nomarkdown} ועוד הגודל של {::nomarkdown}\( b\){:/nomarkdown}. לא קשה לראות ש-{::nomarkdown}\( a\left(x\right)\cdot b\left(x\right)\){:/nomarkdown} אכן מתאר את הפונקציה היוצרת של {::nomarkdown}\( A\times B\){:/nomarkdown} תחת ההגדרה הזו.

אפשר כמובן לכפול קבוצה בעצמה; נסמן ב-{::nomarkdown}\( A^{n}\){:/nomarkdown} את מה שמקבלים כשכופלים את {::nomarkdown}\( A\){:/nomarkdown} בעצמה {::nomarkdown}\( n\){:/nomarkdown} פעמים (כדי לא להסתבך יותר מדי פורמלית, חשבו על כך כעל סדרה של {::nomarkdown}\( n\){:/nomarkdown} איברים מתוך {::nomarkdown}\( A\){:/nomarkdown}, והגודל של הסדרה הוא סכום הגדלים של אבריה). כמו כן לצרכי נוחות הסימון מגדירים את {::nomarkdown}\( A^{0}\){:/nomarkdown} בתור קבוצה שמכילה איבר בודד מגודל 0 שמסומן ב-{::nomarkdown}\( \varepsilon\){:/nomarkdown} - כל מטרת היצור הזה היא לפשט לנו את הסימונים אז אל תחפשו בו יותר מדי משמעות.

כעת נגדיר את הפעולה הבאה: {::nomarkdown}\( A^{*}=\bigcup_{n=0}^{\infty}A^{n}\){:/nomarkdown}. דהיינו, {::nomarkdown}\( A^{*}\){:/nomarkdown} מכילה סדרות מכל גודל סופי שהוא של איברי {::nomarkdown}\( A\){:/nomarkdown}. נניח ש-{::nomarkdown}\( a\left(x\right)\){:/nomarkdown} היא הפונקציה היוצרת של {::nomarkdown}\( A\){:/nomarkdown}; אז הפונקציה היוצרת של {::nomarkdown}\( A^{*}\){:/nomarkdown} היא - הפתעה הפתעה - {::nomarkdown}\( \frac{1}{1-a\left(x\right)}\){:/nomarkdown}. קרוב לודאי שחלקכם צועקים כרגע "הא! תפסנו אותך! מה אם {::nomarkdown}\( a\left(x\right)=1\){:/nomarkdown} ותו לא?" ואתם צודקים - הבניה {::nomarkdown}\( A^{*}\){:/nomarkdown} היא בעייתית אם {::nomarkdown}\( A\){:/nomarkdown} מכיל איבר <strong>כלשהו</strong> מגודל 0, שכן אז הדרישה שלנו שלכל {::nomarkdown}\( n\){:/nomarkdown} יהיה רק מספר סופי של איברים מגודל {::nomarkdown}\( n\){:/nomarkdown} הולכת לפח (למשל, אם {::nomarkdown}\( \alpha\){:/nomarkdown} הוא איבר ב-{::nomarkdown}\( A\){:/nomarkdown} מגודל 0, ו-{::nomarkdown}\( \gamma\){:/nomarkdown} הוא איבר מגודל {::nomarkdown}\( n\){:/nomarkdown}, אז אינסוף איברים ב-{::nomarkdown}\( A^{*}\){:/nomarkdown} שכולם מגודל {::nomarkdown}\( n\){:/nomarkdown} הם כל האיברים מהצורה {::nomarkdown}\( \left(\gamma,\alpha,\alpha,\dots\alpha\right)\){:/nomarkdown}), לכן עבור קבוצות {::nomarkdown}\( A\){:/nomarkdown} שכאלו ממילא אין משמעות קומבינטורית סבירה ל-{::nomarkdown}\( A^{*}\){:/nomarkdown}; אבל לכל קבוצה אחרת {::nomarkdown}\( \frac{1}{1-a\left(x\right)}\){:/nomarkdown} מוגדר היטב. למה זה מה שיוצא? ובכן, מכללי החיבור והכפל שכבר הראיתי ברור שהפונקציה היוצרת של {::nomarkdown}\( A^{*}\){:/nomarkdown} היא {::nomarkdown}\( 1+a\left(x\right)+a^{2}\left(x\right)+\dots=\frac{1}{1-a\left(x\right)}\){:/nomarkdown}.

טוב, אז סוף סוף השלמנו את הצגת הכלים הבסיסיים שלנו (אם כי אלו בשום פנים ואופן לא כל הכלים האלגבריים שמשתתפים במשחק; רק הפשוטים ביותר מביניהם). בואו נעבור לראות כמה דוגמאות לאופן "מובנה" שבו מוצאים פונקציות יוצרות לבעיות שונות ומשונות. נתחיל ממשהו שהוא פשוט ממילא - סדרות בינאריות. סדרה בינארית היא פשוט סדרה של אפסים ואחדים כשה"גודל" שלה נמדד באורך הסדרה; מה הפונקציה היוצרת של מחלקת הסדרות הבינאריות?

נגדיר {::nomarkdown}\( A=\left\{ 0,1\right\} \){:/nomarkdown} כשהגודל של 0,1 הוא 1. מיידי לראות ש-{::nomarkdown}\( A^{*}\){:/nomarkdown} היא בדיוק המחלקה שאנחנו מעוניינים בה ({::nomarkdown}\( \varepsilon\){:/nomarkdown} מתפרש כאן כסדרה חסרת איברים). מה הפונקציה היוצרת של {::nomarkdown}\( A\){:/nomarkdown}? פשוט מאוד, {::nomarkdown}\( a\left(x\right)=2x\){:/nomarkdown} (שני איברים מגודל 1 ותו לא). מכאן שהפונקציה היוצרת שאנחנו רוצים היא {::nomarkdown}\( \frac{1}{1-2x}\){:/nomarkdown}, סוף הסיפור. זו גם פונקציה יוצרת שקל לפתח חזרה לטור חזקות כדי לקבל נוסחה מפורשת למקדמים: {::nomarkdown}\( \sum\left(2x\right)^{n}=\sum2^{n}x^{n}\){:/nomarkdown}, כלומר יש {::nomarkdown}\( 2^{n}\){:/nomarkdown} סדרות בינאריות מאורך {::nomarkdown}\( n\){:/nomarkdown}. כמובן, זה דבר שקל לדעת גם בשיטות קומבינטוריות אחרות, אבל קיבלנו את זה כאן בדרך חדשה ושונה לגמרי - בעצם, דרך שהיא חפה כמעט לחלוטין מטיעונים קומבינטוריים (טיעונים שמוחבאים אי שם בהוכחה של ההתאמה בין פעולות אלגבריות על פונקציות יוצרות ופעולות קומבינטוריות על המחלקות המתאימות).

בואו נעבור עכשיו לדוגמה הרבה יותר מופרעת שתבהיר קצת יותר טוב על מה אני מדבר כשאני מדבר על "מניפולציות" - עצים. עץ הוא גרף שמורכב מצומת "שורש" שאליו מחוברים אפס או יותר בנים שהם גם כן עצים. אני רוצה לספור עצים שבהם הסדר הפנימי בין הבנים משנה - כלומר, עץ שמורכב משורש שלבנו השמאלי יש בן יחיד ולבנו הימני יש שני בנים יהיה שונה מעץ שבו לבן השמאלי יש שני בנים ולימני יש בן אחד.

תחת ההגדרה הזו צץ תיאור פשוט מאוד של עצים באופן רקורסיבי - "עץ" הוא זוג שכולל צומת יחיד וסדרה של אפס או יותר עצים (הצומת הוא האיבר הראשון בזוג והסדרה היא האיבר השני). אם נסמן ב-{::nomarkdown}\( G\){:/nomarkdown} את מחלקת העצים וב-{::nomarkdown}\( A\){:/nomarkdown} קבוצה שיש בה איבר בודד מגודל 1 ({::nomarkdown}\( A=\left\{ \bullet\right\} \){:/nomarkdown} - חשבו על {::nomarkdown}\( \bullet\){:/nomarkdown} בתור צומת), אז קיבלנו את המשוואה הבאה שמגדירה את {::nomarkdown}\( G\){:/nomarkdown}:

{::nomarkdown}\( G=A\times G^{*}\){:/nomarkdown}

המשוואה הזו היא בסך הכל תיאור פורמלי של התיאור המילולי שנתתי למעלה (זוג שכולל את הצומת הבודד של {::nomarkdown}\( A\){:/nomarkdown} ואז סדרה של עצים - {::nomarkdown}\( G^{*}\){:/nomarkdown} היא בדיוק זה). כעת, אם {::nomarkdown}\( g\left(x\right)\){:/nomarkdown} היא הפונקציה היוצרת של {::nomarkdown}\( G\){:/nomarkdown} ו-{::nomarkdown}\( a\left(x\right)=x\){:/nomarkdown} היא הפונקציה היוצרת של {::nomarkdown}\( A\){:/nomarkdown}, נקבל מייד ש-{::nomarkdown}\( g=\frac{x}{1-g}\){:/nomarkdown}. זה מוביל למשוואה {::nomarkdown}\( g-g^{2}=x\){:/nomarkdown}, או בניסוח טיפה שונה {::nomarkdown}\( g^{2}-g+x=0\){:/nomarkdown}, ועל ידי נוסחת השורשים הרגילה נקבל {::nomarkdown}\( g=\frac{1-\sqrt{1-4x}}{2}\){:/nomarkdown}.

כמובן שעולות מיד שתי שאלות. ראשית, נוסחת השורשים נותנת שני פתרונות; למה {::nomarkdown}\( \frac{1+\sqrt{1-4x}}{2}\){:/nomarkdown} אינו הפתרון ה"נכון"? ושנית, מה זה בכלל {::nomarkdown}\( \sqrt{1-4x}\){:/nomarkdown} בהקשר ה"פורמלי" שלנו? ובכן, זהו טור חזקות שכאשר כופלים אותו בעצמו מקבלים את {::nomarkdown}\( 1-4x\){:/nomarkdown}. האם הוא בהכרח קיים? כאן נחלצת לעזרתנו תוצאה מוכרת - ההכללה של הבינום של ניוטון לחזקות לא שלמות:

{::nomarkdown}\( \left(1+y\right)^{\alpha}=1+\alpha y+\frac{\alpha\left(\alpha-1\right)}{2!}y^{2}+\dots\){:/nomarkdown}. האופן שבו מוכיחים את הנוסחה הזו הוא באמצעות אנליזה - מפתחים את הפונקציה {::nomarkdown}\( \left(1+y\right)^{\alpha}\){:/nomarkdown} לטור חזקות. אנחנו עובדים בעולם פורמלי ולא יכולים להשתמש בנימוקים הללו אבל זה לא מונע מהבינום של ניוטון להצביע על האופן שבו {::nomarkdown}\( \sqrt{1+y}\){:/nomarkdown} <strong>חייב</strong> להיראות, אם יש לו משמעות כטור חזקות: הוא חייב להיות {::nomarkdown}\( 1+\frac{1}{2}y-\frac{1}{8}y^{2}+\frac{1}{16}y^{3}-\frac{5}{128}y^{4}+\dots\){:/nomarkdown} (יש גם צורה כללית סגורה לביטוי: {::nomarkdown}\( \sqrt{1+y}=\sum_{n=0}^{\infty}\frac{\left(-1\right)^{n}\left(2n\right)!}{\left(1-2n\right)\left(n!\right)^{2}4^{n}}y^{n}\){:/nomarkdown} - לא הכי יפה, חייבים להודות). אם טורחים לשבת ולכפול את טור החזקות הזה בעצמו, פורמלית, מקבלים את {::nomarkdown}\( 1+y\){:/nomarkdown}, כך שגם מבחינה פורמלית לחלוטין אין לנו בעיות עם שורשים פשוטים.

כעת, אם מציבים במקום {::nomarkdown}\( y\){:/nomarkdown} את {::nomarkdown}\( -4x\){:/nomarkdown} מקבלים {::nomarkdown}\( 1-2x-2x^{2}-4x^{3}-10x^{4}+\dots\){:/nomarkdown}. אם לזה היינו מוסיפים 1 ומחלקים ב-2, היינו מקבלים תוצאה לא קומבינטורית בעליל - טור חזקות שיש לו מקדמים שליליים, כך שהפתרון {::nomarkdown}\( \frac{1+\sqrt{1-4x}}{2}\){:/nomarkdown} אינו יכול להיות הפתרון המתאים לבעיה שלנו; הפתרון חייב להיות {::nomarkdown}\( \frac{1-\sqrt{1-4x}}{2}\){:/nomarkdown}, שנותן לנו את הסדרה {::nomarkdown}\( x+x^{2}+2x^{3}+5x^{4}+\dots\){:/nomarkdown}. אם נאזור אומץ ונציב {::nomarkdown}\( y=-4x\){:/nomarkdown} בנוסחה הכללית שתיארתי למעלה ונבצע את כל הפישוטים, נקבל שהפונקציה היוצרת היא {::nomarkdown}\( \sum_{n=1}^{\infty}\frac{\left(2n\right)!}{2\left(2n-1\right)\left(n!\right)^{2}}x^{n}\){:/nomarkdown}. אפילו את זה אפשר לפשט עוד טיפה אם שמים לב לכך ש-

{::nomarkdown}\( \frac{\left(2n\right)!}{2\left(2n-1\right)\left(n!\right)^{2}}=\frac{\left(2n\right)\cdot\left(2n-1\right)\cdot\left(2n-2\right)!}{2\left(2n-1\right)n^{2}\left(\left(n-1\right)!\right)^{2}}=\frac{1}{n}{2n-2 \choose n-1}\){:/nomarkdown}

כלומר, בסופו של דבר {::nomarkdown}\( g\left(x\right)=\sum_{n=1}^{\infty}\frac{1}{n}{2n-2 \choose n-1}x^{n}\){:/nomarkdown}. שימו לב לטכניקות הלא קומבינטוריות בעליל שהשתמשנו בהן כאן; הקומבינטוריקה נגמרה באבחנה הפשוטה (והיפה) לפיה {::nomarkdown}\( G=A\times G^{*}\){:/nomarkdown}; מכאן זה היה תהליך אלגברי/אנליטי סטנדרטי לגמרי - קצת מלוכלך כשעושים אותו ביד בפעם הראשונה, אבל לא משהו רציני למי שכבר משופשף בעניינים הללו ובוודאי שלא בעיה למערכת אלגברה ממוחשבת שתפקידה להתמודד עם משוואות כאלו. בסופו של דבר הגענו אפילו לנוסחה סגורה: מספר העצים הוא {::nomarkdown}\( \frac{1}{n}{2n-2 \choose n-1}\){:/nomarkdown}. עכשיו כבר אפשר לגלות את הסוד: המספרים {::nomarkdown}\( C_{n}=\frac{1}{n+1}{2n \choose n}\){:/nomarkdown} מוכרים מאוד בקומבינטוריקה ונקראים "מספרי קטלן"; מה שהוכחנו פה הוא שמספר העצים על {::nomarkdown}\( n\){:/nomarkdown} קודקודים הוא בדיוק מספר קטלן ה-{::nomarkdown}\( n-1\){:/nomarkdown} (למי שמכיר את מספרי קטלן אולי נופל פתאום אסימון; מספרי קטלן ניתנים להגדרה באמצעות נוסחת נסיגה שגם היא משתמשת בקונבולוציה).

אם כן, זה מה שאנחנו מסוגלים להפיק כשאנו חמושים רק בכלים הפשוטים ביותר; בפוסט הבא אני אתן עוד דוגמאות שמתבססות על מניפולציות מתוחכמות עוד יותר.
