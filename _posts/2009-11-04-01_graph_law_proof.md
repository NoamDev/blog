---
id: 217
title: 'כלל ה-0-1 של גרפים - ההוכחה'
date: 2009-11-04T12:55:41+00:00
author: gadial
layout: post
guid: http://gadial.blogli.co.il/archives/235
permalink: /2009/11/04/01_graph_law_proof/
categories:
  - לוגיקה
  - קומבינטוריקה
tags:
  - גרפים
  - הוכחות
  - השיטה ההסתברותית
  - לוגיקה
  - משפטי אי השלמות של גדל
---
[בפעם הקודמת](http://www.gadial.net/?p=216) ניסחתי את כלל ה-0-1, ולכן עכשיו אגש להוכחה שלו בלי שהיות. הרעיון הבסיסי בהוכחה הוא פשוט מאוד, אבל גם מקסים: הבה ונתבונן בתורה $latex T$, שהפסוקים שלה הם בדיוק אותם פסוקים שמתארים תכונות $latex \mathcal{P}$ עם הסתברות 1. למשל, הפסוק $latex \exists v\_{1},v\_{2},v\_{3}\left(E\left(v\_{1},v\_{2}\right)\wedge E\left(v\_{2},v\_{3}\right)\wedge E\left(v\_{3},v_{1}\right)\right)$ שמתאר את "בגרף קיים משולש" שראינו בפוסט הקודם נמצא בתורה זו. את ההוכחה כעת ניתן לסכם, למי שבקיא במושגים, בתור "התורה הזו עקבית ושלמה, ולכן כל תכונה שניתן לנסח בשפה או נובעת ממנה ואז הסתברותה 1, או ששלילתה נובעת ממנה ואז הסתברותה 0". כעת ניגש לפרטים ובראש ובראשונה למה שאני מתכוון אליו ב"תורה שלמה".

[לפני מספר פוסטים](http://www.gadial.net/?p=192) דיברתי על שני מושגים שונים - "שלמות סמנטית" ו"שלמות סינטקטית". המושג של "שלמות סמנטית" התייחס לשלמות של מערכת ההוכחה שלנו, שבאופן אינטואיטיבי ניתן לנסח כ"כל מה שנכון - ניתן להוכחה". זו לא השלמות שאני מדבר עליה כאן - בפרט, מדובר בשלמות של מערכת הוכחה וכאן אני מדבר על שלמות של תורה. אם כן, אני מתכוון למה שכיניתי אז "שלמות סינטקטית"; תורה $latex T$ היא שלמה סינטקטית אם כל פסוק $latex \varphi$ ניתן להוכחה ממנה, או ששלילתו $latex \neg\varphi$ ניתנת להוכחה ממנה. גם כאן אני משתמש במושג ה"הוכחה" אך אין לי בו צורך של ממש; מכיוון שמערכת ההוכחה שלנו היא שלמה (סמנטית) ונאותה אז "אפשר להוכיח את $latex \varphi$ מ-$latex T$" שקול ל"$latex T$ גוררת לוגית את $latex \varphi$" שהגדרתי בפוסט הקודם ופירושו היה "כל מודל של $latex T$ הוא גם מודל של $latex \varphi$" (סימנתי זאת $latex T\vdash\varphi$ - וכזכור, זה לא הסימן המקובל ואני משתמש בו כי את הסימן הנכון יותר אני לא מצליח להציג כאן).

אם כן, סיכום: אם $latex T$ היא עקבית ושלמה, אז אפשר להראות כי נובע מכך ש**כל** פסוק $latex \varphi$ שייך לה, או ש-$latex \neg\varphi$ שייך לה. זה מסיים את העניין מייד, כי אז לכל תכונה של גרף - שכזכור, מוגדרת באמצעות פסוק $latex \varphi$ - או ש-$latex \varphi\in T$ ואז הסתברות התכונה היא 1, או ש-$latex \neg\varphi\in T$ ואז ההסתברות שהתכונה לא מתקיימת היא 1, כלומר הסתברות התכונה היא 0. שימו לב לקשר היפה שיש כאן בין לוגיקה וקומבינטוריקה - כדי להוכיח את טענת ה-0-1 הקומבינטורית, הכל מצטצמם בסופו של דבר להוכחה שתורה מסויימת היא שלמה. זו גם דוגמה נאה לתורה "מעניינת" שאינה נופלת קורבן ל[משפט אי השלמות של גדל](http://www.gadial.net/?p=192); הסיבה לכך שהיא חומקת ממנו היא שלא מדובר בתורה אריתמטית, כלומר היא אינה ממדלת את המספרים הטבעיים עם פעולת החיבור והכפל. זו כמובן לא התורה המעניינת היחידה שעושה זאת, אך עוד דוגמה לאוסף כדי להשתיק את מי שאומר "משפט גדל מראה שכל תורה מתמטית איננה שלמה" היא תמיד דבר טוב.

ראשית אני רוצה לטפל בשאלה מדוע אם $latex T$ עקבית ושלמה נובע מכך שכל פסוק נמצא בה או ששלילתו נמצאת בה. לשם כך מספיק להראות שהתורה היא "סגורה" במובן זה שאם $latex T\vdash\varphi$, אז $latex \varphi\in T$. הנה נימוק פשוט לכך: אם $latex T\vdash\varphi$ נובע מכך שקיימת קבוצה סופית של פסוקים $latex \psi\_{1},\dots,\psi\_{n}\in T$ כך ש-$latex \left\{ \psi\_{1},\dots,\psi\_{n}\right\} \vdash\varphi$ (למה? ההוכחה שאני חושב עליה היא "אם $latex T\vdash\varphi$ אז קיימת הוכחה ל-$latex \varphi$ עם אקסיומות מ-$latex T$. מכיוון שזו הוכחה סופית, יש בה רק מספר סופי של אקסיומות $latex \psi\_{1},\dots,\psi\_{n}$, ומכיוון שהן מוכיחות את $latex \varphi$ הן גם גוררות אותו לוגית" - אבל אני בטוח שיש עוד הוכחות). כלומר, כל מודל של הפסוק $latex \psi\_{1}\wedge\dots\wedge\psi\_{n}$ הוא גם מודל של $latex \varphi$, ולכן ההסתברות ש-$latex \varphi$ יתקיים גדולה לפחות כמו ההסתברות ש-$latex \psi\_{1}\wedge\dots\wedge\psi\_{n}$ יתקיים (כי כל גרף שנגריל ויקיים את התכונה $latex \psi\_{1}\wedge\dots\wedge\psi\_{n}$ יקיים גם את התכונה $latex \varphi$). לא קשה להראות שההסתברות ש-$latex \psi\_{1}\wedge\dots\wedge\psi\_{n}$ יתקיים היא 1, כי ההסתברות של כל $latex \psi_{i}$ היא 1 (נסו להוכיח זאת - זה תרגיל קצר ונחמד).

כעת לשאלה העיקרית - מדוע $latex T$ שלמה? התשובה הקצרה היא שקיים לה מודל בן מניה יחיד. כאן אנחנו מתפצלים לשתי שאלות - ראשית, איך קיום מודל בן מניה יחיד מבטיח שתורה היא שלמה (וזה מקרה פרטי של תוצאה סטנדרטית בלוגיקה) ושנית, איך מראים של-$latex T$ יש מודל בן מניה יחיד ומהו המודל הזה בכלל (זו עיקר העבודה ועיקר היופי).

ובכן, [מה שמראה](http://en.wikipedia.org/wiki/Categorical_theory) ש-$latex T$ שלמה הוא מבחן Los-Vaught. לצורך כך, הגדרה: תורה נקראת $latex \kappa$-קטגורית אם כל שני מודלים שלה שהן מעוצמה $latex \kappa$ הם איזומורפיים. מי שאינו מכיר עוצמות ("גודל אינסופי") או מבין את הכוונה המדוייקת ב"איזומורפיים" ("הם אותו דבר פרט אולי לשינוי הסימונים") - לא נורא. מה שהמבחן אומר הוא שאם תורה היא $latex \kappa$-קטגורית, לא משנה עבור איזה $latex \kappa$, ואין לה מודלים סופיים - אז היא שלמה. ההוכחה לטענה הזו מתבססת על משפט לוונהיים-סקולם, שכבר הזכרתי פעם, שמראה שאם לתורה (מסדר ראשון, כאן זה חשוב) יש מודל אינסופי, אז יש לה מודל אינסופי מכל עוצמה אינסופית (כלומר, שפות מסדר ראשון לא מסוגלות "להבדיל" בין עוצמות שונות של מודלים אינסופיים).

כעתת נניח כי $latex T$ אינה שלמה. אז יש פסוק $latex \varphi$ שאינו נובע ממנה, וגם $latex \neg\varphi$ אינו נובע ממנה. אז אפשר לבנות שתי תורות חדשות, $latex T\_{1}=T\cup\left\{ \varphi\right\} $ ו-$latex T\_{2}=T\cup\left\{ \neg\varphi\right\} $ שיהיו שתיהן עקביות (אם אחת מהן לא הייתה עקבית, פירוש הדבר היה ש-$latex \varphi$ או $latex \neg\varphi$ נובע מ-$latex T$). לכן יש לשתיהן מודל אינסופי (כי אין ל-$latex T$ מודלים סופיים, וכל מודל של $latex T\_{1}$ושל $latex T\_{2}$ הוא גם מודל של $latex T$) ועל פי לוונהיים סקולם, לשתיהן יש מודל מעוצמה $latex \kappa$; אבל אמרנו ש-$latex T$ היא $latex \kappa$-קטגורית, ולכן שני המודלים הללו (שהם, כאמור, מודלים גם של $latex T$) הם איזומורפיים. זה בלתי אפשרי שכן הם שונים מהותית - באחד $latex \varphi$ מתקיים, ובשני $latex \neg\varphi$ מתקיים. סתירה.

אם כן, סיימנו את המבוא הלוגי הכללי, ואפשר סוף סוף לגשת ל"בשר" של ההוכחה - האופן שבו מראים שיש ל-$latex T$ מודל בן מניה יחיד, ואין לה מודלים סופיים. בתור התחלה כדאי לעצור ולחשוב לרגע - מה זה בכלל אומר, "מודל ל-$latex T$"? הרי $latex T$ מלכתחילה היא אוסף של פסוקים, שכל אחד בנפרד אמור להגדיר לנו גרפים; אם $latex \varphi\in T$ אז המודלים של $latex \varphi$ שהיו לנו בראש מלכתחילה היו של גרפים - וגרפים סופיים. אם כך, איך פתאום נכנסים מודלים אינסופיים לתמונה?

ובכן, די בבירור ל-$latex T$ פשוט לא יכול להיות מודל סופי. זאת מכיוון שהתכונה "בגרף יש לפחות $latex n$ צמתים" ניתנת לתיאור בלוגיקה מסדר ראשון, ובוודאי שיש לה הסתברות 1 (כזכור, ההסתברות נלקחת על גרף "אקראי" כשמספר הצמתים שואף לאינסוף). הפסוק $latex \varphi\_{n}$ המתאים הוא פשוט $latex \exists v\_{1},\dots,v\_{n}\left(\bigwedge\_{i\ne j}v\_{i}\ne v\_{j}\right)$. אם ל-$latex T$ היה מודל סופי, עם נניח $latex n$ איברים, הוא לא היה יכול לספק את $latex \varphi_{n+1}\in T$ - סתירה. אז ל-$latex T$ אין מודל סופי. לכן היצורים היחידים שכן מספקים את כל הפסוקים שב-$latex \varphi$ בו זמנית הם גרפים אינסופיים. אין קושי רעיוני במושג כזה - אנחנו פשוט לא מגבילים את קבוצת הצמתים להיות סופית, וגרפים אינסופיים הם יצורים מאוד נפוצים במתמטיקה. עם זאת, המעורבות שלהם כאן היא עדיין מעניינת - אנחנו מראים שקיים גרף בן מניה יחיד שמקיים בו זמנית את כל התכונות שמתקיימות "כמעט בכל הגרפים הסופיים", וזה מראה לנו את נכונות כלל ה-0-1.

כדי לראות שהמודל בן המניה הוא יחיד, אנחנו רוצים לפשפש בתוך $latex T$ ולשלוף ממנה תכונות מאפיינות שהן מאוד חזקות, עד שהן מגבילות בצורה קיצונית את המודלים האינסופיים שיכולים להיות ל-$latex T$. כאן אפשר לעשות אחד משניים - או להציג את התכונות הללו מייד ואז לראות שהן מסייעות, או לחכות טיפה עם החיפוש, לנסות ולהתחיל את ההוכחה שכל שני מודלים בני מנייה של $latex T$ הם איזומורפיים, ולראות מה אנחנו צריכים. אני מעדיף לפעול בדרך השניה, שהיא יותר "מחקרית" ואולי גם מקלה קצת על העיכול של מה שיקרה בהמשך.

איך מוכיחים ששני מודלים הם איזומורפיים? לצורך הפשטות מספיק לדבר על שני גרפים אינסופיים (בני מניה) $latex A,B$ ולא להיכנס לתורה הכללית. מה שצריך להראות הוא פשוט התאמה של אחד-לאחד בין הצמתים של $latex A$ והצמתים של $latex B$ שמשמרים את הקשתות. כלומר, אם $latex V\_{A}=\left\{ a\_{1},a\_{2},a\_{3},\dots\right\} $ הם צמתי $latex A$ ואילו $latex V\_{B}=\left\{ b\_{1},b\_{2},b\_{3},\dots\right\} $ הם צמתי $latex B$ אנחנו רוצים למצוא פונקציה $latex f:V\_{A}\to V\_{B}$ שהיא חד חד ערכית ועל, ומקיימת ש-$latex \left(a\_{i},a\_{j}\right)\in E\_{A}$ אם ורק אם $latex \left(f\left(a\_{i}\right),f\left(a\_{j}\right)\right)\in E\_{B}$.

מה שנעשה הוא לשחק משחק באופן הבא. ראשית, נתאים את $latex a\_{1}$ ל-$latex b\_{1}$, פשוט כי לעת עתה אין שום מהלך נבון יותר שניתן לעשות. כעת, למי נתאים את $latex a\_{2}$? זה כבר נהיה מורכב מעט יותר - אם $latex a\_{1}$ מחובר ל-$latex a\_{2}$, נרצה לבחור $latex b\_{i}\in V\_{B}$ שמחובר ל-$latex b\_{1}$. מה מבטיח לנו שקיים כזה? ובכן, אם לא היה קיים כזה, אז $latex B$ לא היה מודל טוב עבור התכונה "לכל צומת יש לפחות שכן אחד", שלא קשה לראות שניתן לנסח בשפה מסדר ראשון ושיש לו הסתברות 1 (בגרף עם $latex n+1$ צמתים, לכל צומת יש $latex n$ שכנים פוטנציאליים, ולכן ההסתברות שלא יהיה לו אף שכן היא $latex \frac{1}{2^{n}}$ - שואפת לאפס).

בואו נעבור לדבר על משהו כללי יותר. נניח שעד כה טיפלתי בכל הצמתים $latex a\_{1},a\_{2},\dots,a\_{n}$ ועכשיו אני תוהה לאן להעביר את $latex a\_{n+1}$. בואו נניח לצורך נוחות ש-$latex a\_{1}$ עבר ל-$latex b\_{1}$, ש-$latex a\_{2}$ עבר ל-$latex b\_{2}$ וכן הלאה (אם לא, פשוט נשנה את המספור של הצמתים של $latex B$). עכשיו, הצומת החדש $latex a\_{n+1}$ הולך להיות מחובר לחלק מהצמתים הקיימים, ולחלק מהם - לא. נסמן ב-$latex S\_{A}$ את קבוצת הצמתים שאליהם $latex a\_{n+1}$ מחובר, וב-$latex S\_{B}$ את קבוצת ה"תמונות" שלהם (ה-$latex b\_{i}$-ים שמחוברים לאיברים של $latex S\_{A}$). מה שאנחנו רוצים לעשות הוא למצוא צומת כלשהו ב-$latex V\_{B}$ שמחובר לכל הצמתים ב-$latex S\_{B}$, ולא מחובר לאף צומת מבין $latex b\_{1},\dots,b\_{n}$ שאיננו ב-$latex S\_{B}$. האם קיים צומת שכזה? אנחנו חייבים שהתשובה תהיה חיובית כדי שהשיטה תצליח; וזה מוביל אותנו לניסוח התכונות שב-$latex T$ שיעניינו אותנו, שהן בדיוק התכונות שאומרות "כן! בכל תרחיש דוגמת זה שתיארת למעלה, אפשר למצוא צומת $latex b\_{n+1}$ מתאים". מה שצריך להראות הוא שהתכונות הללו ניתנות לניסוח בשפה מסדר ראשון שלנו, ושההסתברות לכך שהן יתקיימו בגרף היא 1. ברגע שהראנו זאת, סיימנו; כי אז התהליך שתיארתי לעיל, אחרי שמכלילים אותו עוד טיפה, מגדיר באופן מושלם את האיזומורפיזם (אם רוצים לדעת לאן $latex a\_{n}$ עבר, "מריצים" את התהליך במשך $latex n$ צעדים ורואים מה קורה; כדי להבטיח שגם כל ה-$latex b\_n$-ים יותאמו לאחד מה-$latex a_n$-ים צריך לבחור גם עבורם איברים, לסירוגין).

הבה ננסח במפורש את התכונות שאנחנו רוצים. נסמן ב-$latex \mbox{EA}_{n,m}$ את התכונה "לכל קבוצה $latex X$ מגודל $latex n$ ותת קבוצה $latex Y$ מגודל $latex m$ שלה, קיים איבר שאינו ב-$latex X$ שמחובר לכל אברי $latex Y$ ואינו מחובר לאף איבר ב-$latex X$ שאינו ב-$latex Y$" (למה $latex \mbox{EA}$? מלשון Extension Axiom, שכן זוהי אקסיומה שאומרת שניתן "להרחיב" את הקבוצה $latex X$ באופן שמעניין אותנו - דהיינו, חיבור בדיוק לצמתי $latex Y$). את התכונה הזו אפשר לכתוב בקלות יחסית בשפה מסדר ראשון:

$latex \forall v\_{1},\dots,v\_{n}$  
$latex \left[\left(\bigwedge\_{i\ne j}v\_{i}\ne v\_{j}\right)\to\exists u\left(\bigwedge\_{i}^{n}u\ne v\_{i}\wedge\bigwedge\_{i\le m}E\left(u,v\_{i}\right)\wedge\bigwedge\_{i>m}^{n}\neg E\left(u,v_{i}\right)\right)\right]$

אז נשאר רק להראות שכל תכונה כזו מתקיימת בהסתברות 1 בכל גרף. האינטואיציה ברורה - $latex n,m$ הם קבועים, ואנחנו שואלים את עצמנו מה קורה בגרפים אקראיים שגודלם שואף לאינסוף. אם נקבע את $latex X,Y$, בגרפים כאלו יש כמעט "אינסוף" צמתים $latex u$ פוטנציאליים להתאים ל-$latex X,Y$, ולכן צומת שכזה אכן יופיע. כך זה בתורת הגרפים (ובמקומות רבים אחרים&#8230;) - ברגע שהמבנה שלך גדול מספיק, כל מה שתוכל להעלות על דעתך יווצר בתוכו, כל עוד מה שמעניין אותך הוא תכונה **מקומית**.

כדי להקל על החישוב נפשט קצת עניינים. אין צורך לדבר על $latex \mbox{EA}\_{n,m}$ עבור $latex n,m$ כלליים - שימו לב שאם $latex \mbox{EA}\_{2m,m}$ מתקיים בהסתברות 1, אז בוודאי גם $latex \mbox{EA}\_{n,m}$ מתקיים בהסתברות 1 עבור $latex m\le n\le2m$, כי אנחנו מקלים קצת על הדרישות - הקבוצה $latex Y$ נותרת זהה, ואנחנו פשוט דורשים פחות דרישות על שאר האיברים ב-$latex X$ (כלומר, מעיפים לכל הרוחות את חלקם). לכן די להוכיח כי $latex \mbox{EA}\_{2m,m}$ מתקיים בהסתברות 1. נקבע את מספר הצמתים בגרף כולו להיות $latex n$ (כי השתמשנו ב-$latex n$ עד כה למטרה זו וחבל להפסיק - רק צריך לזכור שזה לא אותו $latex n$ שהופיע ב-$latex \mbox{EA}_{n,m}$).

מכאן זו באמת קומבינטוריקה פשוטה וקצת אינפי. ניקח צומת שאיננו ב-$latex X$. מה ההסתברות שהוא מחובר לכל $latex m$ צמתי $latex Y$, ואינו מחובר לכל הצמתים של $latex X$ שאינם ב-$latex Y$? בדיוק $latex \frac{1}{2^{2m}}$, כי יש $latex 2m$ הגרלות של קשתות שבכל אחת אנחנו צריכים שתתקבל תוצאה ספציפית. אם כן, ההסתברות שצומת כלשהו **לא** יקיים את התכונה הרצויה היא $latex 1-\frac{1}{2^{2m}}$. על פניו הסתברות גדולה - אבל כאמור, יש **המון** צמתים שונים. כמה המון? $latex n-2m$ צמתים שבגרף אך אינם ב-$latex X$. ההסתברות ש**אף אחד** מהם לא יהיה בסדר היא מכפלת ההסתברויות של כל אחד להיות לא בסדר, כלומר $latex \left(1-\frac{1}{2^{2m}}\right)^{n}$. זה בפני עצמו שואף לאפס כשמשאיפים את $latex n$ לאינסוף, אבל צריך לשים לב שלא סיימנו - אנחנו לא טוענים טענה על קבוצה $latex X$ ספיצפית, אלא על **כל** קבוצה $latex X$ מגודל $latex 2m$ וכל תת קבוצה $latex Y$ שלה מגודל $latex m$. אז ההסתברות שמשהו ישתבש הוא שתהיה קבוצה $latex X$ כלשהי ותת קבוצה $latex Y$ שלה שעבורן האירוע ה"רע" שהסתברותו $latex \left(1-\frac{1}{2^{2m}}\right)^{n}$ מתרחש. ההסתברות לכל זה חסומה על ידי מספר תת הקבוצות הללו כפול $latex \left(1-\frac{1}{2^{2m}}\right)^{n}$ (בהינתן קבוצת מאורעות, ההסתברות שאחד מהם יתרחש חסומה על ידי סכום ההסתברויות שלהם - זה מה שנקרא Union bound).

אז הסתברות הכישלון שלנו חסומה על ידי $latex {n \choose 2m}{2m \choose m}\left(1-\frac{1}{2^{2m}}\right)^{n}$. את כל זה אפשר לחסום על ידי $latex n^{2m}\cdot c^{n}$ כש-$latex c$ הוא קבוע קטן מ-1. המסקנה ברורה - פולינום כמו $latex n^{2m}$ גדל הרבה יותר לאט מאשר פונקציה אקספוננציאלית כמו $latex c^{n}$ גדלה, ומכיוון ש-$latex c<1$, $latex c^{n}$ שואף לאפס, ולכן $latex n^{2m}\cdot c^{n}$ כולו שואף לאפס כש-$latex n$ שואף לאינסוף, כלומר ההסתברות ש"משהו יתקלקל" שואפת לאפס, ולכן ההסתברות שהתכונה תתקיים שואפת ל-1. זהו.

אם כן, החלק האחרון של ההוכחה היה כולו קומבינטוריקה, מה שמראה שהמשפט הזה הוא שילוב מקסים של רעיונות משני התחומים גם יחד. אני מקווה שנהניתם.