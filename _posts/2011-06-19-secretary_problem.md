---
id: 3567
title: "בעיית המזכירה, ואיך זה קשור למספרים הרמוניים"
date: 2011-06-19 19:50:27
layout: post
categories: 
  - כללי
---
נניח שאתם מנהלים זוטרים באיזו חברה ואתם מחליטים יום אחד להיות יעילים ומועילים ויורדים מטה למחלקת כוח אדם. היום בוחרים לכם מזכירה חדשה (או מזכיר חדש, למה לא? אבל אשתמש בלשון נקבה ועם מי שנפגעים מזה הסליחה), ובהתקף של יעילות ארגונית מצאתם באינטרנט את "הכללים הנכונים לבחירת מזכירה" ושלחתם לכוח אדם. הכללים הם:
<ol>
 	<li>יש לראיין את המועמדות אחת אחרי השניה, כאשר בסוף כל ראיון מחליטים אם להעסיק את המזכירה שרואיינה ולהעיף את כל אלו שעדיין לא רואיינו לכל הרוחות, או להעיף אותה לכל הרוחות.</li>
 	<li>כל מזכירה צריך לדרג ביחס למזכירות הקודמות (לכל מזכירה קודמת יש לקבוע אם הנוכחית טובה יותר או גרועה יותר) ועל בסיס זה להחליט אם להעסיק אותה או לא.</li>
 	<li>קוראים למזכירות לראיון בסדר אקראי.</li>
 	<li>חייבים לבחור את המזכירה הטובה ביותר!</li>
</ol>
על 4 אין פשרות!

טוב, גם על היתר לא. ניסו להעיר לכם שהכללים הללו לא כל כך הגיוניים (בפרט, מה הרעיון להחליט על המקום אם לבחור את המועמדת או לא? למה לא לחכות עד שמראיינים את כולן?), אבל מה הם כבר יודעים, במקום באינטרנט שבו מצאתם את הכללים אמרו שהם באו הישר מתוך "נזיר השאולין שהפסיק לשחק כדורגל ומזיז גבינות בכוח המחשבה", או משהו.

טוב, אז ירדתם לכוח אדם ואתם מסתכלים למראיינת מעבר לכתף שוב ושוב. בהתחלה נראה שהיא בכלל לא חושבת לפני שהיא מודה למרואיינות בנימוס ומגרשת אותן, ואתם מתחילים להיות עצבניים. אז אתם שואלים אותה מה היא עושה לעזאזל, והיא עונה לכם עם הסיפור הבלתי יאומן הבא:

"הגיעו היום 30 מועמדות שמתוכן אני צריכה לבחור, אז את 10 הראשונות אני דוחה בלי לחשוב בכלל, ומה-11 והלאה אני בודקת אם היא הטובה ביותר מבין כל אלו שהתראיינו עד כה, ואם כן - אני מקבלת אותה".

אתם מתרעמים - מה זו שיטת הבחירה המטופשת הזו? למה לדחות אוטומטית את 10 הראשונות? מה אם המזכירה הכי טובה היא בין 10 הראשונות? למה לא לחכות עד המזכירה ה-20? אין דרך חכמה יותר לבחור? חיש קל אתם מפטרים את המראיינת הסוררת. הבעיה היא בוודאי בכך שהיא עצמה לא נבחרה על פי כללי נזיר השאולין שלכם.

רק מה? למחרת הבוסית הגדולה קוראת לכם למשרד, מראה לכם בנימוס את הערך בויקיפדיה על "<a href="http://en.wikipedia.org/wiki/Secretary_problem">בעיית המזכירה</a>" ומעיפה אתכם מהחלון. מסתבר שדרך הפעולה של המראיינת היא האופטימלית שבה אפשר לנקוט תחת הכללים המוזרים שלכם - דרך פעולה שמצליחה בערך ב-37 אחוז מהפעמים, בלי קשר למספר המזכירות. וכעת נשאלת השאלה - למה?

הבה ננסח שוב את השאלה בצורה קצת יותר מדוייקת מתמטית. יש לנו {::nomarkdown}\( n\){:/nomarkdown} מועמדות שנכנסות אלינו בסדר אקראי. אנחנו מראיינים אותן אחת אחת, וצריכים להחליט על קריטריון כלשהו שלפיו נחליט מתי לעצור את הראיונות ולקבל את המרואיינת הנוכחית. את הסיפור אפשר לספר גם בהקשרים שונים לגמרי - חיפוש חניה, חיפוש בני זוג, וכדומה - אבל זה פחות מעניין, ויותר מעניין הפתרון המוזר של הבעיה.

ראשית, בואו נחדד את עיקר הבעיה כאן - אנחנו חייבים למצוא את המזכירה <strong>הטובה ביותר</strong>. אם בחרנו את המזכירה השניה בטיבה זה נחמד, אבל חסר ערך מבחינת הכללים - גרוע בדיוק כמו שנבחר את המזכירה הגרועה ביותר. כשאנחנו מדברים על "פתרון אופטימלי" כאן הכוונה שלנו היא לפתרון <strong>שנותן את המזכירה הטובה ביותר</strong> בהסתברות הגבוהה ביותר, לא לפתרון ש"מבטיח שתמיד נהיה עם מזכירה לא רעה" או משהו בסגנון. מכיוון שזה אולי לא מה שקופץ לנו לראש אינטואיטיבית כשאנחנו חושבים על "אופטימלי" בהקשר הזה זה יכול להסביר חלק מהבלבול שלנו בנוגע לאופי של הפתרון האופטימלי המשונה.

מדרישת האופטימליות הזו נובע שכל פתרון לבעיה חייב לקיים כלל פשוט אחד: אם מזכירה שרואיינה זה עתה היא לא הטובה מכל המזכירות שרואיינו עד כה, לא מקבלים אותה. למה לא? כי אם היא לא הטובה מכל המזכירות שרואיינו עד כה, ברור לחלוטין שהיא לא הטובה ביותר ולכן אין שום טעם לשכור אותה (שוב - אנחנו <strong>חייבים</strong> את הטובה ביותר; כל תוצאה אחרת לא שווה כלום).

אם כן, מהשהסכמנו שהכלל שמוביל לבחירת מזכירה הוא "היא הטובה ביותר מבין מי שראיינו עד כה", נשאלת רק השאלה מתי להפעיל אותו. הרי ברור שיהיה מטופש להפעיל אותו כבר מהרגע הראשון - המזכירה הראשונה שאנחנו מראיינים היא הטובה ביותר מבין מי שראיינו עד כה, אבל אם המזכירות באות בסדר אקראי, ההסתברות שלנו לבחור במזכירה הטובה ביותר באופן הזה היא {::nomarkdown}\( \frac{1}{n}\){:/nomarkdown}. בדוגמה של ה-30 מזכירות שלנו, זו הסתברות של {::nomarkdown}\( \frac{1}{30}\){:/nomarkdown}, כלומר קצת פחות מ-4 אחוזים. אם יש 1000 מזכירות אז ההסתברות צונחת לה ל-0.1 אחוזים מביכים. ואנחנו אמרנו שבשיטה האופטימלית אפשר להצליח ב-37 אחוז מהפעמים בלי קשר בכלל למספר המזכירות - אני מקווה שאחוזי ההצלחה הללו (ובעיקר, האופן שבו הם לא תלויים בכלל במספר המזכירות) נראים כבר יותר מרשימים מאשר אולי נראו במבט ראשון.

אם כן, אנחנו רוצים לחכות קצת, לקבל מדגם כלשהו של מזכירות, לדחות אותן, והחל משלב מסויים להתחיל להפעיל את כלל "קבל את הטובה ביותר עד כה". מספר השלבים הזה יכול להיות קבוע ("תוך 13 שלבים, בלי קשר למספר המזכירות") ויכול להיות גם קשור איכשהו למספר המזכירות ("אחרי שבדיוק חצי מהמזכירות התראיינו") ויכול גם להיות תלוי איכשהו בראיונות שכבר בוצעו; אבל הראיונות שכבר בוצעו תמיד מניבים את אותה התוצאה - אחרי {::nomarkdown}\( k\){:/nomarkdown} ראיונות יש לנו רשימה של {::nomarkdown}\( k\){:/nomarkdown} מזכירות שלא קיבלנו שאפשר לסדר מהגרועה לטובה ביותר. אין לנו מידע, למשל, על האיכות של אותן מזכירות ביחס לאלו שעוד לא ראיינו. לכן אם יש כלל לקביעת הנקודה שממנה והלאה מפעילים את כלל "קבל את הטובה ביותר עד כה" הוא לא יהיה תלוי בראיונות שבוצעו עד כה (זה קצת נפנוף ידיים; אפשר לתת לזה הוכחה מדויקת אבל קצת טרחנית).

אם כן, תוך כמה צעדים כדאי להתחיל להפעיל את הכלל? התוצאה המפתיעה (?) היא שמדובר על {::nomarkdown}\( \frac{n}{e}\){:/nomarkdown} צעדים, כאשר {::nomarkdown}\( e=2.71828183\dots\){:/nomarkdown} הוא בסיס הלוגריתם הטבעי - הקבוע המפורסם ביותר במתמטיקה חוץ מ-{::nomarkdown}\( \pi\){:/nomarkdown}. אמרתי כבר בבלוג שאני אוהב את {::nomarkdown}\( e\){:/nomarkdown} יותר, והבעיה הזו היא דוגמה נוספת לסיבה לכך - {::nomarkdown}\( e\){:/nomarkdown} צץ במקומות עוד יותר מגוונים מאשר {::nomarkdown}\( \pi\){:/nomarkdown} לטעמי.

אוקיי, החימום נגמר - כדי להוכיח שמספר הצעדים האופטימלי הוא {::nomarkdown}\( \frac{n}{e}\){:/nomarkdown} אין מנוס מהפשלת שרוולים וחישוב טיפה טכני, אבל יפה מאוד לטעמי ולא קשה כל כך. הגישה שלנו תהיה של "מבט מלמעלה" - ננסה להבין מה קורה כאשר מפעילים את השיטה עם {::nomarkdown}\( k\){:/nomarkdown} צעדים שאחריהם מתחילים להפעיל את הכלל, ונחשב עבור {::nomarkdown}\( k\){:/nomarkdown} זה מה הסתברות ההצלחה שלנו.

אז שוב, כדי שכולם יהיו איתי: עבור {::nomarkdown}\( k\){:/nomarkdown} טבעי כלשהו ו-{::nomarkdown}\( n\){:/nomarkdown} מזכירות, אנו בודקים מה ההסתברות לבחור את המזכירה הטובה ביותר אם את {::nomarkdown}\( k-1\){:/nomarkdown} הראשונות אנו דוחים, ומקבלים את המזכירה הראשונה אחרי אותן {::nomarkdown}\( k\){:/nomarkdown} שהיא טובה יותר מכל מי שהיו עד כה (אם אין כזו, אכלנו אותה).

כאשר <a href="http://www.gadial.net/?p=690">דיברתי בבלוג על הסתברות מותנית</a> הזכרתי מושג שנקרא "נוסחת ההסתברות השלמה". בואו נזכיר אותה: אם {::nomarkdown}\( A\){:/nomarkdown} הוא מאורע כלשהו - במקרה שלנו, "המזכירה הטובה ביותר נבחרה", ואם {::nomarkdown}\( B_{1},\dots,B_{n}\){:/nomarkdown} היא סדרה של מאורעות זרים שמתארים את מרחב ההסתברות כולו - במקרה שלנו, {::nomarkdown}\( B_{i}\){:/nomarkdown} הוא המאורע "המזכירה ה-{::nomarkdown}\( i\){:/nomarkdown} מבין המרואיינות היא הטובה ביותר" - אז מתקיים {::nomarkdown}\( P\left(A\right)=\sum_{i=1}^{n}P\left(A\|B_{i}\right)P\left(B_{i}\right)\){:/nomarkdown}, כאשר {::nomarkdown}\( P\left(A\|B_{i}\right)\){:/nomarkdown} מייצג את ההסתברות שהמזכירה הטובה ביותר נבחרה <strong>בהינתן</strong> שהמזכירה ה-{::nomarkdown}\( i\){:/nomarkdown} הייתה הטובה ביותר.

בפוסט ההוא אמרתי: "על פניו היא נראית כמו דרך מסובכת יותר לכתוב את {::nomarkdown}\( P\left(A\right)\){:/nomarkdown}, אך כאמור  לעתים קרובות הדרך הנוחה ביותר לחשב את {::nomarkdown}\( P\left(A\right)\){:/nomarkdown} היא על ידי חלוקה למקרים שמיוצגים על ידי ה-{::nomarkdown}\( B_{i}\){:/nomarkdown}". זו אכן דוגמה קלאסית לכך.

את {::nomarkdown}\( P\left(B_{i}\right)\){:/nomarkdown} קל לחשב; מה ההסתברות לכך שהמזכירה ה-{::nomarkdown}\( i\){:/nomarkdown} היא הטובה ביותר? זה קל - מכיוון שהסדר שבו המזכירות נכנסות נבחר באקראי ובהתפלגות אחידה מכל הסדרים האפשריים, כל מקום סביר באותה מידה עבור המזכירה הטובה ביותר, ולכן {::nomarkdown}\( P\left(B_{i}\right)=\frac{1}{n}\){:/nomarkdown}.

ומהו {::nomarkdown}\( P\left(A\|B_{i}\right)\){:/nomarkdown}? אם {::nomarkdown}\( i\le k\){:/nomarkdown} אז {::nomarkdown}\( P\left(A\|B_{i}\right)=0\){:/nomarkdown}, על פי החוק שלנו של לדחות אוטומטית את {::nomarkdown}\( k\){:/nomarkdown} הראשונות (אם הטובה ביותר הייתה בין {::nomarkdown}\( k\){:/nomarkdown} הראשונות, אין שום סיכוי שנבחר את הטובה ביותר). החלק המעניין הוא כש-{::nomarkdown}\( i&gt;k\){:/nomarkdown}. במקרה זה {::nomarkdown}\( P\left(A\|B_{i}\right)\){:/nomarkdown} הוא ההסתברות שנבחרה המזכירה במקום ה-{::nomarkdown}\( i\){:/nomarkdown}, בהינתן שבמקום ה-{::nomarkdown}\( i\){:/nomarkdown} אכן נמצאת המזכירה הטובה ביותר. השאלה היא - איך ייתכן שהיא לא תיבחר? זה יקרה רק אם אחת מהמזכירות במקומות {::nomarkdown}\( k,k+1,\dots,i-1\){:/nomarkdown} הצליחה להידחף איכשהו - כלומר הייתה טובה יותר מכל המזכירות שלפניה.

את הקריטריון המסובך הזה אפשר לנסח בצורה הרבה יותר אלגנטית: מבין {::nomarkdown}\( i-1\){:/nomarkdown} המזכירות הראשונות, המזכירה הטובה ביותר הייתה בין {::nomarkdown}\( k\){:/nomarkdown} הראשונות. שכנעו את עצמכם שזה אכן שקול!

את ההסתברות של הקריטריון קל כעת לחשב - למזכירה הטובה ביותר יש {::nomarkdown}\( i-1\){:/nomarkdown} מקומות אפשריים להיות בהם; כל מקום סביר באותה מידה; ולכן ההסתברות שהיא תהיה באחד מ-{::nomarkdown}\( k\){:/nomarkdown} המקומות הראשונים היא {::nomarkdown}\( \frac{k}{i-1}\){:/nomarkdown}. לכן {::nomarkdown}\( P\left(B_{i}\right)=\frac{k}{i-1}\){:/nomarkdown}. אם זה התקיים, אז למזכירה במקום ה-{::nomarkdown}\( i\){:/nomarkdown} לא היו הפרעות והיא נבחרה בודאות (הרי היא הטובה ביותר, ולכן בפרט הייתה טובה מכל המזכירות שלפניה).

נוסחת ההסתברות השלמה כעת נותנת לנו:

{::nomarkdown}\( P\left(A\right)=\sum_{i=1}^{n}P\left(A\|B_{i}\right)P\left(B_{i}\right)=\sum_{i=k+1}^{n}\frac{k}{i-1}\cdot\frac{1}{n}=\frac{k}{n}\sum_{i=k+1}^{n}\frac{1}{i-1}\){:/nomarkdown}.

יופי. עכשיו נתקענו. מה עושים עם הסכום {::nomarkdown}\( \sum_{i=k+1}^{n}\frac{1}{i-1}\){:/nomarkdown} המעצבן? כאן מסתיים החלק היחסית פשוט של הפוסט ואנו עוברים לחלק הטכני, שלטעמי הוא יפה ומעניין לא פחות, אבל אולי לא מיועד לבעלי לב חלש מתמטית.

ראשית, שימו לב לכך שהסכום שלעיל שווה ל-{::nomarkdown}\( \sum_{i=k}^{n-1}\frac{1}{i}\){:/nomarkdown} בבירור (ביצענו את החלפת המשתנה הפשוטה {::nomarkdown}\( i\mapsto i+1\){:/nomarkdown}). לסכום הזה קשר הדוק לאחד הטורים החשובים במתמטיקה - הטור ההרמוני, {::nomarkdown}\( \sum_{i=1}^{\infty}\frac{1}{i}\){:/nomarkdown}. כפי ש<a href="http://www.gadial.net/?p=638">כבר הראיתי בעבר בבלוג</a>, הטור הזה מתבדר לאינסוף - ככל שסוכמים בו עוד ועוד איברים, התוצאה גדלה וגדלה באופן בלתי חסום ועוברת כל מספר טבעי בשלב מסויים (אף שיש טענות שהוא דווקא מתכנס ל-137). אבל, הבה ונדבר לרגע על <strong>הסכומים החלקיים</strong> של הטור, מה שמתקבל אחרי שסוכמים רק את {::nomarkdown}\( n\){:/nomarkdown} האיברים הראשונים מתוכו, כלומר {::nomarkdown}\( H_{n}=\sum_{i=1}^{n}\frac{1}{i}\){:/nomarkdown}. ל-{::nomarkdown}\( H_{n}\){:/nomarkdown} קוראים <strong>המספר ההרמוני</strong> ה-{::nomarkdown}\( n\){:/nomarkdown}-י, ועליו המתמטיקאים יודעים לא מעט. שימו לב ש-{::nomarkdown}\( \sum_{i=k}^{n-1}\frac{1}{i}=H_{n-1}-H_{k-1}\){:/nomarkdown}, ולכן השאלה שאנחנו רוצים לפתור היא בעצם זו: מהו {::nomarkdown}\( \lim_{n\to\infty}\frac{k}{n}\left(H_{n-1}-H_{k-1}\right)\){:/nomarkdown}?

כאן כדאי לשלוף את מה שידוע על המספרים ההרמוניים. למרבה המזל, אנחנו יודעים לקרב אותם מצויין בעזרת פונקציה שאנחנו מכירים היטב - הלוגריתם הטבעי, {::nomarkdown}\( \ln n\){:/nomarkdown}. למעשה, הסדרה ההרמונית {::nomarkdown}\( H_{n}\){:/nomarkdown} היא מעין אנלוג בדיד של {::nomarkdown}\( \ln n\){:/nomarkdown}; זאת מכיוון ש-{::nomarkdown}\( H_{n}=\sum_{i=1}^{n}\frac{1}{i}\){:/nomarkdown} ואילו {::nomarkdown}\( \ln n=\int_{1}^{n}\frac{1}{x}dx\){:/nomarkdown}. ניתן להוכיח, ואראה זאת בקרוב, ש-{::nomarkdown}\( \lim_{n\to\infty}\left(H_{n}-\ln n\right)=\gamma\){:/nomarkdown} כאשר {::nomarkdown}\( \gamma\){:/nomarkdown} הוא מספר קבוע (קטן למדי, אבל זה לא חשוב לנו) המכונה "קבוע אוילר-מסקרוני" וערכו הוא בערך {::nomarkdown}\( \gamma=0.5772\dots\){:/nomarkdown}. ואני אומר "בערך" כי המספר הזה הוא עדיין תעלומה לא קטנה - עדיין לא ידוע אפילו אם הוא רציונלי או אי רציונלי.

דרך אחרת, אולי קצת יותר נוחה, לתאר את הגבול למעלה היא זו: {::nomarkdown}\( H_{n}=\ln n+\gamma+o\left(1\right)\){:/nomarkdown}. מילולית, זה אומר "המספר ההרמוני ה-{::nomarkdown}\( n\){:/nomarkdown}-י הוא {::nomarkdown}\( \ln n\){:/nomarkdown} ועוד קבוע אוילר-מסקרוני, ועוד משהו שאני לא יודע איך הוא נראה אבל כש-{::nomarkdown}\( n\){:/nomarkdown} שואף לאינסוף הוא שואף לאפס" (המשמעות הפורמלית של {::nomarkdown}\( o\left(1\right)\){:/nomarkdown} היא זו: פונקציה {::nomarkdown}\( f\left(n\right)\){:/nomarkdown} היא {::nomarkdown}\( o\left(1\right)\){:/nomarkdown} - או-קטן של {::nomarkdown}\( 1\){:/nomarkdown} - אם {::nomarkdown}\( \frac{f\left(n\right)}{n}\to0\){:/nomarkdown}).

כעת, מהו {::nomarkdown}\( H_{n-1}-H_{k-1}\){:/nomarkdown}? עם הקירוב שתיארתי זה פשוט:

{::nomarkdown}\( H_{n-1}-H_{k-1}=\left(\ln\left(n-1\right)+\gamma+o\left(1\right)\right)-\left(\ln\left(k-1\right)+\gamma+o\left(1\right)\right)=\ln\left(\frac{n-1}{k-1}\right)+o\left(1\right)\){:/nomarkdown}

המעבר האחרון נובע מזהות סטנדרטית בלוגריתמים: {::nomarkdown}\( \ln a-\ln b=\ln\left(\frac{a}{b}\right)\){:/nomarkdown} (הרבה מהכוח של לוגריתמים נובע מכך שחיבור וחיסור שלהם מתאימים לכפל וחילוק מספרים).

אני משער שמדגדג לכם בשלב זה להיפטר מהמינוסים המעצבנים שדבוקים ל-{::nomarkdown}\( n\){:/nomarkdown} ו-{::nomarkdown}\( k\){:/nomarkdown}. ובכן, שימו לב לכך ש-{::nomarkdown}\( H_{n-1}-H_{n}=\ln\left(\frac{n-1}{n}\right)+o\left(1\right)=\ln\left(1-\frac{1}{n}\right)+o\left(1\right)=o\left(1\right)\){:/nomarkdown}, כשהמעבר האחרון נובע מכך ש-{::nomarkdown}\( \lim_{n\to\infty}\ln\left(1-\frac{1}{n}\right)=\ln\left(1\right)=0\){:/nomarkdown}. דרך מסובכת להגיד פורמלית את הרעיון הטריוויאלי ש-{::nomarkdown}\( H_{n}\){:/nomarkdown} ו-{::nomarkdown}\( H_{n-1}\){:/nomarkdown} הם אותו הדבר לכל צורך מעשי כאשר {::nomarkdown}\( n\){:/nomarkdown} שואף לאינסוף, ולכן אפשר להחליף ביניהם. למי שהפורמליות עדיין חשובה לו, הנה הטריק במלואו:

{::nomarkdown}\( H_{n-1}-H_{k-1}=\left(H_{n-1}-H_{n}+H_{n}\right)-\left(H_{k-1}-H_{k}+H_{k}\right)=H_{n}-H_{k}+o\left(1\right)=\ln\left(\frac{n}{k}\right)+o\left(1\right)\){:/nomarkdown}

אם כן, חזרה לעניינו המקורי - צמצמנו את בעיית המזכירה לגבול {::nomarkdown}\( \lim_{n\to\infty}\frac{k}{n}\ln\left(\frac{n}{k}\right)\){:/nomarkdown}. כפי שאפשר לנחש, המפתח לתעלומה הוא <strong>היחס</strong> {::nomarkdown}\( \frac{k}{n}\){:/nomarkdown}. צריך לזכור ש-{::nomarkdown}\( k\){:/nomarkdown} אינו קבוע בהכרח, אלא הוא פונקציה כלשהי של {::nomarkdown}\( n\){:/nomarkdown}, ואנחנו רוצים לדעת איזו פונקציה מניבה לנו את הערך המקסימלי - את הסתברות ההצלחה המקסימלית לבחור במזכירה הטובה ביותר. לשם כך, הבה ונסמן {::nomarkdown}\( x=\frac{k}{n}\){:/nomarkdown}, וכעת עלינו לחקור את הפונקציה {::nomarkdown}\( x\ln\left(\frac{1}{x}\right)=-x\ln x\){:/nomarkdown} עבור הערכים {::nomarkdown}\( 0&lt;x\le1\){:/nomarkdown}. ב"חקירה" אני מתכוון ל"להבין איפה יש לפונקציה מקסימום אם בכלל"

הדרך הסטנדרטית לבצע חקירה שכזו היא באמצעות נגזרות. קל לחשב את הנגזרת של הפונקציה הזו - היא {::nomarkdown}\( -\ln x-x\cdot\frac{1}{x}=\ln\left(\frac{1}{x}\right)-1\){:/nomarkdown}. על כן, הנגזרת מתאפסת כאשר {::nomarkdown}\( \ln\left(\frac{1}{x}\right)=1\){:/nomarkdown}, כלומר {::nomarkdown}\( \frac{1}{x}=e\){:/nomarkdown}, כלומר {::nomarkdown}\( x=\frac{1}{e}\){:/nomarkdown} - הנה המספר הזה צץ סוף סוף. האם ההתאפסות הזו היא נקודת מינימום או מקסימום של הפונקציה? ובכן, אם תחקרו קצת בעצמכם תגלו שהנגזרת היא פונקציה יורדת, שבהתחלה היא חיובית ואחר כך שלילית. כלומר, הפונקציה המקורית קודם עולה, ואז יורדת - מה שאומר ש-{::nomarkdown}\( x=\frac{1}{e}\){:/nomarkdown} היא נקודת המקסימום. המסקנה: אם אנחנו רוצים למקסם את הסיכוי שלנו לבחור את המזכירה הטובה ביותר, אנחנו רוצים תמיד לבחור {::nomarkdown}\( k\){:/nomarkdown} כך ש-{::nomarkdown}\( \frac{k}{n}=\frac{1}{e}\){:/nomarkdown}, כלומר {::nomarkdown}\( k=\frac{n}{e}\){:/nomarkdown}. מכיוון ש-{::nomarkdown}\( e\){:/nomarkdown} הוא אי רציונלי לעולם לא נוכל לבחור {::nomarkdown}\( k\){:/nomarkdown} שיקיים את השוויון הזה בדיוק; אבל מכיוון ש-{::nomarkdown}\( x\ln\left(\frac{1}{x}\right)\){:/nomarkdown} היא פונקציה רציפה, ככל שנבחר {::nomarkdown}\( k\){:/nomarkdown} שקרוב יותר ל-{::nomarkdown}\( \frac{n}{e}\){:/nomarkdown} נקבל סיכוי הצלחה גבוה יותר.

זה סוף בעיית המזכירה, אבל נשאר לנו להבין איך מוכיחים את ההערכה על גודל המספרים ההרמוניים, {::nomarkdown}\( H_{n}=\ln n+\gamma+o\left(1\right)\){:/nomarkdown}. לשם כך נכניס לתמונה מושג חדש - פונקצית הזטא של רימן. עבור {::nomarkdown}\( s&gt;1\){:/nomarkdown} ממשי, פונקצית הזטא של רימן מוגדרת כ-{::nomarkdown}\( \zeta\left(s\right)=\sum_{n=1}^{\infty}\frac{1}{n^{s}}\){:/nomarkdown} (<a href="http://www.gadial.net/?p=339">תיארתי בפירוט רב יותר</a> את הפונקציה והקשר שלה להשערת רימן בעבר). למשל, {::nomarkdown}\( \zeta\left(2\right)=\sum_{n=1}^{\infty}\frac{1}{n^{2}}=\frac{\pi^{2}}{6}\){:/nomarkdown} (איך מוכיחים את השוויון הזה? גם <a href="http://www.gadial.net/?p=393">את זה הראיתי בעבר</a>). בנוסף, נכליל את המספרים ההרמוניים באופן טבעי כדי שיתארו את העניין הזה: {::nomarkdown}\( H_{n}^{\left(s\right)}=\sum_{i=1}^{n}\frac{1}{i^{s}}\){:/nomarkdown}.

לב ההוכחה הוא נעוץ בהיכרות הטובה שלנו עם {::nomarkdown}\( \ln n\){:/nomarkdown}. אנחנו יודעים לתאר את {::nomarkdown}\( \ln n\){:/nomarkdown} כטור אינסופי: הנוסחה המפורסמת ביותר (שאותה לא אוכיח כאן, יש גבול...) היא {::nomarkdown}\( \ln\left(\frac{1}{1-x}\right)=\sum_{n=1}^{\infty}\frac{x^{n}}{n}\){:/nomarkdown} שתקפה כאשר {::nomarkdown}\( -1\le x&lt;1\){:/nomarkdown}. ניקח {::nomarkdown}\( k&gt;1\){:/nomarkdown} טבעי כלשהו וננסה להשתמש בנוסחה כדי לתאר כטור את {::nomarkdown}\( \ln\left(\frac{k}{k-1}\right)\){:/nomarkdown}: מכיוון ש-{::nomarkdown}\( \frac{k}{k-1}=\frac{1}{1-1/k}\){:/nomarkdown}, נקבל ש-{::nomarkdown}\( \ln\left(\frac{k}{k-1}\right)=\sum_{n=1}^{\infty}\frac{1}{nk^{n}}\){:/nomarkdown}. הטור הזה נראה קצת יותר נחמד כשכותבים אותו במפורש: {::nomarkdown}\( \ln\left(\frac{k}{k-1}\right)=\frac{1}{k}+\frac{1}{2k^{2}}+\frac{1}{3k^{3}}+\dots\){:/nomarkdown}.

כעת הבה ונקבע {::nomarkdown}\( n\){:/nomarkdown} כלשהו, ונסכום את {::nomarkdown}\( \ln\left(\frac{k}{k-1}\right)\){:/nomarkdown} לכל {::nomarkdown}\( 1&lt;k\le n\){:/nomarkdown}. בזכות התכונה של הפיכת-חיבור-לכפל של לוגריתמים, התוצאה תהיה שרשרת יפה של ביטולים:

{::nomarkdown}\( \ln\left(\frac{n}{n-1}\right)+\ln\left(\frac{n-1}{n-2}\right)+\dots+\ln\left(\frac{3}{2}\right)+\ln\left(\frac{2}{1}\right)=\ln\left(\frac{n}{n-1}\cdot\frac{n-1}{n-2}\cdots\frac{3}{2}\cdot\frac{2}{1}\right)=\ln n\){:/nomarkdown}

מה זה עזר לנו? שכעת אפשר לכתוב את {::nomarkdown}\( \ln n\){:/nomarkdown} כסכום של טורים:

{::nomarkdown}\( \ln n=\sum_{k=2}^{n}\left(\frac{1}{k}+\frac{1}{2k^{2}}+\frac{1}{3k^{3}}+\dots\right)\){:/nomarkdown}

כל טור שכזה מתכנס, והוא חיובי, ולכן ניתן לשנות את סדר האיברים בסכימה בלי חשש מעיוותים כמו זה של <a href="http://www.gadial.net/?p=438">משפט רימן</a>. אם כן, מה קיבלנו? ש-{::nomarkdown}\( \ln n=\sum_{k=2}^{n}\frac{1}{k}+\frac{1}{2}\sum_{k=2}^{n}\frac{1}{k^{2}}+\frac{1}{3}\sum_{k=2}^{n}\frac{1}{k^{3}}+\dots\){:/nomarkdown}

כעת שימו לב ש-{::nomarkdown}\( \sum_{k=2}^{n}\frac{1}{k}=H_{n}-1\){:/nomarkdown} (כי האיבר הראשון בטור, עבור {::nomarkdown}\( k=1\){:/nomarkdown}, חסר). בדומה, {::nomarkdown}\( \sum_{k=2}^{n}\frac{1}{k^{s}}=H_{n}^{\left(s\right)}-1\){:/nomarkdown}. לכן קיבלנו:

{::nomarkdown}\( \ln n=\left(H_{n}-1\right)+\frac{1}{2}\left(H_{n}^{\left(2\right)}-1\right)+\frac{1}{3}\left(H_{n}^{\left(3\right)}-1\right)+\dots\){:/nomarkdown}

ולכן העברת אגפים זריזה נותנת לנו ש:

{::nomarkdown}\( H_{n}-\ln n=1-\frac{1}{2}\left(H_{n}^{\left(2\right)}-1\right)-\frac{1}{3}\left(H_{n}^{\left(3\right)}-1\right)+\dots\){:/nomarkdown}

עד כאן זוהי תוצאה מדוייקת לחלוטין. הבעיה היא שבאגף ימין יש לנו יצור מסובך ומפחיד למדי שתלוי ב-{::nomarkdown}\( n\){:/nomarkdown} ואין לנו מושג איך לחשב אותו במדוייק. מה שכן אפשר לעשות הוא להסתכל על הגבול של כל זה כאשר משאיפים את {::nomarkdown}\( n\){:/nomarkdown} לאינסוף - כאן משתמשים בכך שכל אחד מסדרות המספרים ההרמוניים ה"מוכללים" כן מתכנסת:

{::nomarkdown}\( \lim_{n\to\infty}\left(H_{n}-\ln n\right)=1-\frac{1}{2}\left(\zeta\left(2\right)-1\right)-\frac{1}{3}\left(\zeta\left(3\right)-1\right)-\dots\){:/nomarkdown}

והנה קיבלנו ייצוג נאה של {::nomarkdown}\( \gamma\){:/nomarkdown}: {::nomarkdown}\( \gamma=1-\frac{1}{2}\left(\zeta\left(2\right)-1\right)-\frac{1}{3}\left(\zeta\left(3\right)-1\right)-\dots\){:/nomarkdown}. הספקנים שבכם אולי יתהו למה הטור הזה מתכנס בכלל; לשם כך מספיק להראות שהטור החיובי {::nomarkdown}\( \sum_{k=2}^{\infty}\left(\zeta\left(k\right)-1\right)\){:/nomarkdown} מתכנס, ואותו אפשר לכתוב כ-{::nomarkdown}\( \sum_{k=2}^{\infty}\sum_{n=2}^{\infty}\frac{1}{n^{k}}\){:/nomarkdown}, להחליף את סדר הסכימה כדי לקבל סכום של טורים גאומטריים {::nomarkdown}\( \sum_{n=2}^{\infty}\left(\sum_{k=2}^{\infty}\frac{1}{n^{k}}\right)=\sum_{n=2}^{\infty}\frac{1}{n\left(n-1\right)}\){:/nomarkdown} והטור הזה כבר בבירור מתכנס על ידי מבחן השוואה סטנדרטי (המעבר האחרון הוא פשוט שימוש מהיר בנוסחה לטורים גאומטריים אינסופיים).

עכשיו אפשר לעצור ולנשום קצת אוויר ולראות שעברנו דרך לא קטנה מאז שהתחלנו עם שיטות בחירה מוזרות למזכירות. סיפור המזכירה נגמר כאן, אבל סיפורם של המספרים ההרמוניים ממש לא; אני מקווה שבעתיד אראה עוד מקומות שבהם הם (ו-{::nomarkdown}\( e\){:/nomarkdown}) צצים.
