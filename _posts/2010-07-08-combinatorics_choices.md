---
id: 633
title: "כל כך קשה לבחור..."
date: 2010-07-08 14:32:07
layout: post
categories: 
  - קומבינטוריקה
tags: 
  - מתמטיקה תיכונית
  - קומבינטוריקה
---
אני ממשיך את סדרת הפוסטים שלי על קומבינטוריקה ברמה תיכונית, והפעם אני רוצה לנקוט בגישה "מתמטית" לדברים שכבר גילינו. המתמטיקאי תמיד מנסה לבחון מחדש את ההנחות שלו ולהקל על הדרישות בכדי להכליל את התוצאות שלו, וזה גם מה שאני רוצה לעשות. הנוסחה המרכזית ש<a href="http://www.gadial.net/?p=534">גילינו</a> עד כה הייתה כי {::nomarkdown}\( \frac{n!}{k!\left(n-k\right)!}\){:/nomarkdown}, שאותו סימנו בקיצור {::nomarkdown}\( {n \choose k}\){:/nomarkdown} וכינינו "מקדם הבינום"(מסיבות שהסברתי בפוסט קודם) הוא מספר הדרכים לבחור {::nomarkdown}\( k\){:/nomarkdown} מתוך {::nomarkdown}\( n\){:/nomarkdown} עצמים. אלא שכאן יש לי שתי הנחות סמויות: שהבחירה היא ללא החזרה, וללא חשיבות לסדר. בפוסט הזה אנסה להסביר מה זה אומר, ומה מקבלים כשמשחקים עם ההנחות הללו.

בואו נזכור מה {::nomarkdown}\( {n \choose k}\){:/nomarkdown} אומר באמצעות דוגמה: בלוטו, אם נשכח לרגע מהמספר הנוסף, נבחרים שישה מספרים מתוך 49. הבחירה הזו היא ללא חשיבות לסדר: אם המכונה הגרילה קודם כל את 1 ואז את 2, זו אותה הסיטואציה מבחינתנו כמו זו שבה המכונה הגרילה קודם כל את 2 ורק אז את 1. די ברור שאם הייתה חשיבות לסדר, המשחק היה הופך לקשה פי כמה, כי לא היה מספיק לנחש <strong>מי</strong> יזכה; היה צריך לנחש גם <strong>באיזה סדר</strong> הם יופיעו.

הבחירה שבלוטו היא גם ללא החזרות: אם המכונה הגרילה 1, זהו זה מבחינת המספר 1 - לא ייתכן שהוא ייבחר שוב. אפשר היה לחשוב על הגרלה שמתנהלת אחרת - אם מוגרל כדור הוא מוצג לצופים, ומייד אחר כך מוחזר אל בריכת הכדורים, כך שייתכן שהוא ייבחר שוב. גם סיטואציה כזו היא בבירור יותר קשה עבורנו מסתם בחירת שישה מספרים - אנחנו נצטרך גם לחשוב על סיטואציות שבהן אותו מספר נבחר כמה פעמים. למעשה, בלתי נתפס אינטואיטיבית ככל שיהיה, בסיטואציה שכזו התוצאה {::nomarkdown}\( 1,1,1,1,1,1\){:/nomarkdown} סבירה <strong>בדיוק כמו כל תוצאה אחרת</strong> (אגב, האם מישהו מכם מרגיש "מוזר"להמר על תוצאה כמו {::nomarkdown}\( 1,1,1,1,1,1\){:/nomarkdown} אבל תוצאות אחרות הן בסדר מבחינתו? זו המחשה לאופן שבו האינטואיציה שלנו מטעה אותנו לחלוטין במשחקי מזל שכאלו, ולכן הם כה פופולריים).

הנה תרגיל בקומבינטוריקה: אם סוגי הבחירות השונות נקבעים לפי השאלות א) האם יש חשיבות לסדר או לא ו-ב) האם יש החזרה או לא, כמה סוגי בחירות יש? התשובה היא כמובן 4 (מעקרון הכפל). הבה ונטפל בכולן. בכל המקרים יהיה מדובר על בחירה של {::nomarkdown}\( k\){:/nomarkdown} אובייקטים כשיש {::nomarkdown}\( n\){:/nomarkdown} אובייקטים לבחור מהם.

ובכן, בחירה בלי החזרה ובלי חשיבות לסדר היא כמו שראינו {::nomarkdown}\( {n \choose k}\){:/nomarkdown}. לפעמים משתמשים גם בסימון המבלבל {::nomarkdown}\( C_{n}^{k}\){:/nomarkdown} וקוראים לזה "צירופים", אך זה הרבה פחות מקובל במתמטיקה ואני לא משתמש בסימונים הללו אף פעם.

נעבור לבחירה בלי החזרה אך עם חשיבות לסדר, מה שנקרא לעתים בעברית "חליפות"ומסומן ב-{::nomarkdown}\( A_{n}^{k}\){:/nomarkdown}. הדרך לחשב את מספר האפשרויות לבחור בלי החזרה ועם חשיבות לסדר {::nomarkdown}\( k\){:/nomarkdown} מתוך {::nomarkdown}\( n\){:/nomarkdown} עצמים היא פשוטה למדי כי אפשר לחשוב עליה כתהליך דו-שלבי: קודם כל נבחר {::nomarkdown}\( k\){:/nomarkdown} עצמים מתוך ה-{::nomarkdown}\( n\){:/nomarkdown} בלי חשיבות לסדר, ואז נבחר את האופן שבו "מסדרים"אותם. כבר ראינו שיש {::nomarkdown}\( {n \choose k}\){:/nomarkdown} אפשרויות לבחור את העצמים בלי חשיבות לסדר, ושבהינתן {::nomarkdown}\( k\){:/nomarkdown} עצמים יש {::nomarkdown}\( k!\){:/nomarkdown} דרכים לסדר אותם, כך שהתוצאה היא {::nomarkdown}\( {n \choose k}k!=\frac{n!}{k!\left(n-k\right)!}k!=\frac{n!}{\left(n-k\right)!}\){:/nomarkdown}. אפשר גם להגיע לתוצאה הזו בדרך ישירה: בהתחלה יש לנו {::nomarkdown}\( n\){:/nomarkdown} איברים לבחור מהם, אחר כך יש לנו {::nomarkdown}\( n-1\){:/nomarkdown} איברים, אחר כך {::nomarkdown}\( n-2\){:/nomarkdown} וכן הלאה... עד שבסופו של דבר יש לנו {::nomarkdown}\( n-k\){:/nomarkdown} איברים ואז אנחנו כבר לא בוחרים. נקבל את המכפלה {::nomarkdown}\( n\cdot\left(n-1\right)\cdot\left(n-2\right)\cdots\left(n-k+1\right)\){:/nomarkdown} (ה-{::nomarkdown}\( +1\){:/nomarkdown} בסוגר האחרון נובע מכך שהבחירה האחרונה מתבצעת רגע לפני שאנו נשארים עם {::nomarkdown}\( n-k\){:/nomarkdown} איברים) - לא קשה לראות שמכפלה זו אכן שווה ל-{::nomarkdown}\( \frac{n!}{\left(n-k\right)!}\){:/nomarkdown}, אבל היא יותר מסורבלת לכתיבה. שימו לב, אגב, שאם היינו בוחרים {::nomarkdown}\( k=n\){:/nomarkdown} היינו מקבלים את התוצאה {::nomarkdown}\( n!\){:/nomarkdown} - כלומר, הכללנו גם את הרעיון של סידור {::nomarkdown}\( n\){:/nomarkdown} איברים בשורה.

אני רוצה להציג עוד נקודת מבט שתכליל הן את הצירופים והן את החליפות, ותיתן לנו עוד נוסחה מאוד פופולרית. בואו נחשוב לרגע שיש לנו {::nomarkdown}\( n\){:/nomarkdown} כדורים, ש-{::nomarkdown}\( k\){:/nomarkdown} מתוכם אדומים והיתר כחולים, ואנחנו שואלים את עצמו בכמה דרכים ניתן לסדר אותם בשורה. שימו לב שכל הכדורים מאותו צבע נראים לנו זהים - אם נחליף את המקומות של שני כדורים בעלי אותו צבע נקבל תוצאה שנראית לנו זהה לקודמת, ולכן אין צורך לספור אותה שוב. מה עושים? דרך אחת היא זו: ראשית נחשוב על כל הכדורים כעל אובייקטים שונים זה מזה, ואז יש {::nomarkdown}\( n!\){:/nomarkdown} דרכים שונות לסדר אותם בשורה. כעת צריך "לתקן"את הספירות הכפולות שביצענו, והדרך לעשות זאת היא לספור בכמה דרכים שונות ניתן לשנות את הסדר הפנימי בין הכדורים האדומים, ובכמה דרכים שונות ניתן לשנות את הסדר הפנימי בין הכדורים הכחולים, ולחלק בתוצאה זו. יש {::nomarkdown}\( k\){:/nomarkdown} כדורים אדומים ולכן {::nomarkdown}\( k!\){:/nomarkdown} סידורים פנימיים שלהם, ובאופן דומה יש {::nomarkdown}\( \left(n-k\right)!\){:/nomarkdown} סידורים פנימיים של הכדורים הכחולים, ולכן התוצאה היא {::nomarkdown}\( \frac{n!}{k!\left(n-k!\right)}\){:/nomarkdown} - בדיוק {::nomarkdown}\( {n \choose k}\){:/nomarkdown} וזה לא כל כך מפתיע כי אפשר לחשוב על הסידור הנ"ל כעל "בחר {::nomarkdown}\( k\){:/nomarkdown} מקומות עבור הכדורים האדומים ושים את הכחולים ביתר". למעשה, הגישה הזו הייתה האופן שבו הוכחתי את הנוסחה עבור {::nomarkdown}\( {n \choose k}\){:/nomarkdown} מלכתחילה.

כעת להכללה המבוקשת - מה קורה אם יש לי כדורים אדומים, ירוקים, צהובים וכחולים? ומה אם יש עוד צבעים? באופן כללי אפשר לחשוב על כך ש-{::nomarkdown}\( n\){:/nomarkdown} האיברים מתחלקים לקבוצות, כך שמספרי האיברים בקבוצות הם {::nomarkdown}\( k_{1},k_{2},\dots,k_{t}\){:/nomarkdown}. קבוצה יכולה להכיל גם איבר בודד; לכן אנחנו יכולים להניח שה-{::nomarkdown}\( k\){:/nomarkdown}-ים מתארים את כל האיברים, כלומר מתקיים {::nomarkdown}\( n=k_{1}+k_{2}+\dots+k_{t}\){:/nomarkdown}. על פי אותו הגיון שתיארתי קודם, מספר הסידורים האפשריים בשורה של האיברים הללו, כשאנחנו מתעלמים מהסידורים הפנימיים בין איברים מאותו צבע, הוא {::nomarkdown}\( \frac{n!}{k_{1}!k_{2}!\cdots k_{t}!}\){:/nomarkdown}. שימו לב ש-{::nomarkdown}\( {n \choose k}\){:/nomarkdown} מתאים למקרה בו יש לנו בדיוק שתי קבוצות, ואילו מספר החליפות, {::nomarkdown}\( \frac{n!}{\left(n-k\right)!}\){:/nomarkdown} מתאים בדיוק למקרה שבו יש לנו {::nomarkdown}\( n-k\){:/nomarkdown} עצמים זהים והיתר שונים זה מזה (כך שהנוסחה היא בעצם {::nomarkdown}\( \frac{n!}{\left(n-k\right)!1!1!\cdots1!}\){:/nomarkdown} ואין צורך לכתוב את ה-{::nomarkdown}\( 1\){:/nomarkdown}-ים במכנה כי {::nomarkdown}\( 1!=1\){:/nomarkdown}). למה הסיטואציה הזו אכן מתארת חליפות? כי ניתן לחשוב על כך שאנחנו מניחים על העצמים שלנו פתקים שבהם או שכתוב מספר כלשהו מ-{::nomarkdown}\( 1\){:/nomarkdown} עד {::nomarkdown}\( k\){:/nomarkdown} (שמתארים את מספרם בבחירה) או שכתוב עליהם "לא נבחר", וכל פתקי ה"לא נבחר" זהים זה לזה ויש {::nomarkdown}\( n-k\){:/nomarkdown} מהם.

טוב, אז זה מסיים את עניין הבחירה בלי החזרות. הבה ונעבור לבחירה עם החזרות - שימו לב שכאן {::nomarkdown}\( k\){:/nomarkdown} יכול להיות גדול מ-{::nomarkdown}\( n\){:/nomarkdown} כי האיברים לא יכולים "להיגמר" לנו. הסיטואציה כאן מאוד מעניינת - מצד אחד, אם יש חשיבות לסדר הנוסחה פשוטה ביותר (כה פשוטה שאני ממליץ לכם לנסות ולהמציא אותה לבד לפני שתקראו מה שאכתוב). מצד שני, הנוסחה עבור בחירה עם החזרות אך בלי חשיבות לסדר היא קשה יחסית - כה קשה שאיני חושב שמלמדים אותה כלל בתיכון, אפילו אם כן לומדים קומבינטוריקה. למרות זאת הדגש צריך להיות על הקושי ה<strong>יחסי</strong>: הנוסחה אינה נוראית כלל ואני מקווה שעד סיום הפוסט יוכלו כל הקוראים לפתח אותה בעצמם.

הנוסחה לבחירה עם החזרה ועם חשיבות לסדר היא תוצאה ישירה של עקרון הכפל. תהליך הבחירה שלנו הוא בן {::nomarkdown}\( k\){:/nomarkdown} שלבים; בכל שלב אנחנו בוחרים אחת מ-{::nomarkdown}\( n\){:/nomarkdown} אפשרויות שונות. יש לנו אם כן בסך הכל {::nomarkdown}\( n\cdot n\cdots n=n^{k}\){:/nomarkdown} אפשרויות שונות. קל להתבלבל ולשכוח מי במעריך החזקה ומי בבסיס (כלומר, האם זה {::nomarkdown}\( k^{n}\){:/nomarkdown} או {::nomarkdown}\( n^{k}\){:/nomarkdown}) ולכן אני ממליץ לנקוט בגישה הבאה: כמה מספרים דו ספרתיים יש, אם מרשים גם לאפס להופיע (כלומר, {::nomarkdown}\( 3\){:/nomarkdown} הוא המספר ה"דו ספרתי" {::nomarkdown}\( 03\){:/nomarkdown} וכדומה)? {::nomarkdown}\( 2^{10}\){:/nomarkdown} או {::nomarkdown}\( 10^{2}\){:/nomarkdown}? ובכן, {::nomarkdown}\( 2^{10}=1024\){:/nomarkdown} כך שברור שיש כאן בעיה; לעומת זאת {::nomarkdown}\( 10^{2}\){:/nomarkdown} מתאים בדיוק, וזה לא מפתיע כי מספר דו ספרתי מורכב מבחירה של אחת מ-10 הספרות האפשריות בתור ספרת האחדות, ואחת מ-10 הספרות האפשריות בתור ספרת העשרות.

נעבור לבחירה עם החזרה ו<strong>בלי</strong> חשיבות לסדר. גם כאן כדאי לנסות ולחפש את הנוסחה המתאימה באופן עצמאי קודם; זה מאפשר לראות את ה"קושי"שיש כאן בהשוואה למקרים האחרים. הפתרון שאציע הוא דרך שיטת העבודה הסטנדרטית במתמטיקה - הכנת תה. הסיפור מספר על מתמטיקאי ופיזיקאי שמתבקשים להכין לעצמם תה. הפיזיקאי לוקח את קומקום המים הריק, ממלא אותו במים, מרתיח, שופך מקצת המים לכוס ומכין לעצמו. בא המתמטיקאי, לוקח את הקומקום שעדיין מלא, מרוקן את תוכנו לכיור ואומר "עכשיו חזרנו לבעיה שאותה אנחנו כבר יודעים לפתור". כך גם כאן - נעבור לבעיה שאותה אנחנו כבר יודעים לפתור - בחירה <strong>בלי</strong> החזרה ובלי חשיבות לסדר.

הדרך הנוחה ביותר לתאר זאת היא באמצעות סיפור מעשיות. בחירה של {::nomarkdown}\( k\){:/nomarkdown} מתוך {::nomarkdown}\( n\){:/nomarkdown} איברים ללא חשיבות לסדר ועם החזרה ניתן לתאר בתור סידור כדורים בתאים: נניח שיש לנו שורה של {::nomarkdown}\( n\){:/nomarkdown} תאים ממוספרים, ו-{::nomarkdown}\( k\){:/nomarkdown} כדורים זהים. אנחנו זורקים כדורים לתוך התאים ובסוף רואים מה קיבלנו. אם בתא מס' 1 יש שני כדורים, אנחנו אומרים שבחרנו את האיבר מס' 1 בדיוק שתי פעמים; אם בתא 2 אין כדורים כלל אנו אומרים שאת איבר מס' 2 בכלל לא בחרנו, וכן הלאה.

עכשיו בואו ונהפוך את הקערה על פיה. בואו נדמיין שאין בכלל תאים אלא רק תא אחד ארוך מאוד. ושכל הכדורים כבר מסודרים בו בשורה כמו ילדים טובים. ואז אנחנו באים ובין זוג כדורים כלשהו שמים <strong>מחיצה</strong> שמחלקת את התא לשני תאים. מה שעשינו בפועל הוא לחלק את הכדורים בין <strong>שני</strong> תאים - שני התאים שנוצרו לאחר ששמנו את המחיצה. אם למשל אשים את המחיצה בדיוק באמצע התא אחלק את הכדורים שווה בשווה בין שני התאים; ואם אשים את המחיצה מימין לכדור הימני ביותר, ממש בינו ובין הקיר, אצור תא רק ותא אחר שמכיל את כל הכדורים. אם כן, זה המשחק שאני רוצה לעשות, רק עם {::nomarkdown}\( n-1\){:/nomarkdown} מחיצות (שאחרי שאכניס ייצרו {::nomarkdown}\( n\){:/nomarkdown} תאים).

בגישה הזו מה שאני "בוחר" הוא את המקומות שבהם אני רוצה לשים את המחיצות. על פניו כל רווח בין שני כדורים, או בין כדור והקיר, הוא מיקום חוקי. יש {::nomarkdown}\( k\){:/nomarkdown} כדורים ולכן {::nomarkdown}\( k+1\){:/nomarkdown} רווחים (ציירו שני כדורים ותראו את שלושת הרווחים: מימין לכדור הימני, משמאל לשמאלי, ובין שניהם). לכן יש לי בחירה של {::nomarkdown}\( n-1\){:/nomarkdown} איברים מתוך קבוצה של {::nomarkdown}\( k+1\){:/nomarkdown} איברים, בלי חשיבות לסדר ועם החזרה, כי אפשר לבחור באותו רווח כמה פעמים... היי, רגע, אז מה בעצם השגתי כאן? אני עדיין תקוע עם בעיה של בחירה עם החזרה ולא שיפרתי כלום!

אם לגלוש לרגע למתמטיקה יותר מתקדמת, כשכזה דבר קורה זה לא בהכרח סוף העולם. אפשר לחזור על אותו תהליך שוב ושוב ולראות האם זה הופך את הבעיה בהדרגה לפשוטה יותר. לרוע המזל, זה לא מה שקורה כאן - מבעיה של בחירת {::nomarkdown}\( k\){:/nomarkdown} מתוך {::nomarkdown}\( n\){:/nomarkdown} עברתי לבעיה של בחירת {::nomarkdown}\( n-1\){:/nomarkdown} מתוך {::nomarkdown}\( k+1\){:/nomarkdown}, ואם אעשה את התעלול שוב אחזור לבעיה של בחירת {::nomarkdown}\( k\){:/nomarkdown} מתוך {::nomarkdown}\( n\){:/nomarkdown}. צריך להוסיף עוד תעלול לתמונה, אם כך. והתעלול הזה פשוט - אני הולך לאסור על תאים ריקים.

הטענה שלי היא כזו: מספר הדרכים השונות לחלק {::nomarkdown}\( k\){:/nomarkdown} כדורים ל-{::nomarkdown}\( n\){:/nomarkdown} תאים (בלי חשיבות לסדר) שווה בדיוק למספר הדרכים השונות לחלק {::nomarkdown}\( n+k\){:/nomarkdown} כדורים ל-{::nomarkdown}\( n\){:/nomarkdown} תאים כשבסוף החלוקה אין תאים ריקים. למה? זה פשוט: כי נתחיל את החלוקה בלשים כדור אחד בכל תא. כך הבטחנו שמה שחייב להתקיים, מתקיים, ואז {::nomarkdown}\( k\){:/nomarkdown} הכדורים שנותרו אפשר לחלק בשקט ובלי מגבלות כלשהן. אם כן, המרנו את הבעיה שלנו לבעיה אחרת, שאותה יהיה לנו קל יותר לתקוף.

נחזור לבעיית השמת המחיצות. אם אסור שיהיו תאים ריקים, זה אומר שאסור לשים שתי מחיצות בין אותו זוג כדורים, ואסור לשים מחיצה בין כדור ובין הקיר. מצד שני, יש לנו הפעם {::nomarkdown}\( n+k\){:/nomarkdown} כדורים, ולכן יש בסך הכל {::nomarkdown}\( n+k-1\){:/nomarkdown} רווחים שבהם ניתן לשים את {::nomarkdown}\( n-1\){:/nomarkdown} המחיצות. הפעם הבחירה היא <strong>בלי</strong> החזרות כי כאמור, אסור לשים שתי מחיצות בין אותו זוג כדורים - אסור לבחור פעמיים באותו רווח שבין כדורים. לכן יש לנו בחירה של {::nomarkdown}\( n-1\){:/nomarkdown} איברים מתוך {::nomarkdown}\( n+k-1\){:/nomarkdown} איברים, וזה בדיוק {::nomarkdown}\( {n+k-1 \choose n-1}\){:/nomarkdown}, ואת זה ניתן לכתוב גם כ-{::nomarkdown}\( {n+k-1 \choose k}\){:/nomarkdown}. בזאת מצאנו את הנוסחה לשיטת החלוקה הרביעית והאחרונה.

לפני שנסיים להפעם אני רוצה לתאר שימוש פשוט אחד בבחירה עם החזרה ובלי חשיבות לסדר, שבינתיים אולי נראית מפחידה ומסובכת ולא מועילה כלל. נביט במשוואה {::nomarkdown}\( x_{1}+x_{2}+\dots+x_{n}=k\){:/nomarkdown}, כאשר {::nomarkdown}\( k\){:/nomarkdown} הוא מספר שלם והערכים שאנחנו מרשים למשתנים לקבל הם רק ערכים שלמים אי שליליים (משוואות כאלו צצות בפועל! בעולם האמיתי! תאמינו לי!). כמה פתרונות יש למשוואה הזו? בדיוק מספר האפשרויות לבחור {::nomarkdown}\( k\){:/nomarkdown} איברים מתוך {::nomarkdown}\( n\){:/nomarkdown}, עם החזרה ובלי חשיבות לסדר. למה? אשאיר זאת כתרגיל לקורא.
