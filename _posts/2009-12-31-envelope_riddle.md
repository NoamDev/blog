---
id: 222
title: "חידת מעטפות"
date: 2009-12-31 11:39:19
layout: post
categories: 
  - הסתברות
  - משחקים וחידות מתמטיות
tags: 
  - תוצאות לא אינטואיטיביות
---
לכבוד סוף השנה, חידה: אתם נמצאים בחדר שבו נמצאות שתי מעטפות, כל אחת עם סכום כסף שנבחר באקראי (לדקדקנים - נבחר מתוך התפלגות כלשהי על המספרים הממשיים - לא ידוע לכם איזו התפלגות). אתם בוחרים באקראי (כלומר, בהסתברות 50:50) את אחת המעטפות, פותחים אותה ורואים את הסכום שבפנים. כעת מאתגרים אתכם - החליטו אם להחליף או לא. המטרה: למצוא שיטת החלטה שבה מובטח שבהסתברות של יותר מ-{::nomarkdown}\( \frac{1}{2}\){:/nomarkdown} תסיימו עם הסכום הגדול יותר מבין השניים. מה עושים?

ייתכן שחלקכם אומרים "אה, זה בדיוק <a href="http://www.gadial.net/?p=146">פרדוקס המעטפות</a>! אז כדאי תמיד להחליף!" אלא שזה לא בדיוק כך. פרדוקס המעטפות עובד עבור מעטפות שהסכומים בהם הוגרלו על ידי התפלגויות מסויימות, שצריך "להנדס" כדי שיתאימו לפרדוקס (הרחבתי על כך בפוסט המתאים) - ויותר מכך, הסיבה שבגללה תמיד כדאי להחליף עבור אותן התפלגויות נובעת משיקולי תוחלת הרווח של ההחלפה; הטיעון הבסיסי הוא "אם אני מחליף וגומר עם המעטפה בעלת הסכום הגדול יותר, אני ארוויח הרבה יותר משאפסיד אם אגמור עם המעטפה בעלת הסכום הקטן יותר". כאן לא נדרש מאיתנו להרוויח כסף בתוחלת, אלא פשוט לסיים עם המעטפה בעלת הסכום הגבוה יותר, בהסתברות גבוהה מחצי.

למעשה, שיטת הפעולה של "תחליף תמיד" בבירור לא תיתן הסתברות גבוהה מחצי; אם מלכתחילה בחרנו את המעטפה בעלת הסכום הגבוה יותר (בהסתברות {::nomarkdown}\( \frac{1}{2}\){:/nomarkdown}), אז נפסיד, ואחרת (גם כן בהסתברות {::nomarkdown}\( \frac{1}{2}\){:/nomarkdown}) ננצח. אם כן, יש לנו כאן חידה ששונה מהותית מפרדוקס המעטפות - ועל פניו לא ברור אם היא פתירה בכלל. קחו עכשיו מספר דקות וחשבו על החידה - לאחר מכן אנסה להציג שני פתרונות שונים עבורה.

האתגר שהחידה הזו מציבה נעוץ בכך שאין לנו מושג אילו סכומים נמצאים במעטפות ועל פי מה נקבע איך הם הגיעו לשם. אנחנו צריכים שיטה שתהיה טובה באופן כללי, לכל זוג אפשרי של מספרים {::nomarkdown}\( a,b\){:/nomarkdown} שיכולים להיות במעטפות. נבחר את הסימונים לשני הסכומים הללו כך ש-{::nomarkdown}\( a\){:/nomarkdown} הוא הקטן יותר, כלומר {::nomarkdown}\( a\le b\){:/nomarkdown}. השאלה הראשונה, אם כן, היא מה בעצם ידוע לי ובמה אני יכול להשתמש.

ובכן, כל מה שידוע לי הוא הערך שנמצא במעטפה שפתחתי, אותו אסמן ב-{::nomarkdown}\( x\){:/nomarkdown}. כלל ההחלטה שלי ניתן יהיה לתיאור באופן כללי בתור פונקציה {::nomarkdown}\( f\left(x\right)\){:/nomarkdown} שלכל {::nomarkdown}\( x\){:/nomarkdown} מתאימה את ההסתברות שאבחר לא להחליף. עד כאן פורמליסטיקה, וכעת נפנה לפתרון כלשהו. האינטואיציה הראשונה שלי בתרגיל הזה היא שככל ש-{::nomarkdown}\( x\){:/nomarkdown} גדול יותר, כך אני אתפתה <strong>פחות</strong> להחליף אותו. הדרך הפורמלית לבצע משהו כזה היא לבחור בתור {::nomarkdown}\( f\){:/nomarkdown} פונקציה שעולה תמיד (כלומר, אם {::nomarkdown}\( x&lt;y\){:/nomarkdown} אז {::nomarkdown}\( f\left(x\right)&lt;f\left(y\right)\){:/nomarkdown}) ועם זאת ערכיה נמצאים כל הזמן בתוך התחום {::nomarkdown}\( \left[0,1\right]\){:/nomarkdown} (אחרת היא לא מייצגת הסתברות). לא קשה לבנות פונקציות כאלו - למשל באמצעות מניפולציה על הפונקציה {::nomarkdown}\( \arctan\){:/nomarkdown} (הפונקציה ההופכית לטנגנס) - זוהי פונקציה עולה ממש שערכיה נעים בתחום {::nomarkdown}\( \left[-\pi/2,\pi/2\right]\){:/nomarkdown}, כך שרק צריך "לכווץ" אותה מעט ו"להרים" אותה מעט כדי לקבל {::nomarkdown}\( f\){:/nomarkdown} כמו שרציתי. ברשותכם אפסח על הפרטים הטכניים הללו.

ובכן, מסתבר ש-{::nomarkdown}\( f\){:/nomarkdown} שכזו עובדת מצויין. בואו נחשב את ההסתברות שאנצח, אם אני נעזר ב-{::nomarkdown}\( f\){:/nomarkdown} הזו. ההסתברות שאנצח היא ההסתברות שאבחר בהתחלה את {::nomarkdown}\( a\){:/nomarkdown} (בהסתברות חצי) ואז בגלל {::nomarkdown}\( f\){:/nomarkdown} אבחר להחליף (בהסתברות {::nomarkdown}\( 1-f\left(a\right)\){:/nomarkdown}), ועוד ההסתברות שאבחר בהתחלה את {::nomarkdown}\( b\){:/nomarkdown} (שוב, בהסתברות חצי) ואז בגלל {::nomarkdown}\( f\){:/nomarkdown} אבחר דווקא לא להחליף (בהסתברות {::nomarkdown}\( f\left(b\right)\){:/nomarkdown}). מה ההסתברות שלי לנצח? {::nomarkdown}\( \frac{1}{2}\cdot\left(1-f\left(a\right)\right)+\frac{1}{2}\cdot f\left(b\right)=\frac{1}{2}\left(1+f\left(b\right)-f\left(a\right)\right)=\frac{1}{2}+\frac{1}{2}\left(f\left(b\right)-f\left(a\right)\right)\){:/nomarkdown}, והסתברות זו גדולה ממש מחצי כאשר {::nomarkdown}\( a&lt;b\){:/nomarkdown}, כי אז {::nomarkdown}\( f\left(a\right)&lt;f\left(b\right)\){:/nomarkdown}, כלומר {::nomarkdown}\( f\left(b\right)-f\left(a\right)&gt;0\){:/nomarkdown} (אם {::nomarkdown}\( a=b\){:/nomarkdown} אז אני מנצח תמיד, כי לא משנה מה אעשה - אסיים עם הסכום הגדול מבין השניים, שבמקרה זה הם שווים).

כעת אני רוצה להציג דרך אחרת לפתרון, שהמעניין בה היא שהיא אינה קונסטרוקטיבית במיוחד - למעשה, האסטרטגיה שהיא מציעה יכולה להיות מעורפלת כמעט כמו שיטת בחירת הכסף למעטפות. הרעיון פשוט: בחר באקראי מספר ממשי, כשהדרישה היחידה היא שכל מספר ממשי יכול להיבחר (פורמלית - פונקצית צפיפות ההסתברות של ההגרלה צריכה להיות חיובית תמיד) והשווה אותו ל-{::nomarkdown}\( x\){:/nomarkdown} שראית במעטפה שלך. אם המספר שהגרלת גדול יותר, תחליף; אחרת, תישאר.

מה קורה כאן? צריך להבדיל בין שלושה מקרים אפשריים, לפי הזהות של המספר שהגרלתי, שאסמנו {::nomarkdown}\( y\){:/nomarkdown}. אם {::nomarkdown}\( y\le a&lt;b\){:/nomarkdown}, אז לא משנה מה נמצא במעטפה שפתחתי, אני לא הולך להחליף; לכן ההסתברות שלי להצליח היא בדיוק חצי. באופן דומה, אם {::nomarkdown}\( a&lt;b&lt;y\){:/nomarkdown} אז לא משנה מה נמצא במעטפה שפתחתי, כן אחליף, ולכן שוב ההסתברות שלי להצליח היא חצי. האקשן מתחיל כאשר {::nomarkdown}\( a&lt;y\le b\){:/nomarkdown}; במקרה זה <strong>תמיד אנצח</strong>. לא משנה אם ראיתי את {::nomarkdown}\( a\){:/nomarkdown} או {::nomarkdown}\( b\){:/nomarkdown}. אם ראיתי את {::nomarkdown}\( a\){:/nomarkdown}, אז ה-{::nomarkdown}\( y\){:/nomarkdown} שהגרלתי גדול יותר ממנו, ולכן אחליף ואנצח; ואם ראיתי את {::nomarkdown}\( b\){:/nomarkdown} אז ה-{::nomarkdown}\( y\){:/nomarkdown} שלי קטן יותר ממנו ולכן לא אחליף ואנצח.

הבה ונעשה כעת את החישוב הפורמלי. אנחנו צריכים להבדיל בין ההסתברות של שלושה מקרים: {::nomarkdown}\( P\left(y\le a\right),P\left(y&gt;b\right),P\left(a&lt;y\le b\right)\){:/nomarkdown}. אלו שלושת המקרים האפשריים היחידים, ולכן סכום ההסתברויות שלהם הוא 1, וכדי לחשב את ההסתברות שאנצח צריך לכפול כל אחד מהם בהסתברות לנצח בהניתן שהוא קרה. נקבל את הסכום הבא:

{::nomarkdown}\( \frac{1}{2}P\left(y\le a\right)+\frac{1}{2}P\left(y&gt;b\right)+P\left(a&lt;y\le b\right)\){:/nomarkdown}

{::nomarkdown}\( = \frac{1}{2}\left(P\left(y\le a\right)+P\left(y&gt;b\right)+P\left(a&lt;y\le b\right)\right)+\frac{1}{2}P\left(a&lt;y\le b\right)\){:/nomarkdown}
{::nomarkdown}\( = \frac{1}{2}+\frac{1}{2}P\left(a&lt;y\le b\right)\){:/nomarkdown}

אם כן, שוב קיבלתי הסתברות הצלחה של "חצי ועוד קצת". כל מה שנדרש ממני הוא שההתפלגות שבה אני בוחר את {::nomarkdown}\( y\){:/nomarkdown} תהיה כזו שבה לכל {::nomarkdown}\( a&lt;b\){:/nomarkdown}, ההסתברות שיתקיים {::nomarkdown}\( a&lt;y\le b\){:/nomarkdown} תהיה חיובית. התפלגות נורמלית היא הדוגמה הקלאסית להתפלגות שבה זה מתקיים, אך כאמור - כל התפלגות עם פונקצית צפיפות הסתברות חיובית תמיד עובדת (ואין בעיה גם עם פונקציות מוגבלות יותר, עם נקודות אי רציפות סליקות - אבל למה לחפור בכך?)

שני הפתרונות מקסימים לטעמי, והתוצאה של החידה הזו היא אנטי-אינטואיטיבית בעליל. מסתבר שבמתמטיקה, גם כשאתה לא יודע כלום, אתה יכול לדעת משהו.
