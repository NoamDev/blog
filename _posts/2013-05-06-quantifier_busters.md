---
id: 2524
title: "מכסחי הכמתים"
date: 2013-05-06 23:20:18
layout: post
categories: 
  - לוגיקה
tags: 
  - חילוץ כמתים
  - לוגיקה מסדר ראשון
---
בפוסטים שלי על לוגיקה הגעתי עד למשפטי השלמות והקומפקטיות של לוגיקה מסדר ראשון, וזה מביא אותנו אל הסף של מה שנקרא "תורת המודלים". הפעם אני רוצה לדבר על אחת מהטכניקות הבסיסיות שרואים כשמתחילים ללמוד את תורת המודלים - חילוץ כמתים. מכיוון שבאנגלית הטכניקה נקראת Quantifier Elimination ואני רוצה להשתעשע, אני אקרא לה כאן "חיסול כמתים".

מה זה? שניה לפני שאפציץ עם ההגדרות הפורמליות, אינטואיציה: הנוסחאות בלוגיקה מסדר ראשון נבנות מתוך כל מני רכיבים בסיסיים שמחוברים עם פעולות לוגיות כמו "וגם", "או", "שלילה", "גורר", וגם שני <strong>כמתים</strong> - "לכל" ו"קיים". הכמתים הללו אחראים לחלק לא מבוטל מהסיבוך שיש לתורות בלוגיקה מסדר ראשון. הנה דוגמה פשוטה, ואני מזהיר מראש שאני הולך לשקר בה קצת ולגלות איך שיקרתי רק בסוף: את הטענה "{::nomarkdown}\( t\){:/nomarkdown} הוא פתרון של המשוואה {::nomarkdown}\( ax^{2}+bx+c=0\){:/nomarkdown}" קל לבדוק אם נותנים לנו ליד את הערכים של {::nomarkdown}\( t\){:/nomarkdown} ושל {::nomarkdown}\( a,b,c\){:/nomarkdown}. לעומת זאת, הטענה "<strong>קיים</strong> {::nomarkdown}\( t\){:/nomarkdown} שהוא פתרון של המשוואה {::nomarkdown}\( ax^{2}+bx+c=0\){:/nomarkdown}" היא כבר טענה מורכבת משמעותית יותר, שמצריכה אותנו <strong>להבין</strong> את המשוואה הזו.

איך "מבינים" משוואה כזו? קודם כל צריך להבין מה בכלל ה<strong>הקשר</strong> של המשוואה. האם זו משוואה מעל המספרים הממשיים? מעל המרוכבים? מעל המספרים השלמים בלבד? מודולו 7? האם אנחנו ב-{::nomarkdown}\( p\){:/nomarkdown}-אדיים? על הירח? במאדים? בואו נניח שאנחנו מדברים על המשוואה מעל {::nomarkdown}\( \mathbb{R}\){:/nomarkdown}, כדי שיהיה מעניין. פורמלית, האופן שבו כותבים את הטענה הלוגית שטוענת שקיים פתרון למשוואה הוא פשוט הנוסחה{::nomarkdown}\( \exists x\left(ax^{2}+bx+c=0\right)\){:/nomarkdown}, והשאלה שלנו היא אם ב<strong>מודל</strong> של המספרים הממשיים (שבו פעולות החיבור והכפל הן הפעולות ה"רגילות" על ממשיים) הפסוק הזה הוא בעל ערך אמת. ואיך יודעים דבר כזה? הרי ברור שאי אפשר לעבור על <strong>כל</strong> המספרים הממשיים ולנסות אחד אחד להציב אותם במשוואה, <a href="http://www.gadial.net/2010/11/08/hilberts_hotel/">יש הרבה יותר מדי</a> מהם.

ובכן, קרוב לודאי שרובכם זוכרים משהו על משוואות ריבועיות ויודעים שהתשובה לשאלה תלויה איכשהו בערכים של {::nomarkdown}\( a,b,c\){:/nomarkdown}, שהם "משתנים חופשיים" של הפסוק. עבור הצבות מסויימות של ערכים למשתנים יהיה פתרון למשוואה, ועבור הצבות אחרות - לא. איך יודעים? ובכן, <a href="http://www.gadial.net/2008/01/26/solving_quadratic_equations/">נוסחת השורשים</a> מלמדת אותנו שפתרונות המשוואה {::nomarkdown}\( ax^{2}+bx+c=0\){:/nomarkdown} הם {::nomarkdown}\( \frac{-b\pm\sqrt{b^{2}-4ac}}{2a}\){:/nomarkdown}. הפתרונות הללו עשויים להיות מספרים מרוכבים ולא ממשיים טהורים; מתי זה עשוי לקרות אם {::nomarkdown}\( a,b,c\){:/nomarkdown} הם ממשיים טהורים? ובכן, רק אם {::nomarkdown}\( b^{2}-4ac&lt;0\){:/nomarkdown} ואז הוצאת השורש תחזיר מספר מרוכב (או, למקרה שלא שמעתם על מספרים מרוכבים, היא פשוט תהיה "פעולה לא חוקית" ולכן לא יהיה פתרון - ממשי - למשוואה). אם {::nomarkdown}\( b^{2}-4ac\ge0\){:/nomarkdown} אז בודאות מוחלטת יש פתרון למשוואה (בגלל החשיבות של הביטוי {::nomarkdown}\( b^{2}-4ac\){:/nomarkdown} יש לו שם וסימון מיוחדים: <strong>דיסקרימיננטה</strong>, והוא מסומן ב-{::nomarkdown}\( \Delta\){:/nomarkdown}). זה אומר שהנוסחה {::nomarkdown}\( \exists x\left(ax^{2}+bx+c=0\right)\){:/nomarkdown} שקולה לוגית לנוסחה {::nomarkdown}\( b^{2}-4ac\ge0\){:/nomarkdown}. למה הכוונה ב"שקולה לוגית"? בחרו ערכים קונקרטיים עבור {::nomarkdown}\( a,b,c\){:/nomarkdown}; מובטח לנו שלשתי הנוסחאות יהיה אותו ערך אמת עבור הערכים הללו.

מה ההבדל בין שתי הנוסחאות? ובכן, {::nomarkdown}\( b^{2}-4ac\ge0\){:/nomarkdown} היא נוסחה פשוטה משמעותית יותר מ-{::nomarkdown}\( \exists x\left(ax^{2}+bx+c=0\right)\){:/nomarkdown} כי אין בה כמתים - כדי לבדוק אם היא נכונה או לא, פשוט מבצעים חישוב קצר שכולל את {::nomarkdown}\( a,b,c\){:/nomarkdown}, ואת זה אפשר לעשות חיש קל, בזמן שעבור {::nomarkdown}\( \exists x\left(ax^{2}+bx+c=0\right)\){:/nomarkdown} לא הייתה לנו שום שיטה ישירה לדעת אם היא נכונה או לא. הצלחנו "לחסל" את הכמת שהופיע בנוסחה הזו ולהחליף אותה בנוסחה שקולה, פשוטה יותר, ובכך הפכנו בעייה שנראתה בלתי אפשרית מבחינה חישובית (לבדוק אם יש פתרון למשוואה) לבעיה טריוויאלית מבחינה חישובית. זה, על רגל אחת, כל הרעיון שמאחורי חיסול כמתים.

כמובן שמייד צצות כמה שאלות. הנוסחה {::nomarkdown}\( b^{2}-4ac\ge0\){:/nomarkdown} בכלל לא נראית דומה לנוסחה {::nomarkdown}\( \exists x\left(ax^{2}+bx+c=0\right)\){:/nomarkdown}, אז איך הגענו אליה? האם יש שיטה כללית לחיסול כמתים? האם תמיד אפשר לבצע חיסול כמתים? כמה זה מסובך? התשובה היא שחיסול כמתים הוא עניין <strong>קשה</strong>. לעתים קרובות צריך ידע נוסף כדי לבצע אותו עבור מקרים קונקרטיים, וברוב המקרים אי אפשר לבצע אותו <strong>בכלל</strong>. אבל לפעמים כן אפשר לעשות אותו באופן כללי מאוד - להראות שעבור תורה מסויימת קיים חילוץ כמתים עבור <strong>כל</strong> הנוסחאות (תכף אסביר מה זה בדיוק אומר - זו לא הגדרה טריוויאלית) וכשהפלא הזה קורה, קורים דברים מגניבים למדי. גולת הכותרת שאני חותר אליה (אבל לא אגיע אליה בפוסט הזה) היא ההוכחה ש<strong>אריתמטיקת פרסבורגר</strong> היא כריעה, וההוכחה עוברת דרך חילוץ כמתים. מה זו אריתמטיקת פרסבוגר? זו <strong>כמעט</strong> התורה שעליה חל משפט אי השלמות של גדל (שמוכיח שתורת המספרים <strong>אינה</strong> כריעה), רק בלי כפל. אסביר יותר כשאגיע לשם.

לפני שנעבור לפורמליזם, זמן להסביר איך שיקרתי לכם, ואני בטוח שחלקכם שמו לב לזה. נוסחת השורשים היא נכונה אך ורק כאשר {::nomarkdown}\( a\ne0\){:/nomarkdown}. אם {::nomarkdown}\( a=0\){:/nomarkdown} אז {::nomarkdown}\( ax^{2}+bx+c=0\){:/nomarkdown} היא בכלל משוואה ממעלה ראשונה, והתנאי {::nomarkdown}\( b^{2}-4ac\ge0\){:/nomarkdown} תמיד מתקיים למרות שייתכן שלמשוואה לא יהיה פתרון. מתי ייתכן שאין לה פתרון? ובכן, באופן כללי למשוואה {::nomarkdown}\( bx+c=0\){:/nomarkdown} יש את הפתרון {::nomarkdown}\( x=-\frac{c}{b}\){:/nomarkdown}, אז די בבירור יש לה פתרון תמיד, למעט המקרה שבו {::nomarkdown}\( b=0\){:/nomarkdown} אבל {::nomarkdown}\( c\ne0\){:/nomarkdown}. לכן הנוסחה השקולה האמיתית ל-{::nomarkdown}\( \exists x\left(ax^{2}+bx+c=0\right)\){:/nomarkdown} היא לא {::nomarkdown}\( b^{2}-4ac\ge0\){:/nomarkdown} אלא {::nomarkdown}\( \left(a\ne0\wedge b^{2}-4ac\ge0\right)\vee\left(a=0\wedge\left(b\ne0\vee c=0\right)\right)\){:/nomarkdown}, שהיא יותר גדולה ומסורבלת (ולכן לא הצגתי אותה מייד אלא שיקרתי) אבל גם כן חסרת כמתים.

ועכשיו בואו נעבור להגדרות. כפי שהדוגמה שנתתי רומזת, כשמדברים על חילוץ כמתים תמיד עושים את זה ביחס ל<strong>תורה</strong> ספציפית. מה זו תורה? בואו נזכיר בקצרה. בלוגיקה מסדר ראשון תמיד יש לנו <strong>מילון</strong> שאנחנו עובדים ולפיו ואומר לנו מהם סימני היחסים, הפונקציות והקבועים שבהם אנחנו יכולים להשתמש. למשל, בדוגמה שלעיל, המילון כלל סימני פונקציה עבור חיבור וכפל ({::nomarkdown}\( ax^{2}\){:/nomarkdown}, למשל, הוא קיצור של {::nomarkdown}\( a\cdot x\cdot x\){:/nomarkdown}) וסימן יחס עבור {::nomarkdown}\( \ge\){:/nomarkdown} (וגם עבור {::nomarkdown}\( =\){:/nomarkdown} אבל אני נוהג להניח ש-{::nomarkdown}\( =\){:/nomarkdown} מגיע עם כל תורה מסדר ראשון ומפורש תמיד כ"שווה"). בעזרת הסימונים של המילון והסימונים הלוגיים הסטנדרטיים (למשל {::nomarkdown}\( \wedge\){:/nomarkdown} עבור "וגם", או סימונים עבור משתנים) אפשר לבנות נוסחאות. תורה {::nomarkdown}\( T\){:/nomarkdown} היא בסך הכל אוסף של פסוקים, כש"פסוק" הוא נוסחה בלי משתנים חופשיים, ולכן משהו שעבור כל מבנה אפשרי יש לו ערך אמת או שקר. אה, מה זה מבנה? טוב, זו כבר חזרה די ארוכה... <a href="http://www.gadial.net/2012/06/17/first_order_logic/">יש לי פוסט</a> שמציג את הכל במסודר, ואפשר גם לקרוא בכל ספר לוגיקה סטנדרטי.

עכשיו, אם {::nomarkdown}\( T\){:/nomarkdown} היא תורה ו-{::nomarkdown}\( \varphi\left(\overline{x}\right)\){:/nomarkdown} היא נוסחה שאולי יש בה משתנים חופשיים (אני מסמן ב-{::nomarkdown}\( \overline{x}\){:/nomarkdown} "וקטור של משתנים חופשיים"), אנחנו משתמשים בסימון {::nomarkdown}\( T\models\varphi\left(\overline{x}\right)\){:/nomarkdown} ("{::nomarkdown}\( \varphi\){:/nomarkdown} נובעת לוגית מ-{::nomarkdown}\( T\){:/nomarkdown}") אם לכל מודל {::nomarkdown}\( \mathcal{M}\){:/nomarkdown} שמספק את {::nomarkdown}\( T\){:/nomarkdown}, וכל וקטור של איברים {::nomarkdown}\( \overline{a}\){:/nomarkdown} שנלקחים מתוך {::nomarkdown}\( D^{\mathcal{M}}\){:/nomarkdown}, {::nomarkdown}\( \varphi\left(\overline{a}\right)\){:/nomarkdown} מסתפקת (מקבלת את הערך True). עד כאן, הכל ברור. זה מוביל אותנו להגדרה האולטרה-חשובה הבאה: שתי נוסחאות {::nomarkdown}\( \varphi,\psi\){:/nomarkdown} הן שקולות <strong>מודולו התורה</strong> {::nomarkdown}\( T\){:/nomarkdown}, אם {::nomarkdown}\( T\models\varphi\leftrightarrow\psi\){:/nomarkdown}. כלומר, לכל מודל של {::nomarkdown}\( T\){:/nomarkdown} וכל השמה מתוך המודל למשתנים של {::nomarkdown}\( \varphi,\psi\){:/nomarkdown} (יכולים להיות להם משתנים משותפים וגם משתנים לא משותפים), או ששתי הנוסחאות מסתפקות, או ששתיהן אינן מסתפקות. חשוב מאוד להדגיש שזו אינה שקילות "אבסולוטית" אלא היא מאוד תלויה בתורה {::nomarkdown}\( T\){:/nomarkdown}, שכן התורה היא מעין "מסננת" שקובעת אילו מודלים בכלל רלוונטיים לצורך השקילות של {::nomarkdown}\( \varphi,\psi\){:/nomarkdown}. הנה דוגמה ממש מטופשת להבהרת הנקודה: הנוסחה {::nomarkdown}\( \exists x\left(x^{2}=a\right)\){:/nomarkdown} שקולה לנוסחה {::nomarkdown}\( a=a\){:/nomarkdown} (שהיא נוסחה שתמיד מקבלת את ערך האמת True) כאשר המודל הרלוונטי הוא המספרים המרוכבים עם הפרשנות ה"רגילה"; אבל במודל של המספרים הממשיים, הנוסחה אינה נכונה אם {::nomarkdown}\( a\){:/nomarkdown} הוא שלילי. לכן המודל הוא קריטי כאן.

והנה הגענו להגדרה. לתורה {::nomarkdown}\( T\){:/nomarkdown} יש חיסול כמתים אם לכל נוסחה {::nomarkdown}\( \varphi\){:/nomarkdown} בשפה של התורה קיימת נוסחה {::nomarkdown}\( \psi\){:/nomarkdown} שקולה מודולו {::nomarkdown}\( T\){:/nomarkdown} שהיא חסרת כמתים. אפשר לחדד טיפה את ההגדרה הזו ולהגדיר אוסף של "נוסחאות בסיסיות" שהן עצמן יכולות להכיל כמתים, וחיסול כמתים פירושו יהיה שאפשר לקבל מ-{::nomarkdown}\( \varphi\){:/nomarkdown} נוסחה שקולה שבנויה מתוך הנוסחאות הבסיסיות באמצעות פעולות בוליאניות בלבד ({::nomarkdown}\( \wedge,\vee,\neg,\to,\leftrightarrow\){:/nomarkdown}) ובלי כמתים. לא נצטרך את זה בהמשך, אז מבחינתי "חסר כמתים" זה אכן חסר כמתים. לגמרי.

בואו נתחיל עם קצת עבודה טכנית. ראשית, הסימנים הלוגיים {::nomarkdown}\( \wedge,\vee,\neg,\to,\leftrightarrow\){:/nomarkdown} הם נחמדים אבל רובם מיותרים: אפשר להסתפק ב-{::nomarkdown}\( \wedge,\vee,\neg\){:/nomarkdown} בלבד, כי {::nomarkdown}\( \alpha\to\beta\equiv\left(\neg\alpha\vee\beta\right)\){:/nomarkdown} ו-{::nomarkdown}\( \alpha\leftrightarrow\beta\equiv\left(\alpha\to\beta\right)\wedge\left(\beta\to\alpha\right)\){:/nomarkdown} (למעשה, אפשר גם לוותר על אחד מבין {::nomarkdown}\( \vee,\wedge\){:/nomarkdown} אבל אשתמש בשניהם בהמשך מטעמי נוחות). שנית, גם {::nomarkdown}\( \forall\){:/nomarkdown} מיותר כי {::nomarkdown}\( \forall x\alpha\left(x\right)\equiv\neg\exists x\neg\alpha\left(x\right)\){:/nomarkdown}. לכן מלכתחילה נתעניין בפועל רק בנוסחאות שמורכבות מ-{::nomarkdown}\( \neg,\wedge,\vee,\exists\){:/nomarkdown} ורק עליהן נצטרך להוכיח דברים (מטעמי נוחות אני עדיין אשתמש בסימנים האחרים כשזה מקל עלי, מתוך הבנה שהם בסך הכל סימונים מקוצרים לנוסחאות לעיל).

עכשיו, בדוגמה שלמעלה עיקר האתגר היה לעבור מנוסחה עם כמת "קיים" יחיד לנוסחה בלי כמת כזה בכלל. מסתבר שזה גם האתגר באופן כללי - אם יודעים לטפל רק בכמת "קיים" אחד, אז יש חיסול כמתים. פורמלית, אשתמש במילה "ליטרל" כדי לתאר נוסחה אטומית (כזו שהיא יחס שמופעל על שמות עצם) או שלילה של נוסחה אטומית. אני טוען שאם עבור תורה {::nomarkdown}\( T\){:/nomarkdown} ניתן להמיר כל נוסחה מהצורה {::nomarkdown}\( \exists x\left(\alpha_{1}\wedge\dots\wedge\alpha_{n}\right)\){:/nomarkdown}, כאשר כל {::nomarkdown}\( \alpha\){:/nomarkdown} הוא ליטרל, לנוסחה שקולה חסרת כמתים מודולו {::nomarkdown}\( T\){:/nomarkdown}, אז ל-{::nomarkdown}\( T\){:/nomarkdown} יש חיסול כמתים. ההוכחה של הטענה היא באינדוקציה על מבנה כל הנוסחאות, ובואו נעשה אותה כדי לקבל תחושה עד כמה זה פשוט:

ראשית, אם {::nomarkdown}\( \alpha\){:/nomarkdown} היא נוסחה אטומית, אז אין בה כמתים, ולכן היא מהווה את חיסול הכמתים של עצמה (כמובן ש-{::nomarkdown}\( T\models\alpha\leftrightarrow\alpha\){:/nomarkdown}).

עכשיו, אם {::nomarkdown}\( \alpha=\neg\beta\){:/nomarkdown} כאשר ל-{::nomarkdown}\( \beta\){:/nomarkdown} כבר יש חיסול כמתים, כלומר יש {::nomarkdown}\( \beta^{\prime}\){:/nomarkdown} חסרת כמתים ששקולה ל-{::nomarkdown}\( \beta^{\prime}\){:/nomarkdown}, אז {::nomarkdown}\( \alpha^{\prime}=\neg\beta^{\prime}\){:/nomarkdown} היא נוסחה שקולה חסרת כמתים עבור {::nomarkdown}\( \alpha\){:/nomarkdown}. בדומה, השקול של נוסחה מהצורה {::nomarkdown}\( \alpha\wedge\beta\){:/nomarkdown} הוא הנוסחה {::nomarkdown}\( \alpha^{\prime}\wedge\beta^{\prime}\){:/nomarkdown} כך ש-{::nomarkdown}\( \alpha^{\prime}\){:/nomarkdown} ו-{::nomarkdown}\( \beta^{\prime}\){:/nomarkdown} הם השקולים של {::nomarkdown}\( \alpha,\beta\){:/nomarkdown}.

נשאר לנו לטפל בנוסחה מהצורה {::nomarkdown}\( \exists x\alpha\){:/nomarkdown}, כאשר ל-{::nomarkdown}\( \alpha\){:/nomarkdown} קיימת נוסחה שקולה {::nomarkdown}\( \alpha^{\prime}\){:/nomarkdown} חסרת כמתים (למרות - וזו נקודה מהותית - שב-{::nomarkdown}\( \alpha\){:/nomarkdown} יכולים להיות כמתים). אז {::nomarkdown}\( \exists x\alpha\){:/nomarkdown} שקול ל-{::nomarkdown}\( \exists x\alpha^{\prime}\){:/nomarkdown} (את זה כדאי להוכיח אם לא משוכנעים בכך). עכשיו, {::nomarkdown}\( \alpha^{\prime}\){:/nomarkdown} חסר כמתים, אז אפשר לכתוב אותו בצורה קנונית של פסוק בתחשיב הפסוקים: DNF. כלומר, לכתוב {::nomarkdown}\( \alpha^{\prime}=\bigvee C_{i}\){:/nomarkdown} כך שכל {::nomarkdown}\( C_{i}\){:/nomarkdown} הוא מהצורה {::nomarkdown}\( \left(\alpha_{1}\wedge\dots\wedge\alpha_{n}\right)\){:/nomarkdown} כאשר ה-{::nomarkdown}\( \alpha\){:/nomarkdown} הם ליטרלים (כאן קריטי שהם יהיו ליטרלים ולא "סתם" פסוקים אטומיים - בלי היכולת להשתמש בשלילה זה לא עובד). עכשיו, לא קשה לראות ש-{::nomarkdown}\( \exists x\left(\bigvee C_{i}\right)\){:/nomarkdown} שקול ל-{::nomarkdown}\( \bigvee\exists xC_{i}\){:/nomarkdown}, וכל {::nomarkdown}\( \exists xC_{i}\){:/nomarkdown} הוא מהצורה {::nomarkdown}\( \exists x\left(\alpha_{1}\wedge\dots\wedge\alpha_{n}\right)\){:/nomarkdown} שעליה הנחנו שאנחנו יודעים למצוא נוסחה שקולה חסרת כמתים, כך שזה מסיים את ההוכחה. נקודה שיש לתת עליה את הדעת היא שפסוק ה-DNF ששקול ל-{::nomarkdown}\( \alpha^{\prime}\){:/nomarkdown} עשוי להיות גדול לאין שיעור יותר מ-{::nomarkdown}\( \alpha^{\prime}\){:/nomarkdown}, וזה בעייתי מאוד למי שמתעניינים ב<strong>סיבוכיות</strong> של הליך חיסול הכמתים (כי יש לזה השפעה ישירה על השאלה עד כמה נוכל להשתמש בחיסול כמתים בפועל) אבל אני לא אומר על זה כמעט כלום בינתיים.

סיכום ביניים: כדי להוכיח שלתורה יש חיסול כמתים, מספיק לדעת לחסל כמת אחד. הגיע הזמן לראות דוגמה של איך עושים את זה בפועל.

התורה שאציג עשויה להיראות מלאכותית ממבט ראשון, אבל היא לא - היא מגניבה ומעניינת. תתביישו לכם שהשמצתם אותה! זו התורה של סדר צפוף לינארי בלי נקודות קצה. מה זה אומר? ראשית, שהמילון שלנו כולל סימן יחס יחיד: {::nomarkdown}\( &lt;\){:/nomarkdown}. אין קבועים ואין פונקציות. התורה {::nomarkdown}\( T\){:/nomarkdown} כוללת פסוקים שאומרים ש-{::nomarkdown}\( &lt;\){:/nomarkdown} הוא יחס סדר לינארי, שאין נקודות קצה ליחס הסדר, ושהוא צפוף (כלומר, בין כל שני איברים יש עוד אחד). הנה איך כותבים את זה פורמלית:
<ol>
	<li>{::nomarkdown}\( \forall x\forall y\forall z\left(x&lt;y\wedge y&lt;z\to x&lt;z\right)\){:/nomarkdown} (טרנזיטיביות היחס {::nomarkdown}\( &lt;\){:/nomarkdown})</li>
	<li>{::nomarkdown}\( \forall x\neg\left(x&lt;x\right)\){:/nomarkdown} (אי-רפלקסיביות היחס).</li>
	<li>{::nomarkdown}\( \forall x\forall y\left(x=y\vee x&lt;y\vee y&lt;x\right)\){:/nomarkdown} (לינאריות היחס - אפשר להשוות כל שני איברים).</li>
	<li>{::nomarkdown}\( \forall x\forall y\left(x&lt;y\to\exists z\left(x&lt;z\wedge z&lt;y\right)\right)\){:/nomarkdown} (צפיפות היחס - אם {::nomarkdown}\( x&lt;y\){:/nomarkdown} אז יש ביניהם איבר).</li>
	<li>{::nomarkdown}\( \forall x\exists y\exists z\left(y&lt;x\wedge x&lt;z\right)\){:/nomarkdown} (אין נקודות קצה: לכל {::nomarkdown}\( x\){:/nomarkdown} קיים איבר גדול ממנו ואיבר קטן ממנו).</li>
</ol>
אילו מודלים אנחנו מכירים לתורה הזו? ובכן, יחס הסדר על המספרים הטבעיים הוא בוודאי לא טוב כי 0 היא נקודת קצה; גם על השלמים הוא לא טוב כי הוא לא צפוף (אין כלום בין 0 ו-1, למשל). דוגמה טובה אחת למודל של התורה הזו היא המספרים הרציונליים {::nomarkdown}\( \mathbb{Q}\){:/nomarkdown} עם יחס הסדר הרגיל, ודוגמה טובה אחרת היא המספרים הממשיים {::nomarkdown}\( \mathbb{R}\){:/nomarkdown} עם יחס הסדר הרגיל (לעומת זאת המרוכבים {::nomarkdown}\( \mathbb{C}\){:/nomarkdown} אינם דוגמה טובה כי אין עליהם יחס סדר לינארי טבעי).

בואו נעבור להוכיח שלתורה הזו יש חילוץ כמתים. מילת אזהרה קטנה מראש: ההוכחה היא מאוד פשוטה, אבל היא תרגיש טיפה טכנית, וקרוב לודאי שלא תרגישו שאתם מקבלים תובנה "כללית" חזקה מדי על איך עושים חיסול כמתים באופן כללי. זה בגלל שזהו טבע הדברים כאן - כל תורה היא סיפור בפני עצמו. עדיין, יש עקרונות בסיס דומים שהדוגמה הנוכחית ממחישה יפה.

אז מה אנחנו רוצים לעשות? לקחת נוסחה מהצורה {::nomarkdown}\( \exists x\left(\alpha_{1}\wedge\dots\wedge\alpha_{n}\right)\){:/nomarkdown} כאשר כל {::nomarkdown}\( \alpha\){:/nomarkdown} הוא ליטרל, ולהמיר אותה למשהו שקול מודולו {::nomarkdown}\( T\){:/nomarkdown} ללא כמתים. ראשית כל, מהו פסוק אטומי בשפה של התורה {::nomarkdown}\( T\){:/nomarkdown}? יש לנו רק שני סימני יחס ואין בכלל סימני קבועים או פונקציות, אז פסוק אטומי חייב להיות מאוד פשוט: או {::nomarkdown}\( x&lt;y\){:/nomarkdown} או {::nomarkdown}\( x=y\){:/nomarkdown}, עבור שני משתנים {::nomarkdown}\( x,y\){:/nomarkdown} כלשהם. לכן כל {::nomarkdown}\( \alpha\){:/nomarkdown} הוא מאחת מארבע צורות אפשריות: {::nomarkdown}\( x&lt;y\){:/nomarkdown} או {::nomarkdown}\( x=y\){:/nomarkdown} או {::nomarkdown}\( \neg\left(x&lt;y\right)\){:/nomarkdown} או {::nomarkdown}\( \neg\left(x=y\right)\){:/nomarkdown}.

נתחיל מכך שאפשר להיפטר מהשלילות. שימו לב ש-{::nomarkdown}\( \neg\left(x&lt;y\right)\){:/nomarkdown} שקול מודולו {::nomarkdown}\( T\){:/nomarkdown} ל-{::nomarkdown}\( \left(x=y\vee y&lt;x\right)\){:/nomarkdown}. כאן ה"מודולו {::nomarkdown}\( T\){:/nomarkdown}" קריטי, כי השקילות הזו נובעת מאקסיומה 3 של {::nomarkdown}\( T\){:/nomarkdown} ובלעדיה היא פשוט לא נכונה. בדומה, {::nomarkdown}\( \neg\left(x=y\right)\){:/nomarkdown} שקול מודולו {::nomarkdown}\( T\){:/nomarkdown} ל-{::nomarkdown}\( \left(x&lt;y\vee y&lt;x\right)\){:/nomarkdown}, גם כן מאקסיומה 3. שימו לב שכאן כבר השתמשנו באופן חזק בפרטים הספציפיים הן של השפה שלנו, והן של התורה {::nomarkdown}\( T\){:/nomarkdown}.

הבעיה היא שאמנם נפטרנו מהשלילות, אבל במחיר של החלפת ה-{::nomarkdown}\( \alpha\){:/nomarkdown}-ות שלנו, שהיו נוסחאות אטומיות או שלילות שלהן, בנוסחאות שכוללות {::nomarkdown}\( \vee\){:/nomarkdown}-ים. פורמלית, קיבלנו CNF שהוא <strong>מונוטוני</strong>, כלומר אין בו ליטרלים שליליים (השם "מונוטוני" מגיע מכך שאם ניקח השמה מסויימת לפסוק ונחליף בה 0 ל-1, הערך של הפסוק יכול רק להשתנות מ-0 ל-1 ולא ההפך). מה שנחמד ב-CNF-ים כאלו הוא שניתן להמיר אותם ב-DNF-ים מונוטוניים (איך? ובכן, לכל השמה שמספקת את הפסוק בונים פסוקית DNF מהצורה {::nomarkdown}\( \left(x_{1}\wedge\dots\wedge x_{n}\right)\){:/nomarkdown} כאשר {::nomarkdown}\( x_{1},\dots,x_{n}\){:/nomarkdown} הם בדיוק המשתנים שמקבלים 1 בהשמה המספקת - בדקו שזה עובד!). לכן נקבל בסופו של דבר {::nomarkdown}\( \bigvee\){:/nomarkdown} של נוסחאות מהצורה {::nomarkdown}\( \exists x\left(\alpha_{1}\wedge\dots\wedge\alpha_{n}\right)\){:/nomarkdown} כאשר הפעם מובטח לנו שכל הליטרלים {::nomarkdown}\( \alpha\){:/nomarkdown} הם ללא שלילה, כלומר או מהצורה {::nomarkdown}\( x&lt;y\){:/nomarkdown} או מהצורה {::nomarkdown}\( x=y\){:/nomarkdown}. כל שנותר לעשות הוא לחסל את הכמת בנוסחאות כאלו.

עכשיו, אם {::nomarkdown}\( \alpha_{1}\){:/nomarkdown} שפשוט לא מכילה את המשתנה {::nomarkdown}\( x\){:/nomarkdown}, אז הנוסחה {::nomarkdown}\( \exists x\left(\alpha_{1}\wedge\dots\wedge\alpha_{n}\right)\){:/nomarkdown} שקולה לנוסחה {::nomarkdown}\( \exists x\left(\alpha_{2}\wedge\dots\wedge\alpha_{n}\right)\wedge\alpha_{1}\){:/nomarkdown}, ובאופן דומה אפשר יהיה להוציא מהסוגריים כל {::nomarkdown}\( \alpha\){:/nomarkdown} שלא מכילה את {::nomarkdown}\( x\){:/nomarkdown}. בואו נעבור לדבר על {::nomarkdown}\( \alpha\){:/nomarkdown}-ות שכן כוללות את {::nomarkdown}\( x\){:/nomarkdown}. ראשית בואו נטפל בכאלו שהן שוויון. אם {::nomarkdown}\( \alpha\){:/nomarkdown} כלשהי היא מהצורה {::nomarkdown}\( x=x\){:/nomarkdown} אז היא תמיד נכונה, בלי תלות ב-{::nomarkdown}\( x\){:/nomarkdown}, ואפשר פשוט להסיר אותה (אם כל הנוסחה "נעלמת" בגלל הסרות כאלו אפשר להחליף אותה בנוסחה {::nomarkdown}\( z=z\){:/nomarkdown} עבור משתנה {::nomarkdown}\( z\){:/nomarkdown} כלשהו שלא יהיה מכומת). מה עוד אפשרי? {::nomarkdown}\( x=y\){:/nomarkdown} עבור משתנה {::nomarkdown}\( y\){:/nomarkdown} כלשהו שאיננו {::nomarkdown}\( x\){:/nomarkdown}, כלומר איננו מכומת. זה מקרה משמח במיוחד, כי פירוש הדבר הוא שאפשר למחוק את {::nomarkdown}\( x\){:/nomarkdown} מכל ה-{::nomarkdown}\( \alpha\){:/nomarkdown}-ות ולהחליף אותו ב-{::nomarkdown}\( y\){:/nomarkdown} וחסל.

הנה דוגמה: נניח שיש לנו את הנוסחה {::nomarkdown}\( \exists x\left(\left(x=y\right)\wedge\left(x&lt;z\right)\wedge\left(z&lt;w\right)\right)\){:/nomarkdown}; אפשר להחליף אותה בנוסחה {::nomarkdown}\( \left(y=y\right)\wedge\left(y&lt;z\right)\wedge\left(z&lt;w\right)\){:/nomarkdown} ולקבל משהו חסר כמתים ששקול לנוסחה המקורית, ואז סיימנו. לכן נשאר רק לטפל במקרים של {::nomarkdown}\( \alpha\){:/nomarkdown}-ות שהן יחס סדר (התעלול הזה, של "אם המשתנה המכומת שווה למשתנה לא מכומת אז הגיע חזון אחרית הימים" הוא כן משהו סטנדרטי שחוזר על עצמו גם בחיסולי כמתים אחרים).

אז סיימנו עם ליטרלים של {::nomarkdown}\( =\){:/nomarkdown}, ונשאר לטפל באלו של {::nomarkdown}\( &lt;\){:/nomarkdown}, כלומר ליטרלים מהצורה {::nomarkdown}\( x&lt;y\){:/nomarkdown} או {::nomarkdown}\( z&lt;x\){:/nomarkdown}, או {::nomarkdown}\( x&lt;x\){:/nomarkdown}, אבל מכיוון שהליטרל האחרון אף פעם לא מסתפק במודל {::nomarkdown}\( T\){:/nomarkdown} (בגלל אקסיומה 2), אם הוא מופיע אפשר להחליף את כל הנוסחה פשוט ב-{::nomarkdown}\( z&lt;z\){:/nomarkdown} (שהוא תמיד False) וחסל. אם כן, אפשר לפצל את הליטרלים שלנו לשתי קבוצות - אלו של "משהו קטן מ-{::nomarkdown}\( x\){:/nomarkdown}" ואלו של "משהו גדול מ-{::nomarkdown}\( x\){:/nomarkdown}". כלומר, הנוסחה שלנו היא {::nomarkdown}\( \exists x\left(\bigwedge_{i}\left(z_{i}&lt;x\right)\wedge\bigwedge_{j}\left(x&lt;y_{j}\right)\right)\){:/nomarkdown}. עצרו לשניה וחשבו איך אפשר לחסל את הכמת בנוסחה הזו. זה כבר קל מספיק כדי שאפשר יהיה לראות את זה בעיניים.

התשובה היא זו:

{::nomarkdown}\( \bigwedge_{i,j}\left(z_{i}&lt;y_{j}\right)\){:/nomarkdown}. כלומר, לכל זוג של משתנה {::nomarkdown}\( z_{i}\){:/nomarkdown} ומשתנה {::nomarkdown}\( y_{j}\){:/nomarkdown} שהופיעו בנוסחה המקורית, אנו כותבים את אי השוויון {::nomarkdown}\( z_{i}&lt;y_{j}\){:/nomarkdown}. למה הנוסחה הזו שקולה לנוסחה המקורית? או, כאן אנחנו משתמשים באופן חזק בתכונות של הסדר. כיוון אחד הוא טריוויאלי: אם {::nomarkdown}\( \exists x\left(\bigwedge_{i}\left(z_{i}&lt;x\right)\wedge\bigwedge_{j}\left(x&lt;y_{j}\right)\right)\){:/nomarkdown} הסתפקה, ברור שגם {::nomarkdown}\( \bigwedge_{i,j}\left(z_{i}&lt;y_{j}\right)\){:/nomarkdown} תסתפקת בגלל טרנזיטיביות יחס הסדר (אקסיומה 1), אבל בכיוון השני הייתה עשויה להיות בעיה, בתיאוריה, אם ה-{::nomarkdown}\( z_{i}\){:/nomarkdown} הגדול ביותר היה "צמוד" ל-{::nomarkdown}\( y_{j}\){:/nomarkdown} הקטן ביותר. למשל, אם המודל שלנו היה הטבעיים, {::nomarkdown}\( z_{i}=5\){:/nomarkdown} ו-{::nomarkdown}\( y_{j}=6\){:/nomarkdown}. אלא שהמודל של הטבעיים הוא בלתי אפשרי שכן הסדר הוא <strong>צפוף</strong> (אקסיומה 4), ולכן תמיד אפשר יהיה למצוא {::nomarkdown}\( x\){:/nomarkdown} בין ה-{::nomarkdown}\( z_{i}\){:/nomarkdown} הגדול ביותר וה-{::nomarkdown}\( y_{j}\){:/nomarkdown} הקטן ביותר.

רגע, רגע, רגע! איפה השתמשנו באקסיומה 5, שאומרות שאין נקודות קצה? היא הכרחית לגמרי, אבל באופן קצת עקיף ומחוכם. נניח שהנוסחה שאנחנו רוצים לחסל בה את הכמת היא פשוטה: {::nomarkdown}\( \exists x\left(x&lt;y\right)\){:/nomarkdown}, כלומר אין לנו כאן ליטרלים משני הסוגים (גם {::nomarkdown}\( x&lt;y\){:/nomarkdown} וגם {::nomarkdown}\( z&lt;x\){:/nomarkdown}). במה אנחנו אמורים להחליף אותה? ובכן, ב-{::nomarkdown}\( \bigwedge\){:/nomarkdown} "ריק", שהוא פשוט True (אז אפשר לשים את הנוסחה {::nomarkdown}\( z=z\){:/nomarkdown}). אבל זה נכון רק אם {::nomarkdown}\( \exists x\left(x&lt;y\right)\){:/nomarkdown} היא אכן True; וזה כך רק אם אין בסדר שלנו נקודות קצה, כי אם {::nomarkdown}\( y\){:/nomarkdown} היא נקודת הקצה השמאלית - האיבר הקטן ביותר בסדר - אז {::nomarkdown}\( x\){:/nomarkdown} שמקיים {::nomarkdown}\( x&lt;y\){:/nomarkdown} לא קיים. אם כן, כל חמש האקסיומות נחוצות לנו כאן. זה לא מוכיח, כמובן, שאי אפשר לקבל חיסול כמתים אם אני מסיר את אחת מהאקסיומות; רק ששיטת ההוכחה שבה השתמשתי כאן לא תעבוד.

עכשיו, בואו נקטוף את הפירות. יש שתי מסקנות מיידיות שנובעות מכך שיש חיסול כמתים עבור {::nomarkdown}\( T\){:/nomarkdown}: האחד הוא ש-{::nomarkdown}\( T\){:/nomarkdown} היא שלמה, והשני הוא ש-{::nomarkdown}\( T\){:/nomarkdown} היא כריעה. נתחיל משלמות. שלמות פירושה שכל פסוק {::nomarkdown}\( \varphi\){:/nomarkdown} מקיים ש-{::nomarkdown}\( T\models\varphi\){:/nomarkdown} או ש-{::nomarkdown}\( T\models\neg\varphi\){:/nomarkdown}. עכשיו, אם יש לנו פסוק {::nomarkdown}\( \varphi\){:/nomarkdown} (כלומר, אין בו משתנים חופשיים), אז אחרי חיסול כמתים נקבל ממנו נוסחה {::nomarkdown}\( \psi\){:/nomarkdown} בלי כמתים, ושהמופעים היחידים של משתנים בה הם מהצורה {::nomarkdown}\( z=z\){:/nomarkdown} או {::nomarkdown}\( z&lt;z\){:/nomarkdown} (שהם פשוט דרך עקומה לציין את הנוסחאות הקבועות True ו-False). כלומר, ערך האמת של {::nomarkdown}\( \psi\){:/nomarkdown} בכלל לא תלוי במודל, ולכן {::nomarkdown}\( T\models\psi\){:/nomarkdown} או {::nomarkdown}\( T\models\neg\psi\){:/nomarkdown} (או שכל המודלים של {::nomarkdown}\( T\){:/nomarkdown} מספקים את {::nomarkdown}\( \psi\){:/nomarkdown}, או שכולם מספקים את {::nomarkdown}\( \neg\psi\){:/nomarkdown}), ומכיוון ש-{::nomarkdown}\( \psi\){:/nomarkdown} שקול ל-{::nomarkdown}\( \varphi\){:/nomarkdown} מודולו {::nomarkdown}\( T\){:/nomarkdown} קיבלנו את מה שרצינו ולכן {::nomarkdown}\( T\){:/nomarkdown} שלמה. זה די נחמד לראות תורה שלמה שהיא גם לא טריוויאלית לחלוטין; בפעם הבאה שמישהו יגיד לכם שמשפטי אי השלמות של גדל מוכיחים שכל תורה מתמטית היא לא שלמה, תדעו מה לענות לו!

נעבור לכריעות. לומר ש-{::nomarkdown}\( T\){:/nomarkdown} כריעה פירושו שלכל פסוק {::nomarkdown}\( \varphi\){:/nomarkdown} ניתן לקבוע <strong>אלגוריתמית</strong> אם הוא יכיח מ-{::nomarkdown}\( T\){:/nomarkdown} או לא, מה ששקול לכך שהוא נובע לוגית מ-{::nomarkdown}\( T\){:/nomarkdown} (בגלל <a href="http://www.gadial.net/2013/02/25/godel_completeness_proof_1/">משפט השלמות של גדל</a>). כאן האלגוריתם די מובן מאליו: נתון {::nomarkdown}\( \varphi\){:/nomarkdown}? בנו ממנו את הנוסחה {::nomarkdown}\( \psi\){:/nomarkdown} חסרת הכמתים השקולה ותבדקו אם היא True או False. סוף הסיפור. את הליך הבניה תיארתי קודם - הוא היה קונסטרוקטיבי למהדרין (אבל כלל כמה שלבים לא יעילים של מציאת DNF של דברים - זה חשוב כשנכנסים לשאלות של סיבוכיות, אבל אני לא עושה את זה הפעם).

מה צפוי לנו בהמשך? ובכן, עוד חיסולי כמתים, אבל לתורות חדשות ומרגשות!
