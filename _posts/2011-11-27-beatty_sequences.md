---
id: 1427
title: "סדרות ביטי ומלכות שחמט"
date: 2011-11-27 11:58:48
layout: post
categories: 
  - משחקים וחידות מתמטיות
  - תורת המספרים
  - תורת המשחקים
tags: 
  - הוכחות יפות
  - המשחק של וויטהוף
  - יחס הזהב
  - סדרת ביטי
---
אני רוצה לקחת הפסקה קצרה בפוסטים על אלגברה לינארית כדי להציג חידה פשוטה וחביבה עם פתרון מקסים ששמעתי בהרצאה של יובל גינוסר, ועל הדרך להציג מושג מתמטי נחמד - סדרות ביטי (Beatty, על שם המתמטיקאי סמואל ביטי). נתחיל מהחידה: אליס ובוב משחקים משחק שבו יש לוח משבצות מלבני (למשל, לוח שחמט - אבל לא הכרחי) ועליו מלכה אחת. כל שחקן בתורו מזיז את המלכה או שמאלה (כמה משבצות שהוא רוצה), או למטה (כמה משבצות שהוא רוצה) או באלכסון שמאלה-למטה (כמה משבצות שהוא רוצה). מנצח מי שמגיע לפינה השמאלית-תחתונה של הלוח. החידה היא - נניח שהמלכה כרגע ב-{::nomarkdown}\( \left(a,b\right)\){:/nomarkdown}; מי מנצח?

המשחק הזה, שנקרא "המשחק של וויטהוף" על שם המתמטיקאי שניתח אותו, הוא דוגמה למשחק עם ידיעה שלמה (כלומר, בלי מזל או מידע שמוסתר מהשחקנים) ובלי תוצאת תיקו; משפט בסיסי בתורת המשחקים - משפט צרמלו - מבטיח שבמקרה זה, אחד מהשחקנים יכול בודאות להבטיח ניצחון על ידי כך שישחק נכון. כלומר, לכל אסטרטגיה שבה ינקוט השחקן השני, השחקן הראשון עדיין יוכל לנצח. השאלה היא רק מה מאפיין את הזוגות {::nomarkdown}\( \left(a,b\right)\){:/nomarkdown} קואורדינטות שאם המלכה נמצאת בהן, אז השחקן שתורו כעת לשחק הפסיד בודאות.

בואו נניח שהמשבצת השמאלית-תחתונה היא {::nomarkdown}\( \left(0,0\right)\){:/nomarkdown} כי אז הניתוח יצא יפה יותר. בנוסף, בואו נסכים גם ש-{::nomarkdown}\( \left(0,0\right)\){:/nomarkdown} נחשבת למשבצת של הפסד (אפשר להגדיר ש"המפסיד הוא מי שכבר לא יכול לזוז" ואז זה ברור יותר). עכשיו בואו וננסה להבין אילו משבצות הן של ניצחון: ברור ש-{::nomarkdown}\( \left(0,1\right),\left(1,0\right),\left(1,1\right)\){:/nomarkdown} כולן משבצות מנצחות, כי מכולן אפשר להגיע בצעד אחד אל {::nomarkdown}\( \left(0,0\right)\){:/nomarkdown}. מה עם {::nomarkdown}\( \left(1,2\right)\){:/nomarkdown}? ובכן, זו משבצת של הפסד, כי אם זזים בשורה אפשר להגיע רק אל {::nomarkdown}\( \left(1,1\right)\){:/nomarkdown} או {::nomarkdown}\( \left(1,0\right)\){:/nomarkdown} שמבטיחות ניצחון ליריב; ואם זזים בעמודה מגיעים אל {::nomarkdown}\( \left(0,2\right)\){:/nomarkdown} שגם היא משבצת ניצחון. בגלל הסימטריה של המשחק גם {::nomarkdown}\( \left(2,1\right)\){:/nomarkdown} היא משבצת הפסד. בגלל אותה סימטריה נרצה למצוא רק משבצות הפסד {::nomarkdown}\( \left(i,j\right)\){:/nomarkdown} שבהן {::nomarkdown}\( i&lt;j\){:/nomarkdown}. משבצות שבהן {::nomarkdown}\( i&gt;j\){:/nomarkdown} הן לא מעניינות כי כדי להבין מה קורה בהן מספיק להבין מה קורה ב-{::nomarkdown}\( \left(j,i\right)\){:/nomarkdown}; ואם {::nomarkdown}\( i=j\){:/nomarkdown} זה הכי לא מעניין כי ממשבצת כזו אפשר להגיע (באלכסון) ישר אל {::nomarkdown}\( \left(0,0\right)\){:/nomarkdown} ולכן זו תמיד משבצת נצחון.

עכשיו {::nomarkdown}\( \left(2,3\right)\){:/nomarkdown} היא משבצת ניצחון, כי ממנה אפשר לזוז אל {::nomarkdown}\( \left(1,2\right)\){:/nomarkdown} שתבטיח שהשחקן השני יפסיד. ומה עם {::nomarkdown}\( \left(2,4\right)\){:/nomarkdown}? אותו סיפור. בעצם, כל משבצת בשורה {::nomarkdown}\( 2\){:/nomarkdown} עם עמודה שגדולה מ-1, מובטח לה שתהיה משבצת ניצחון. לכן בשורה 2 לא נמצא אף משבצת הפסד "מעניינת" (יש את {::nomarkdown}\( \left(2,1\right)\){:/nomarkdown} אבל היא לא מעניינת כי הקואורדינטה הראשונה גדולה מהשניה). לכן נעבור לשורה 3. המשבצת המעניינת הראשונה כאן היא {::nomarkdown}\( \left(3,4\right)\){:/nomarkdown}; ממנה אפשר להגיע בתנועה באלכסון אל {::nomarkdown}\( \left(1,2\right)\){:/nomarkdown} שהיא משבצת הפסד, ולכן {::nomarkdown}\( \left(3,4\right)\){:/nomarkdown} היא משבצת נצחון. לעומת זאת מ-{::nomarkdown}\( \left(3,5\right)\){:/nomarkdown} כל צעד שנעשה יוביל אותנו למשבצת נצחון, ולכן {::nomarkdown}\( \left(3,5\right)\){:/nomarkdown} היא משבצת הפסד. כאן אפשר לעצור לרגע ולנסות ולראות את התמונה הגדולה.

כדי שמשבצת תהיה משבצת הפסד, הכרחי שלא יהיה ניתן להגיע ממנה אל אף משבצת הפסד אחרת. במילים אחרות, בכל שורה, בכל עמודה ובכל אלכסון (שהולך לכיוון שמאל-למטה) יש רק משבצת הפסד אחת. אנחנו בעצם שואלים את עצמנו - לכל שורה {::nomarkdown}\( i\){:/nomarkdown}, איפה משבצת ההפסד בשורה זו?

העובדה ש-{::nomarkdown}\( \left(1,2\right)\){:/nomarkdown} היא משבצת הפסד אומרת ש<strong>כל</strong> משבצת מהצורה {::nomarkdown}\( \left(i,i+1\right)\){:/nomarkdown}, כאשר {::nomarkdown}\( i&gt;1\){:/nomarkdown}, לא יכולה להיות משבצת הפסד. בדומה, {::nomarkdown}\( \left(3,5\right)\){:/nomarkdown} גורמת לכך ש-{::nomarkdown}\( \left(i,i+2\right)\){:/nomarkdown} לא תהיה משבצת הפסד עבור {::nomarkdown}\( i&gt;3\){:/nomarkdown}. מכאן כבר אפשר לנחש את האופן הכללי שבו בונים את סדרת משבצות ההפסד: בכל צעד בוחרים את מספר השורה הקטן ביותר שטרם הופיעה לא כשורה ולא כעמודה בתוך משבצת הפסד קודם (למשל, מ-{::nomarkdown}\( \left(1,2\right)\){:/nomarkdown} עברנו לטפל בשורה {::nomarkdown}\( 3\){:/nomarkdown} ולא בשורה 2 כי שורה 2 כבר טופלה בכך ש-{::nomarkdown}\( \left(1,2\right)\){:/nomarkdown} מראה לנו שגם {::nomarkdown}\( \left(2,1\right)\){:/nomarkdown} היא משבצת הפסד), ולמספר השורה הזה מצרפים את מספר העמודה שגדול ממנו ב-{::nomarkdown}\( k\){:/nomarkdown}, כאשר {::nomarkdown}\( k\){:/nomarkdown} הוא מספר משבצות ההפסד שמצאנו עד כה.

אם תריצות את ה"אלגוריתם" הזה, תראו שאתם מקבלים את הסדרה הבאה:

{::nomarkdown}\( \left(0,0\right),\left(1,2\right),\left(3,5\right),\left(4,7\right),\left(6,10\right),\left(8,13\right),\left(9,15\right),\left(11,18\right),\dots\){:/nomarkdown}.

האיבר הראשון הוא חריג אז בואו נשכח ממנו ונשים לב לתכונה המעניינת של יתר האיברים בסדרה. אפשר לפרק את הקואורדינטות למרכיביהן ולקבל שתי סדרות - סדרת אינדקסי השורות וסדרת אינדקסי העמודות, שאסמן כ-{::nomarkdown}\( a_{n},b_{n}\){:/nomarkdown} - שנראות כך:

{::nomarkdown}\( 1,3,4,6,8,9,11,\dots\){:/nomarkdown}

{::nomarkdown}\( 2,5,7,10,13,15,18,\dots\){:/nomarkdown}

האם יש חוקיות כאן? במבט ראשון קצת קשה לראות כזו, אבל שני דברים צצים לעין כמעט מייד - ראשית, ששתי הסדרות הן <strong>זרות</strong> - אין איבר ששייך לשתיהן. שנית, הן מכסות את כל הטבעיים, כלומר כל מספר טבעי ייכנס אליהן. זה לא באמת מפתיע אם חושבים על אופן הבניה שלהן: הכלל שלפיו בוחרים את המספר החדש להכניס לסדרה הראשונה הוא "בחר את המספר הקטן ביותר שטרם הופיע", מה שמבטיח שנתפוס את כולם מתישהו; קצת יותר טריקי להראות שאין איבר שמופיע בשני הסדרות גם יחד, אבל ההגיון פה גם די ברור - על פי הבניה, {::nomarkdown}\( a_{n}&lt;b_{n}\){:/nomarkdown} תמיד, ולכן אם יש שוויון הוא של {::nomarkdown}\( a_{n}=b_{m}\){:/nomarkdown} עם {::nomarkdown}\( m&lt;n\){:/nomarkdown}, אבל {::nomarkdown}\( a_{n}\){:/nomarkdown} נבחר רק מקרב מספרים ש<strong>לא</strong> הופיעו עד כה, ומכיוון ש-{::nomarkdown}\( b_{m}\){:/nomarkdown} כבר הופיע לפני השלב {::nomarkdown}\( n\){:/nomarkdown}, אין סיכוי ש-{::nomarkdown}\( a_{n}=b_{m}\){:/nomarkdown}.

התכונה הזו של הסדרות עשויה להקפיץ פעמון אזעקה בראש של מי שמכיר את המושג של <strong>סדרות ביטי</strong>, שהן המושג המרכזי שאני רוצה להציג בפוסט הזה. אז הבה ונשכח לבינתיים מהמשחק (רק אעיר לסיום שלמרות שהצגנו את המשחק עם מלכה ולוח, אם תחשבו קצת תראו שהוא וריאציה על מיודענו <a href="http://www.gadial.net/?p=1069">המשחק נים</a>, עם השינוי בכללים לפיו אפשר לקחת משתי הערימות בו זמנית את אותו מספר גפרורים), אבל עוד נשוב אליו בהמשך.

סדרת ביטי של מספר אי רציונלי {::nomarkdown}\( a\){:/nomarkdown} היא פשוט סדרת הכפולות שלו, כשהיא מעוגלת למטה. כלומר, זו הסדרה {::nomarkdown}\( \left\lfloor a\right\rfloor ,\left\lfloor 2a\right\rfloor ,\left\lfloor 3a\right\rfloor ,\dots\){:/nomarkdown}, כשהקווים מסמנים כאן את פונקציית הערך השלם התחתון - {::nomarkdown}\( \left\lfloor x\right\rfloor \){:/nomarkdown} הוא המספר הטבעי הגדול ביותר שקטן או שווה ל-{::nomarkdown}\( x\){:/nomarkdown}. אפשר כמובן לדבר על סדרה דומה גם עבור {::nomarkdown}\( a\){:/nomarkdown} רציונלי, אבל אז לא יתקיים המשפט המעניין שאני רוצה לדבר עליו כאן - אם {::nomarkdown}\( a\){:/nomarkdown} אי רציונלי אז קיים אי רציונלי אחר {::nomarkdown}\( b\){:/nomarkdown} כך שסדרות הביטי שמתאימות ל-{::nomarkdown}\( a,b\){:/nomarkdown} - הבה ונסמן אותן ב-{::nomarkdown}\( a_{n},b_{n}\){:/nomarkdown} - הן זרות ומשלימות (אין להן איבר משותף, והן מכסות את כל הטבעיים). בואו ונוכיח את המשפט הזה.

ראשית, מי אותו {::nomarkdown}\( b\){:/nomarkdown} מסתורי יכול להיות? הנה שיקול יפה שנותן לנו רמז: סדרת הביטי שמתאימה ל-{::nomarkdown}\( a\){:/nomarkdown} תופסת בערך {::nomarkdown}\( \frac{1}{a}\){:/nomarkdown} מבין כל הטבעיים. בצורה קצת יותר פורמלית אפשר לדבר על {::nomarkdown}\( \lim_{n\to\infty}\frac{\left\|\left\{ a_{1},\dots,a_{n}\right\} \cap\left\{ 1,\dots,n\right\} \right\|}{n}\){:/nomarkdown} ולהראות שהוא שווה ממש ל-{::nomarkdown}\( \frac{1}{a}\){:/nomarkdown}. אם כך, כדי ש-{::nomarkdown}\( b_{n}\){:/nomarkdown} תהיה סדרה משלימה, היא צריכה לתפוס את כל יתר הטבעיים, כלומר צריך שיתקיים {::nomarkdown}\( \frac{1}{a}+\frac{1}{b}=1\){:/nomarkdown}. קצת חילוץ אלגברי ומקבלים {::nomarkdown}\( b=\frac{a}{a-1}\){:/nomarkdown}.

כעת צריך להוכיח ש-{::nomarkdown}\( b\){:/nomarkdown} הזה "עובד". ההוכחות הסטנדרטיות מערבות חישובים לא מורכבים במיוחד - אבל עדיין, הן לא כיפיות כל כך. אני רוצה ללכת עם ההוכחה שיש ב<a href="http://arxiv.org/abs/1103.5198">מאמר</a> של גינוסר ויונה שהיא מאוד ציורית ויפה (אם כי אפשר לטעון שלא ריגורוזית לחלוטין, אבל היי - אני לא מנסה להיות מדויק).

הרעיון הוא כזה: דמיינו אצטדיון בצורת מעגל, שהיקפו הוא בדיוק 1. כעת, מהנקודה הצפונית ביותר באצטדיון, שנסמן בתור ה"ראשית" {::nomarkdown}\( O\){:/nomarkdown}, יוצאים שני רצים - אליס ובוב - כל אחד לכיוון אחר (אחד עם כיוון השעון והשני נגד כיוון השעון). מהירות אליס היא {::nomarkdown}\( \frac{1}{a}\){:/nomarkdown} (כלומר, מרחק של {::nomarkdown}\( \frac{1}{a}\){:/nomarkdown} אצטדיון בכל יחידת זמן) ומהירות בוב היא {::nomarkdown}\( \frac{1}{b}\){:/nomarkdown} - כלומר, הם משלימים סיבוב סביב האצטדיון בזמנים {::nomarkdown}\( a,b\){:/nomarkdown} בהתאמה, ובגלל ש-{::nomarkdown}\( \frac{1}{a}+\frac{1}{b}=1\){:/nomarkdown} הם נפגשים <strong>בדיוק</strong> כל יחידת זמן. כעת התעלול פשוט: כאשר אליס עוברת ב-{::nomarkdown}\( O\){:/nomarkdown} היא צועקת את מספר הפעמים שהיא חלפה עד כה על פני בוב; וכאשר בוב חולף ב-{::nomarkdown}\( O\){:/nomarkdown} הוא צועק את מספר הפעמים שהוא חלף עד כה על פני אליס.

מה שאני טוען הוא שסדרת המספרים שאליס צועקת היא {::nomarkdown}\( a_{n}\){:/nomarkdown} וסדרת המספרים שבוב צועק היא {::nomarkdown}\( b_{n}\){:/nomarkdown}. למה? ובכן, זה פשוט למדי: אליס פוגשת את בוב בזמנים{::nomarkdown}\( 1,2,3,\dots\){:/nomarkdown}, ולכן כשהיא חולף על פני בוב בזמן {::nomarkdown}\( n\){:/nomarkdown} היא ראתה אותו עד כה בדיוק {::nomarkdown}\( n\){:/nomarkdown} פעמים. בנוסף, אליס חולפת על פני הראשית בזמנים {::nomarkdown}\( a,2a,3a,\dots\){:/nomarkdown} וכדומה; מה מספר הפעמים שבהם אליס ראתה את בוב כשהיא מגיעה לראשית בזמן {::nomarkdown}\( na\){:/nomarkdown}? ובכן, זה חייב להיות המספר הטבעי הגדול ביותר שקטן או שווה ל-{::nomarkdown}\( na\){:/nomarkdown} - זה הזמן האחרון שבו אליס חלפה על פני בוב. לכן הסדרה של המספרים שאליס צועקת היא {::nomarkdown}\( \left\lfloor a\right\rfloor ,\left\lfloor 2a\right\rfloor ,\left\lfloor 3a\right\rfloor ,\dots\){:/nomarkdown} והסדרה של בוב היא {::nomarkdown}\( \left\lfloor b\right\rfloor ,\left\lfloor 2b\right\rfloor ,\left\lfloor 3b\right\rfloor ,\dots\){:/nomarkdown}.

אבל עכשיו, למה אלו סדרות זרות ומשלימות? אנחנו מקבלים את זה כמעט בחינם מהמודל שלנו. האבחנה המרכזית פה היא שאליס ובוב לא יחזרו אף פעם להיות בו זמנית ב-{::nomarkdown}\( O\){:/nomarkdown}, וזה נובע ישירות מכך ש-{::nomarkdown}\( a,b\){:/nomarkdown} אי רציונליים; אם {::nomarkdown}\( a\){:/nomarkdown} היה רציונלי אז גם {::nomarkdown}\( b=\frac{a}{a-1}\){:/nomarkdown} היה רציונלי, ועל ידי מכנה משותף היינו מגלים מייד מתי שניהם יחזרו להיות יחד ב-{::nomarkdown}\( O\){:/nomarkdown} (בדקו זאת!) והיינו מקבלים שהם צועקים את אותו המספר גם יחד והייתה התנגשות של הסדרות.

אוקיי, אז אם {::nomarkdown}\( a,b\){:/nomarkdown} רציונליים אליס ובוב לא נפגשים בראשית, אבל למה אם הם אי רציונליים מובטח שהם לא ייפגשו בראשית? פגישה כזו פירושה {::nomarkdown}\( na=mb\){:/nomarkdown} עבור {::nomarkdown}\( n,m\){:/nomarkdown} טבעיים, כלומר ש-{::nomarkdown}\( a=\frac{m}{n}b\){:/nomarkdown}; ומכיוון ש-{::nomarkdown}\( \frac{1}{a}+\frac{1}{b}=1\){:/nomarkdown} נקבל ש-{::nomarkdown}\( \left(\frac{n}{m}+1\right)\frac{1}{b}=1\){:/nomarkdown}, כלומר {::nomarkdown}\( b=\frac{n+m}{m}\){:/nomarkdown} שהוא מספר רציונלי לגמרי (ובדומה {::nomarkdown}\( a=\frac{n+m}{n}\){:/nomarkdown}). זו סיטואציה מאוד נפוצה עם מספרים אי רציונליים - תנו להם לרוץ סביב אצטדיון עם אורך רציונלי ותמדדו אותם בנקודות זמן רציונליות, והם אף פעם לא יחזרו לאותו מקום.

יופי. אז הסכמנו שאליס ובוב אף פעם לא חוזרים לראשית יחד. עכשיו כל מה שנותר הוא האבחנה שאחרי כל פעם שאחד מהרצים עובר בראשית, שני הרצים חייבים להיפגש לפני שאחד מהם יגיע שוב לראשית, אבל זה מובן מאליו - אם אליס נמצאת כרגע בראשית ובוב טרם הגיע לשם, אז מכיוון שהם נעים בכיוונים מנוגדים בוב חייב לחלוף על אליס כדי להגיע לראשית (ואליס חייבת לחלוף על פני בוב כדי להגיע לראשית). זה אומר שהם אף פעם לא יצעקו את אותו מספר בראשית, כך שאין התנגשויות בין הסדרות. ולמה הסדרות מכסות את כל הטבעיים? כי אחרי כל פעם שבה אליס ובוב נפגשים (ולכן מונה הפגישות שלהם גדל ב-1 אצל שניהם), מישהו מהם חייב לעבור בראשית לפני הפגישה הבאה שלהם (כי יחד הם משלימים סיבוב שלם סביב האצטדיון לפני הפגישה הבאה הזו). סוף הסיפור. אני חושב שההוכחה הזו מאפשר להבין הרבה יותר טוב למה אנו מקבלים סדרות ביטי מאשר ההוכחות ה"חשבוניות".

בואו נחזור עכשיו למשחק המלכה. קיבלנו בו שתי סדרות זרות ומשלימות, של קואורדינטות ה-{::nomarkdown}\( x\){:/nomarkdown} של משבצות הפסד, וקואורדינטות ה-{::nomarkdown}\( y\){:/nomarkdown} שלהן. אני טוען שאלו סדרות ביטי, אבל עבור אילו מספרים {::nomarkdown}\( a,b\){:/nomarkdown}?

ובכן, כאן יש לנו נתון שאפשר להיעזר בו - העובדה ש-{::nomarkdown}\( b_{n}=a_{n}+n\){:/nomarkdown} (זוכרים? זה היה אחד מהקריטריונים שהכתיבו את אופן בניית הסדרה). כלומר, {::nomarkdown}\( \left\lfloor nb\right\rfloor =\left\lfloor na\right\rfloor +n\){:/nomarkdown} לכל {::nomarkdown}\( n\){:/nomarkdown}. כדי שזה יקרה, צריך שיתקיים {::nomarkdown}\( b=a+1\){:/nomarkdown} (הוכיחו את זה לעצמכם!). נוסיף לכך את העובדה ש-{::nomarkdown}\( b=\frac{a}{a-1}\){:/nomarkdown} ונקבל {::nomarkdown}\( a=\left(a+1\right)\left(a-1\right)\){:/nomarkdown}. פתיחת סוגריים והעברת אגפים תיתן לנו {::nomarkdown}\( a^{2}-a-1=0\){:/nomarkdown}, והפתרונות למשוואה הזו הם {::nomarkdown}\( \frac{1\pm\sqrt{5}}{2}\){:/nomarkdown}, כשאנחנו רוצים מראש את הפתרון החיובי מבין השניים. כלומר, {::nomarkdown}\( a=\frac{1+\sqrt{5}}{2}\){:/nomarkdown}. את המספר הזה אתם מכירים כנראה יותר בסימון {::nomarkdown}\( \phi\){:/nomarkdown} ובשם "יחס הזהב"; הרי לכם מקום נחמד שבו הוא צץ מעצמו. מכיוון שיחס הזהב מקיים {::nomarkdown}\( \phi^{2}=\phi+1\){:/nomarkdown} הרי ש-{::nomarkdown}\( b\){:/nomarkdown} מיודענו הוא {::nomarkdown}\( \phi^{2}\){:/nomarkdown} במקרה זה. במילים אחרות, סדרות הביטי של {::nomarkdown}\( \phi,\phi^{2}\){:/nomarkdown} הן בדיוק מה שנותן את מצבי ההפסד במשחק המלכה. יש אמנם הכללות ודברים נוספים שאפשר לומר בעניין אבל זה נראה לי כמו מקום טוב לעצור בו.
