---
id: 1102
title: "מה האסוציאציה שלכם ל-?=(1+2)2÷6?"
date: 2011-05-02 10:04:28
layout: post
categories: 
  - הגיגים מתמטיים כלליים
  - מתמטיקה בראי התקשורת
tags: 
  - Polish Notation
  - אריתמטיקה
  - מהומה רבה על לא מאומה
---
מהומה בפייסבוק. מישהו פתח סקר עם השאלה הפשוטה:

{::nomarkdown}\( 6\div 2(1+2)=? \){:/nomarkdown}

ושתי תשובות אפשריות - 1 ו-9. התוצאה? כרגע יש בסביבות ה-1,300,000 מצביעים עבור 1, 1,700,000 מצביעים עבור 9 ודיון בן למעלה מ-100,000 תגובות. מה לעזאזל?

חשבתי להתעלם מזה ולהטיף לאנשים להתעסק במתמטיקה רצינית במקום זה. למעשה, זה עדיין מה שאני מציע לעשות; אבל אולי אפשר לנצל את ההזדמנות הזו כדי לתאר מושג כללי ונחמד - אסוציאטיביות.

התרגיל הזה כנראה כל כך מבלבל אנשים, כי רובם זוכרים מבית הספר שהיה משהו שנקרא "כללי קדימות", שהולכים ככה: קודם כל סוגריים, אחר כך חזקה, אחר כך כפל וחילוק, ואחר כך חיבור וחיסור. טוב ויפה, אז {::nomarkdown}\( 6\div2(1+2)=6\div2\times3\){:/nomarkdown} על פי החוקים הללו, אבל מה עכשיו? הרי כפל וחילוק שניהם נמצאים באותה דרגת קדימות. אז איך מחליטים מה לעשות?

התשובה היא שאי אפשר לדעת מה לעשות, לא בלי כללים נוספים, שגם אותם אולי אמרו בבית הספר אבל מי זוכר. הביטוי הזה דורש שנשים בו עוד זוג סוגריים, אבל יש שתי דרכים שונות לשים סוגריים - או {::nomarkdown}\( \left(6\div2\right)\times3\){:/nomarkdown} או {::nomarkdown}\( 6\div\left(2\times3\right)\){:/nomarkdown}. אם שמים את הסוגריים על הביטוי השמאלי מקבלים 9; אם שמים אותן על הביטוי הימני מקבלים 1. אז סלע המחלוקת הוא בסך הכל איך בבית הספר אמרו לאנשים לטפל בעניין הזה.

שימו לב שהבעיה כאן נובעת מהחילוק. כפל לבדו לא יוצר בעיות - {::nomarkdown}\( 3\times5\times2\){:/nomarkdown} הוא תמיד 30, ולא משנה אם מפרשים את הביטוי בתור {::nomarkdown}\( \left(3\times5\right)\times2\){:/nomarkdown} או {::nomarkdown}\( 3\times\left(5\times2\right)\){:/nomarkdown}. במתמטיקה קוראים לתכונה הזו "אסוציאטיביות" ובעברית קוראים לזה "כלל הקיבוץ". זה אומר שאפשר לקבץ איברים - לשים סוגריים - באיזה אופן שנבחר וזה לא ישפיע על התוצאה הסופית. גם חיבור הוא פעולה אסוציאטיבית, אבל חיסור, חילוק והעלאה בחזקה - לא. למשל, {::nomarkdown}\( \left(1-2\right)-3=-4\){:/nomarkdown} אבל {::nomarkdown}\( 1-\left(2-3\right)=2\){:/nomarkdown}; ולמשל {::nomarkdown}\( 2^{\left(2^{3}\right)}=2^{8}=256\){:/nomarkdown} אבל {::nomarkdown}\( \left(2^{2}\right)^{3}=4^{3}=64\){:/nomarkdown}; ולמשל, {::nomarkdown}\( \left(8\div4\right)\div2=1\){:/nomarkdown} אבל {::nomarkdown}\( 8\div\left(4\div2\right)=4\){:/nomarkdown}. בכל המקרים הללו צריך לקבוע מפורשות (ובאופן שרירותי לגמרי - זה עניין של הגדרות נטו) האם שמים סוגריים על שני האיברים השמאליים יותר, או על שני האיברים הימניים יותר. במקרה הראשון אומרים שלפעולה יש אסוציאטיביות שמאלית, ובמקרה השני - שיש לה אסוציאטיביות ימנית. בעולם התרבותי מגדירים בדרך כלל את פעולות החיסור והחילוק להיות בעלות אסוציאטיביות שמאלית, ואילו פעולת החזקה היא בעלת אסוציאטיביות ימנית. כלומר, {::nomarkdown}\( 1-2-3=-4\){:/nomarkdown}, ו-{::nomarkdown}\( 8\div4\div2=1\){:/nomarkdown}, ו-{::nomarkdown}\( 2^{2^{3}}=256\){:/nomarkdown}.

רגע, תגידו, אבל מה הולך ב-{::nomarkdown}\( 6\div2\times3\){:/nomarkdown}? זה לא ביטוי שמכיל פעמיים את פעולת החילוק; הוא מכיל פעולת חילוק אחת ופעולת כפל אחת. כדי לפתור את זה, אומרים שגם לכפל יש אסוציאטיביות שמאלית; והכלל של חלוקת הסוגריים הוא "אם יש לך שתי פעולות באותה רמת קדימות שלכולן אסוציאטיביות שמאלית, שים את הסוגריים על הפעולה השמאלית יותר מביניהן". ואם יש לנו פעולות באותה רמת קדימות שלאחת אסוציאטיביות שמאלית ולשניה ימנית? בום! המתמטיקה מתפוצצת, ולכן לא כדאי להגדיר הגדרות גרועות שכאלה.

אם כן, על פי הסטנדרט המתמטי השרירותי שהצגתי עד כה, {::nomarkdown}\( 6\div2(1+2)=9\){:/nomarkdown}. ומה עם ה-1,300,000 שאמרו שזה 1? ובכן, במקור כתבתי עליהם "הם כנראה פשוט לא זוכרים/מכירים את זה. אז מה? ויכוחים על הגדרות הם הצורה הנחותה ביותר של מתמטיקה, אם הם בכלל ראויים להיקרא מתמטיקה", אבל זה לא ממש הוגן כלפיהם ואנשים נוספים שדיברו איתי על התרגיל (בתגובות כאן וגם במקומות אחרים) הצביעו על כך. טיעון אפשרי אחד בזכות ה-1 הוא שסימן הכפל הושמט מהמכפלה של 2 ב-3 ב-{::nomarkdown}\( 6\div2(1+2)\){:/nomarkdown}, וזה עשוי לרמז על כך של-2 כפול 3 יש קדימות גבוהה <strong>יותר </strong>מאשר לחילוק, ואלו דווקא אנשי ה-9 שפשוט לא זוכרים/מכירים את הקונבנציה הזו. ושוב, גם לזה אענה - אז מה? ויכוחים על הגדרות הם הצורה הנחותה ביותר של מתמטיקה, אם הם בכלל ראויים להיקרא מתמטיקה.

את מי הויכוח הזה כן צריך לעניין, קצת? למשל, את האנשים שבונים מהדרים ומפרשים של תוכניות מחשב (מהדר לוקח קוד של תוכנית מחשב וממיר אותו לקוד בשפת מכונה; מפרש לוקח קוד של תוכנית מחשב ומריץ אותו). כל כלי אוטומטי לבנייה של מהדרים/מפרשים מתבסס על הגדרה של דקדוק פורמלי, שמגדיר כיצד נבנה טקסט חוקי של תוכנית מחשב. בהינתן קוד התוכנית, המהדר מנסה לגלות את האופן שבו התוכנית "נגזרה" מהדקדוק - את האופן הזה אפשר לתאר באמצעות עץ, "עץ גזירה". הבעיה היא שלפעמים יש יותר מעץ גזירה אפשרי אחד, והמשמעות של התוכנית היא שונה עבור עצים שונים. הביטוי {::nomarkdown}\( 6\div2)1+2(=?\){:/nomarkdown} הוא בדיוק דוגמה לביטוי בעל שני עצי גזירה. כדי לפתור את הבעיה, הדקדוק הפורמלי כולל גם כללי קדימות ואסוציאטיביות, ולכן היכרות עם המושגים הללו היא הכרחית לכל מי שכותב מהדר.

לסיום, אי אפשר בלי להזכיר שיטת כתיבה לביטויים אריתמטיים שבה כל בלבול המוח הזה של קדימות ואסוציאטיביות לא קיימת בכלל - השיטה הפולנית, שנקראת כך בשל ממציאה הפולני, הלוגיקאי יאן לוקשביץ'. בשיטה הזו קודם כל נכתבת הפעולה, ואחר כך נכתבים איבריה. למשל, במקום לכתוב {::nomarkdown}\( 2\times3\){:/nomarkdown} נכתוב {::nomarkdown}\( \times2\ 3\){:/nomarkdown}. מבלבל? בוודאי, כי אנחנו לא רגילים. את הביטוי {::nomarkdown}\( 6\div2\times3\){:/nomarkdown} יכתוב לוקשביץ' כ-{::nomarkdown}\( \times\div6\ 2\ 3\){:/nomarkdown}. כלומר, כשנתחיל לקרוא את הביטוי נראה {::nomarkdown}\( \times\){:/nomarkdown} ונדע שכעת אמורים לבוא שני מספרים שעלינו לכפול. מייד אחר כך יבוא {::nomarkdown}\( \div\){:/nomarkdown} ונדע שהראשון מבין שני המספרים שעלינו לכפול יהיה בעצמו תוצאה של פעולה אריתמטית - הפעלת {::nomarkdown}\( \div\){:/nomarkdown}. שני המספרים הבאים הם אלו שעליהם יש להפעיל את {::nomarkdown}\( \div\){:/nomarkdown}, ולכן אפשר להחליף את כל ה-{::nomarkdown}\( \div6\ 2\){:/nomarkdown} ב-{::nomarkdown}\( 3\){:/nomarkdown}; הביטוי הוא אם כן {::nomarkdown}\( \times3\ 3\){:/nomarkdown}שאכן שווה ל-9.

וריאציה פופולרית על השיטה הפולנית היא השיטה הפולנית ההפוכה, Reverse Polish Notation, שבה קודם כל נכתבים המספרים ורק לאחר מכן הפעולה. את הביטוי {::nomarkdown}\( 6\div2\times3\){:/nomarkdown} כותבים בשיטה זו {::nomarkdown}\( 6\ 2\ \div3\ \times\){:/nomarkdown}. נראה נורא? בוודאי, אבל מבחינה חישובית קל הרבה יותר לטפל בביטוי כזה מאשר ב-{::nomarkdown}\( 6\div2\times3\){:/nomarkdown}. את {::nomarkdown}\( 6\div2\times3\){:/nomarkdown} צריך לנתח תחבירית ולבדוק את כללי הקדימויות והאסוציאטיביות וכאב ראש; ואילו כדי לקבל את ערכו של {::nomarkdown}\( 6\ 2\ \div3\ \times\){:/nomarkdown} קיים אלגוריתם פשוט בתכלית שמשתמש במחסנית. בכל פעם שבה קוראים מספר, דוחפים אותו למחסנית; ובכל פעם שבה פוגשים אופרטור, שולפים מהמחסנית את כמות האיברים שעליהם האופרטור פועל, מחשבים את התוצאה ודוחפים אותה למחסנית. במקרה של {::nomarkdown}\( 6\ 2\ \div3\ \times\){:/nomarkdown} קודם כל יידחפו 6 ו-2 למחסנית; לאחר מכן ייקרא {::nomarkdown}\( \div\){:/nomarkdown} ולכן שניהם יישלפו מהמחסנית ו-3 יידחף במקומם; לאחר מכן יידחף ה-3 הנוסף, ולבסוף ייקרא {::nomarkdown}\( \times\){:/nomarkdown} ולכן שני ה-3-ים יוצאו מהמחסנית ויוכפלו לקבלת 9.

אם כן, למחשב זה פשוט וקל, אך אנחנו כנראה נוסיף להשתמש בביטויים אריתמטיים באופן המוכר והחביב לנו; <a href="http://xkcd.com/645/">xkcd</a> הפליא לתאר את הסיבה העיקרית לכך:

<a href="http://www.gadial.net/wp-content/uploads/2011/05/rps.png"><img class="alignnone size-full wp-image-1116" title="Reverse Polish Sausage" alt="A sausage is sitting to the right of an empty bun." src="http://www.gadial.net/wp-content/uploads/2011/05/rps.png" width="276" height="260" /></a>
